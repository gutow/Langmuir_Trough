<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 13.0.0"/>
    <title>Trough_GUI.calibration_utils API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent }nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--code);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style><script>
    window.MathJax = {
        tex: {
            inlineMath: [['$', '$'], ['\\(', '\\)']]
        }
    };
</script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
    /* Re-invoke MathJax when DOM content changes, for example during search. */
    document.addEventListener("DOMContentLoaded", () => {
        new MutationObserver(() => MathJax.typeset()).observe(
            document.querySelector("main.pdoc").parentNode,
            {childList: true}
        );
    })
</script>
<style>
    mjx-container {
        overflow-x: auto;
    }
</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../Trough_GUI.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;Trough_GUI</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



        <h2>API Documentation</h2>
            <ul class="memberlist">
            <li>
                    <a class="class" href="#Calibration">Calibration</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Calibration.__init__">Calibration</a>
                        </li>
                        <li>
                                <a class="function" href="#Calibration.cal_from_html">cal_from_html</a>
                        </li>
                        <li>
                                <a class="function" href="#Calibration.cal_to_html">cal_to_html</a>
                        </li>
                        <li>
                                <a class="function" href="#Calibration.cal_apply">cal_apply</a>
                        </li>
                        <li>
                                <a class="function" href="#Calibration.cal_inv">cal_inv</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Calibrations">Calibrations</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Calibrations.read_cal">read_cal</a>
                        </li>
                        <li>
                                <a class="function" href="#Calibrations.write_cal">write_cal</a>
                        </li>
                        <li>
                                <a class="function" href="#Calibrations.poly_fit">poly_fit</a>
                        </li>
                </ul>

            </li>
    </ul>


            <footer>Langmuir_Trough v0.5.2</footer>

        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../Trough_GUI.html">Trough_GUI</a><wbr>.calibration_utils    </h1>

                        <div class="docstring"><p>Utilities for:</p>

<ul>
<li>writing and reading calibration files stored in the local
user directory <code>.Trough/calibrations</code>.</li>
<li>fitting calibration data to generate calibration parameters.</li>
<li>converting between raw signal and user-friendly values.</li>
</ul>
</div>

                        <input id="mod-calibration_utils-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-calibration_utils-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="sd">&quot;&quot;&quot;Utilities for:</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a><span class="sd">* writing and reading calibration files stored in the local</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="sd">user directory `.Trough/calibrations`.</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="sd">* fitting calibration data to generate calibration parameters.</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="sd">* converting between raw signal and user-friendly values.</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="k">class</span> <span class="nc">Calibration</span><span class="p">:</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">units</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">param_stdev</span><span class="p">,</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a>                 <span class="n">param_inv</span><span class="p">,</span> <span class="n">param_inv_stdev</span><span class="p">,</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a>                 <span class="n">cal_data_x</span><span class="p">,</span> <span class="n">cal_data_y</span><span class="p">,</span> <span class="n">fit_type</span><span class="o">=</span><span class="s2">&quot;polynomial&quot;</span><span class="p">,</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a>                 <span class="n">fit_eqn_str</span><span class="o">=</span><span class="s2">&quot;y = C0 + C1*x + C2*x*x + C3*x*x*x + ...&quot;</span><span class="p">,</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a>                 <span class="n">fit_ceof_lbls</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;C0&quot;</span><span class="p">,</span> <span class="s2">&quot;C1&quot;</span><span class="p">,</span> <span class="s2">&quot;C2&quot;</span><span class="p">,</span> <span class="s2">&quot;C3&quot;</span><span class="p">,</span> <span class="s2">&quot;C4&quot;</span><span class="p">,</span> <span class="s2">&quot;C5&quot;</span><span class="p">,</span> <span class="s2">&quot;C6&quot;</span><span class="p">,</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a>                                  <span class="s2">&quot;C7&quot;</span><span class="p">],</span> <span class="n">additional_data</span> <span class="o">=</span> <span class="p">{}):</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a><span class="sd">        Defines a calibration of type `name`.</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="sd">        Parameters</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a><span class="sd">        ----------</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="sd">        name: str</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a><span class="sd">            calibration name.</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="sd">        units: str</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a><span class="sd">            string representation of the units the calibration yields.</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a><span class="sd">        timestamp: float</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a><span class="sd">            Unix floating point timestamp.</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a><span class="sd">        param:list</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a><span class="sd">            list of the numerical parameters for the fit yielding the</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a><span class="sd">            calibration.</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a><span class="sd">        param_stdev: list</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a><span class="sd">            list of the numerical values for the estimated standard</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a><span class="sd">            deviation of the parameters from the fit.</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a><span class="sd">        param_inv: list</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a><span class="sd">            list of the numerical values for the fit (or equation) yielding the</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a><span class="sd">            inverse of the calibration (return to the raw value).</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a><span class="sd">        param_inv_stdev: list</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a><span class="sd">            list of the numerical values for the estimated standard deviation of</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="sd">            the parameters for the inversion.</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a><span class="sd">        cal_data_x: list</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a><span class="sd">            x-data used for the calibration fit.</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a><span class="sd">        cal_data_y: list</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a><span class="sd">            y-data used for the calibration fit.</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a><span class="sd">        fit_type: str</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a><span class="sd">            string name for the fit type. Defaults to &quot;polynomial&quot;</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a><span class="sd">        fit_eqn_str: str</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a><span class="sd">            string representation of the fit equation. Defaults to</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a><span class="sd">            &quot;y = C0 + C1*x + C2*x*x + C3*x*x*x + ...&quot;</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a><span class="sd">        fit_ceof_lbls: list</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a><span class="sd">            list of string labels for the coefficients, which should</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a><span class="sd">            correlate to symbols in the fit_eqn_str. Defaults to [&quot;C0&quot;, &quot;C1&quot;,</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a><span class="sd">            ...]. Automatically, truncated to the actual number of</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a><span class="sd">            coefficients determined by the order of the polynomial.</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a><span class="sd">        additional_data:dict</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a><span class="sd">            a dictionary of key:value pairs where the keys are a short</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a><span class="sd">            descriptive string. They can contain any additional data</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a><span class="sd">            necessary for doing calculations on the data.</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="n">units</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="n">timestamp</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">param</span> <span class="o">=</span> <span class="n">param</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">param_stdev</span> <span class="o">=</span> <span class="n">param_stdev</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">param_inv</span> <span class="o">=</span> <span class="n">param_inv</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">param_inv_stdev</span>  <span class="o">=</span> <span class="n">param_inv_stdev</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cal_data_x</span> <span class="o">=</span> <span class="n">cal_data_x</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cal_data_y</span> <span class="o">=</span> <span class="n">cal_data_y</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fit_type</span> <span class="o">=</span> <span class="n">fit_type</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fit_eqn_str</span> <span class="o">=</span> <span class="n">fit_eqn_str</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fit_coef_lbls</span> <span class="o">=</span> <span class="n">fit_ceof_lbls</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_type</span> <span class="o">==</span> <span class="s2">&quot;polynomial&quot;</span> <span class="ow">and</span>\
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a>                <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fit_coef_lbls</span><span class="p">):</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fit_coef_lbls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_coef_lbls</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">)]</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">additional_data</span> <span class="o">=</span> <span class="n">additional_data</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a>    <span class="nd">@classmethod</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a>    <span class="k">def</span> <span class="nf">cal_from_html</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">html</span><span class="p">):</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;This takes in an html str, parses it and returns a new</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a><span class="sd">        calibration.</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a><span class="sd">        Parameters</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a><span class="sd">        ----------</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a><span class="sd">        html: str</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a><span class="sd">            The html to be parsed to create the calibration object</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a><span class="sd">        Returns</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a><span class="sd">        -------</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a><span class="sd">        calibration: calibration</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a><span class="sd">            a calibration object.</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a>        <span class="kn">from</span> <span class="nn">AdvancedHTMLParser</span> <span class="kn">import</span> <span class="n">AdvancedHTMLParser</span> <span class="k">as</span> <span class="n">Parser</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a>        <span class="n">document</span> <span class="o">=</span> <span class="n">Parser</span><span class="p">()</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a>        <span class="n">document</span><span class="o">.</span><span class="n">parseStr</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a>        <span class="n">name</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a>        <span class="n">units</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;units&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a>        <span class="n">fit_type</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;fit_type&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a>        <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;timestamp&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a>        <span class="n">fit_eqn_str</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;fit_eqn_str&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a>        <span class="n">coef_lbl_el</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;coef_labels&#39;</span><span class="p">)</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a>        <span class="n">coef_lbls</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">coef_lbl_el</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a>            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a>                <span class="n">coef_lbls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a>        <span class="n">coef_el</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;coefficients&#39;</span><span class="p">)</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a>        <span class="n">coef_val</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">coef_el</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a>            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a>                <span class="n">coef_val</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a>        <span class="n">stdev_el</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;stdev&#39;</span><span class="p">)</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a>        <span class="n">coef_stdev</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">stdev_el</span><span class="p">:</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a>            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a>                <span class="n">coef_stdev</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a>        <span class="n">inv_coef_el</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;inv_coefficients&#39;</span><span class="p">)</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a>        <span class="n">inv_coef_val</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">inv_coef_el</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a>            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a>                <span class="n">inv_coef_val</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a>        <span class="n">inv_stdev_el</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;inv_stdev&#39;</span><span class="p">)</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a>        <span class="n">inv_coef_stdev</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">inv_stdev_el</span><span class="p">:</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a>            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a>                <span class="n">inv_coef_stdev</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a>        <span class="n">cal_el</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;calibration_data&#39;</span><span class="p">)</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a>        <span class="n">cal_x</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a>        <span class="n">cal_y</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">cal_el</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;cal_data_x&#39;</span><span class="p">):</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a>            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a>                <span class="n">cal_x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">cal_el</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;cal_data_y&#39;</span><span class="p">):</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a>            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a>                <span class="n">cal_y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a>        <span class="n">cal_el</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;additional_data&#39;</span><span class="p">)</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a>        <span class="n">add_data</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a>        <span class="k">if</span> <span class="n">cal_el</span><span class="p">:</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a>            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">cal_el</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;additional_data_keys&#39;</span><span class="p">),</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>                <span class="n">cal_el</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;additional_data_values&#39;</span><span class="p">)):</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a>                <span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a>                <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a>                <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a>                    <span class="n">key</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a>                <span class="k">if</span> <span class="n">j</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a>                    <span class="n">value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a>                <span class="n">add_data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a>        <span class="k">return</span> <span class="n">Calibration</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">units</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">coef_val</span><span class="p">,</span> <span class="n">coef_stdev</span><span class="p">,</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a>                           <span class="n">inv_coef_val</span><span class="p">,</span> <span class="n">inv_coef_stdev</span><span class="p">,</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a>                 <span class="n">cal_x</span><span class="p">,</span> <span class="n">cal_y</span><span class="p">,</span> <span class="n">fit_type</span><span class="o">=</span><span class="n">fit_type</span><span class="p">,</span> <span class="n">fit_eqn_str</span><span class="o">=</span><span class="n">fit_eqn_str</span><span class="p">,</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a>                           <span class="n">fit_ceof_lbls</span><span class="o">=</span><span class="n">coef_lbls</span><span class="p">,</span> <span class="n">additional_data</span><span class="o">=</span><span class="n">add_data</span><span class="p">)</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a>    <span class="k">def</span> <span class="nf">cal_to_html</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;This routine creates an html str that would be human-readable in a</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a><span class="sd">        browser detailing the calibration. This can be written to a file to</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a><span class="sd">        store the calibration.</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a><span class="sd">        Returns</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a><span class="sd">        -------</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a><span class="sd">        calib_div: str</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a><span class="sd">            string containing the html detailing the calibration.</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a>        <span class="kn">from</span> <span class="nn">AdvancedHTMLParser</span> <span class="kn">import</span> <span class="n">AdvancedTag</span> <span class="k">as</span> <span class="n">Domel</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a>        <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a>        <span class="n">calib_div</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">)</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a>        <span class="n">calib_title</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;h3&#39;</span><span class="p">)</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a>        <span class="n">calib_title</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;Calibration of &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a>        <span class="n">calib_div</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">calib_title</span><span class="p">)</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a>        <span class="n">calib_info</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">)</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a>        <span class="n">calib_info</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;calib_info&#39;</span><span class="p">)</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a>        <span class="n">calib_info</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;calib_info&#39;</span><span class="p">)</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a>        <span class="n">calib_info</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;border&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;&lt;th&gt;Calibration of&lt;/th&gt;&lt;th&gt;Units returned&lt;/th&gt;&#39;</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a>                           <span class="s1">&#39;&lt;th&gt;Fit function&lt;/th&gt;&lt;th&gt;Time&lt;/th&gt;&#39;</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a>                           <span class="s1">&#39;&lt;th&gt;Timestamp&lt;/th&gt;&#39;</span><span class="p">)</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a>        <span class="n">calib_info</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a>        <span class="n">isotime</span> <span class="o">=</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">))</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;&lt;td id = &quot;name&quot;&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a>                           <span class="s1">&#39;&lt;td id = &quot;units&quot;&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a>                           <span class="s1">&#39;&lt;td id = &quot;fit_type&quot;&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fit_type</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a>                           <span class="s1">&#39;&lt;td id = &quot;iso_time&quot;&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">isotime</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a>                           <span class="s1">&#39;&lt;td id = &quot;timestamp&quot;&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span><span class="p">)</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a>        <span class="n">calib_info</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a>        <span class="n">calib_div</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">calib_info</span><span class="p">)</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a>        <span class="n">p</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;p&#39;</span><span class="p">)</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a>        <span class="n">p</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;fit_eqn_str&#39;</span><span class="p">)</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a>        <span class="n">p</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;Fit Equation: &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_eqn_str</span><span class="p">)</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a>        <span class="n">calib_div</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a>        <span class="n">parameters</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">)</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;parameters&#39;</span><span class="p">)</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;parameters&#39;</span><span class="p">)</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;border&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a>        <span class="n">caption</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;caption&#39;</span><span class="p">)</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a>        <span class="n">caption</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;Parameters&#39;</span><span class="p">)</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">caption</span><span class="p">)</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;coef_labels&#39;</span><span class="p">)</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;Labels&lt;/th&gt;&#39;</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_coef_lbls</span><span class="p">:</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;coefficients&#39;</span><span class="p">)</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;Coefficients&lt;/th&gt;&#39;</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">:</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;stdev&#39;</span><span class="p">)</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;Standard Deviation&lt;/th&gt;&#39;</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_stdev</span><span class="p">:</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a>        <span class="n">calib_div</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a>        <span class="n">inverse</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">)</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a>        <span class="n">inverse</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;inverse&#39;</span><span class="p">)</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a>        <span class="n">inverse</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;inverse&#39;</span><span class="p">)</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a>        <span class="n">inverse</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;border&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a>        <span class="n">caption</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;caption&#39;</span><span class="p">)</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a>        <span class="n">caption</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;Inverse Parameters&#39;</span><span class="p">)</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a>        <span class="n">inverse</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">caption</span><span class="p">)</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;coef_labels&#39;</span><span class="p">)</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;Labels&lt;/th&gt;&#39;</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_coef_lbls</span><span class="p">:</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a>        <span class="n">inverse</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;inv_coefficients&#39;</span><span class="p">)</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;Coefficients&lt;/th&gt;&#39;</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_inv</span><span class="p">:</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a>        <span class="n">inverse</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;inv_stdev&#39;</span><span class="p">)</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;Standard Deviation&lt;/th&gt;&#39;</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_inv_stdev</span><span class="p">:</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a>        <span class="n">inverse</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a>        <span class="n">calib_div</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">inverse</span><span class="p">)</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a>        <span class="n">fit_data</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">)</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a>        <span class="n">fit_data</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;calibration_data&#39;</span><span class="p">)</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a>        <span class="n">fit_data</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;calibration_data&#39;</span><span class="p">)</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a>        <span class="n">fit_data</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;border&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a>        <span class="n">caption</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;caption&#39;</span><span class="p">)</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a>        <span class="n">caption</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;Calibration Data&#39;</span><span class="p">)</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a>        <span class="n">fit_data</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">caption</span><span class="p">)</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;cal_data_x&#39;</span><span class="p">)</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;X Calibration Data&lt;/th&gt;&#39;</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cal_data_x</span><span class="p">:</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a>        <span class="n">fit_data</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;cal_data_y&#39;</span><span class="p">)</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;Y Calibration Data&lt;/th&gt;&#39;</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cal_data_y</span><span class="p">:</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a>        <span class="n">fit_data</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a>        <span class="n">calib_div</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">fit_data</span><span class="p">)</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a>        <span class="n">add_data</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">)</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a>        <span class="n">add_data</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span><span class="s1">&#39;additonal_data&#39;</span><span class="p">)</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a>        <span class="n">add_data</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="s1">&#39;additional_data&#39;</span><span class="p">)</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a>        <span class="n">add_data</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;border&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a>        <span class="n">caption</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;caption&#39;</span><span class="p">)</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a>        <span class="n">caption</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;Additional Data&#39;</span><span class="p">)</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a>        <span class="n">add_data</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">caption</span><span class="p">)</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="s1">&#39;additional_data_keys&#39;</span><span class="p">)</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a>        <span class="n">tr2</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a>        <span class="n">tr2</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;additional_data_values&#39;</span><span class="p">)</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a>        <span class="n">innerstr2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">additional_data</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a>            <span class="n">innerstr2</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">additional_data</span><span class="p">[</span><span class="n">k</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a>        <span class="k">if</span> <span class="n">innerstr</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a>            <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a>            <span class="n">tr2</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr2</span><span class="p">)</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a>            <span class="n">add_data</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a>            <span class="n">add_data</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr2</span><span class="p">)</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a>            <span class="n">calib_div</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">add_data</span><span class="p">)</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a>        <span class="k">return</span> <span class="n">calib_div</span><span class="o">.</span><span class="n">asHTML</span><span class="p">()</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a>    <span class="k">def</span> <span class="nf">_cal_apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">stdev</span><span class="p">,</span> <span class="n">inverse</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply the calibration to some data.</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a><span class="sd">        Parameters</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a><span class="sd">        ----------</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a><span class="sd">        data: object</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a><span class="sd">            either a float or iterable of floats</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a><span class="sd">        stdev: object</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a><span class="sd">            either a float or iterable of floats containing the uncertainty</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a><span class="sd">            in the data</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a><span class="sd">        inverse: keyword (default = False). Controls whether applies forward</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a><span class="sd">        (raw -&gt; calibration in units, False) or reverse (value in units -&gt;</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a><span class="sd">        raw, True) calibrations.</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a><span class="sd">        Returns</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a><span class="sd">        -------</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a><span class="sd">        object</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a><span class="sd">            the data after applying the calibration: a float or iterable of</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a><span class="sd">            floats depending on what was passed to the operation.</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a><span class="sd">        object</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a><span class="sd">            the standard deviation of the data after applying the</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a><span class="sd">            calibration: a float or iterable of floats depending on what was</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a><span class="sd">            passed to the operation.</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a>        <span class="n">param</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a>        <span class="n">param_stdev</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a>        <span class="k">if</span> <span class="n">inverse</span><span class="p">:</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a>            <span class="n">param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_inv</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos">337</span></a>            <span class="n">param_stdev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_inv_stdev</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos">338</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos">339</span></a>            <span class="n">param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos">340</span></a>            <span class="n">param_stdev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_stdev</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos">341</span></a>        <span class="n">cal_data</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos">342</span></a>        <span class="n">cal_stdev</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos">343</span></a>        <span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Iterable</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos">344</span></a>        <span class="kn">from</span> <span class="nn">round_using_error.round_using_error</span> <span class="kn">import</span> <span class="n">numbers_rndwitherr</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos">345</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">):</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos">346</span></a>            <span class="n">cal_data</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos">347</span></a>            <span class="n">cal_stdev</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos">348</span></a>            <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos">349</span></a>            <span class="n">npdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos">350</span></a>            <span class="n">npstdev</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">stdev</span><span class="p">)</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos">351</span></a>            <span class="c1"># calculate the new calibrated values and errors</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos">352</span></a>            <span class="n">npcal_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos">353</span></a>            <span class="n">npcal_stdev</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos">354</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_type</span> <span class="o">==</span> <span class="s1">&#39;polynomial&#39;</span><span class="p">:</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos">355</span></a>                <span class="n">coef_n</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos">356</span></a>                <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">param_stdev</span><span class="p">):</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos">357</span></a>                    <span class="n">npcal_data</span> <span class="o">+=</span> <span class="n">j</span><span class="o">*</span><span class="n">npdata</span><span class="o">**</span><span class="n">coef_n</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos">358</span></a>                    <span class="k">if</span> <span class="n">coef_n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos">359</span></a>                        <span class="n">npcal_stdev</span> <span class="o">+=</span> <span class="mi">0</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos">360</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos">361</span></a>                        <span class="n">npcal_stdev</span> <span class="o">+=</span> <span class="p">(</span><span class="n">coef_n</span><span class="o">*</span><span class="n">j</span><span class="o">*</span><span class="n">npdata</span><span class="o">**</span><span class="p">(</span><span class="n">coef_n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">npstdev</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> \
</span><span id="L-362"><a href="#L-362"><span class="linenos">362</span></a>                                 <span class="p">(</span><span class="n">npdata</span><span class="o">**</span><span class="n">coef_n</span><span class="o">*</span><span class="n">k</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos">363</span></a>                    <span class="n">coef_n</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos">364</span></a>                <span class="n">npcal_stdev</span> <span class="o">=</span> <span class="n">npcal_stdev</span><span class="o">**</span><span class="mf">0.5</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos">365</span></a>                <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">npcal_data</span><span class="p">,</span> <span class="n">npcal_stdev</span><span class="p">):</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos">366</span></a>                    <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="n">numbers_rndwitherr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos">367</span></a>                    <span class="n">cal_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos">368</span></a>                    <span class="n">cal_stdev</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos">369</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos">370</span></a>                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Only polynomial calibration &#39;</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos">371</span></a>                                          <span class="s1">&#39;implemented.&#39;</span><span class="p">)</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos">372</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos">373</span></a>            <span class="c1"># calculate the new calibrated value and error.</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos">374</span></a>            <span class="c1"># each polynomial term contributes x^2*n*u(x)^2 +</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos">375</span></a>            <span class="c1"># n^2*Cn^2*x^(2n-2)*u(Cn)^2 to the square of the uncertainty.</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos">376</span></a>            <span class="n">cal_data</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos">377</span></a>            <span class="n">cal_stdev</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos">378</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_type</span> <span class="o">==</span> <span class="s1">&#39;polynomial&#39;</span><span class="p">:</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos">379</span></a>                <span class="n">coef_n</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos">380</span></a>                <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">param_stdev</span><span class="p">):</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos">381</span></a>                    <span class="n">cal_data</span> <span class="o">+=</span> <span class="n">j</span><span class="o">*</span><span class="n">data</span><span class="o">**</span><span class="n">coef_n</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos">382</span></a>                    <span class="k">if</span> <span class="n">coef_n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos">383</span></a>                        <span class="n">cal_stdev</span> <span class="o">+=</span> <span class="mi">0</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos">384</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos">385</span></a>                        <span class="n">cal_stdev</span> <span class="o">+=</span> <span class="p">(</span><span class="n">coef_n</span><span class="o">*</span><span class="n">j</span><span class="o">*</span><span class="n">data</span><span class="o">**</span><span class="p">(</span><span class="n">coef_n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">stdev</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>\
</span><span id="L-386"><a href="#L-386"><span class="linenos">386</span></a>                                     <span class="o">+</span> <span class="p">(</span><span class="n">data</span><span class="o">**</span><span class="n">coef_n</span><span class="o">*</span><span class="n">k</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos">387</span></a>                    <span class="n">coef_n</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos">388</span></a>                <span class="n">cal_stdev</span> <span class="o">=</span> <span class="n">cal_stdev</span><span class="o">**</span><span class="mf">0.5</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos">389</span></a>                <span class="n">cal_data</span><span class="p">,</span> <span class="n">cal_stdev</span> <span class="o">=</span> <span class="n">numbers_rndwitherr</span><span class="p">(</span><span class="n">cal_data</span><span class="p">,</span> <span class="n">cal_stdev</span><span class="p">)</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos">390</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos">391</span></a>                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Only polynomial calibration &#39;</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos">392</span></a>                                          <span class="s1">&#39;implemented.&#39;</span><span class="p">)</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos">393</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos">394</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Data must be a float or an iterable of floats.&#39;</span><span class="p">)</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos">395</span></a>        <span class="k">return</span> <span class="n">cal_data</span><span class="p">,</span> <span class="n">cal_stdev</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos">396</span></a>
</span><span id="L-397"><a href="#L-397"><span class="linenos">397</span></a>    <span class="k">def</span> <span class="nf">cal_apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">stdev</span><span class="p">):</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos">398</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cal_apply</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">stdev</span><span class="p">)</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos">399</span></a>
</span><span id="L-400"><a href="#L-400"><span class="linenos">400</span></a>    <span class="k">def</span> <span class="nf">cal_inv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">stdev</span><span class="p">):</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos">401</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cal_apply</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">stdev</span><span class="p">,</span> <span class="n">inverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos">402</span></a>
</span><span id="L-403"><a href="#L-403"><span class="linenos">403</span></a><span class="k">class</span> <span class="nc">Calibrations</span><span class="p">:</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos">404</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos">405</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_cal</span><span class="p">(</span><span class="s1">&#39;balance&#39;</span><span class="p">)</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos">406</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">barriers_open</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_cal</span><span class="p">(</span><span class="s1">&#39;barriers_open&#39;</span><span class="p">)</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos">407</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">barriers_close</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_cal</span><span class="p">(</span><span class="s1">&#39;barriers_close&#39;</span><span class="p">)</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos">408</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_cal</span><span class="p">(</span><span class="s1">&#39;temperature&#39;</span><span class="p">)</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos">409</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">speed_open</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_cal</span><span class="p">(</span><span class="s1">&#39;speed_open&#39;</span><span class="p">)</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos">410</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">speed_close</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_cal</span><span class="p">(</span><span class="s1">&#39;speed_close&#39;</span><span class="p">)</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos">411</span></a>
</span><span id="L-412"><a href="#L-412"><span class="linenos">412</span></a>    <span class="k">def</span> <span class="nf">_create_cal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos">413</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Utility function to that returns the latest calibration of type</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos">414</span></a><span class="sd">        name or a default calibration if no actual calibration is found.</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos">415</span></a>
</span><span id="L-416"><a href="#L-416"><span class="linenos">416</span></a><span class="sd">        Parameters</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos">417</span></a><span class="sd">        ----------</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos">418</span></a><span class="sd">        name: str</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos">419</span></a><span class="sd">            string name for the calibration type (current options: &#39;balance&#39;,</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos">420</span></a><span class="sd">            &#39;barriers_open&#39;, &#39;barriers_close&#39;, &#39;speed_open&#39;,</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos">421</span></a><span class="sd">            &#39;speed_close&#39; or &#39;temperature&#39;).</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos">422</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos">423</span></a>        <span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos">424</span></a>        <span class="n">basepath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;~/.Trough/calibrations&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">expanduser</span><span class="p">()</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos">425</span></a>        <span class="n">fullpath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos">426</span></a>        <span class="n">calib</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos">427</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">basepath</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos">428</span></a>            <span class="n">basepath</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos">429</span></a>        <span class="n">filelist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">basepath</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_*.trh.cal.html&#39;</span><span class="p">))</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos">430</span></a>        <span class="n">filelist</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos">431</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filelist</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos">432</span></a>            <span class="n">fullpath</span> <span class="o">=</span> <span class="n">filelist</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos">433</span></a>            <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fullpath</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos">434</span></a>            <span class="n">temphtml</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos">435</span></a>            <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos">436</span></a>            <span class="n">calib</span> <span class="o">=</span> <span class="n">Calibration</span><span class="o">.</span><span class="n">cal_from_html</span><span class="p">(</span><span class="n">temphtml</span><span class="p">)</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos">437</span></a>        <span class="k">if</span> <span class="n">fullpath</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos">438</span></a>            <span class="c1"># we have no calibration so will use a default.</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos">439</span></a>            <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;balance&#39;</span><span class="p">:</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos">440</span></a>                <span class="n">calib</span> <span class="o">=</span> <span class="n">Calibration</span><span class="p">(</span><span class="s1">&#39;balance&#39;</span><span class="p">,</span> <span class="s1">&#39;mg&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.875</span><span class="p">,</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos">441</span></a>                                   <span class="mf">12.5</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.08</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],[],</span> <span class="p">[])</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos">442</span></a>            <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;barriers_open&#39;</span><span class="p">:</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos">443</span></a>                <span class="n">calib</span> <span class="o">=</span> <span class="n">Calibration</span><span class="p">(</span><span class="s1">&#39;barriers_open&#39;</span><span class="p">,</span> <span class="s1">&#39;cm&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos">444</span></a>                                    <span class="p">[</span><span class="mf">2.82464693</span><span class="p">,</span> <span class="mf">6.69130383</span><span class="p">,</span> <span class="mf">15.2853999</span><span class="p">,</span> <span class="o">-</span><span class="mf">21.1208151</span><span class="p">,</span> <span class="mf">8.88980052</span><span class="p">],</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos">445</span></a>                                    <span class="p">[</span><span class="mf">0.00924811</span><span class="p">,</span> <span class="mf">0.14164452</span><span class="p">,</span> <span class="mf">0.62535698</span><span class="p">,</span> <span class="mf">0.96585892</span><span class="p">,</span> <span class="mf">0.47972807</span><span class="p">],</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos">446</span></a>                                    <span class="p">[</span><span class="o">-</span><span class="mf">0.55434678</span><span class="p">,</span> <span class="mf">0.28071635</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.03813755</span><span class="p">,</span> <span class="mf">0.00318368</span><span class="p">,</span> <span class="o">-</span><span class="mf">9.0986e-05</span><span class="p">],</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos">447</span></a>                                    <span class="p">[</span><span class="mf">0.01263813</span><span class="p">,</span> <span class="mf">0.00817224</span><span class="p">,</span> <span class="mf">0.00180902</span><span class="p">,</span> <span class="mf">1.6526e-04</span><span class="p">,</span> <span class="mf">5.3290e-06</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[],</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos">448</span></a>                                    <span class="n">additional_data</span><span class="o">=</span><span class="p">{</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos">449</span></a>                                    <span class="s2">&quot;trough width (cm)&quot;</span><span class="p">:</span><span class="mf">9.525</span><span class="p">,</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos">450</span></a>                                    <span class="s2">&quot;skimmer correction (cm^2)&quot;</span><span class="p">:</span><span class="o">-</span><span class="mf">0.5</span><span class="p">})</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos">451</span></a>            <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;barriers_close&#39;</span><span class="p">:</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos">452</span></a>                <span class="n">calib</span> <span class="o">=</span> <span class="n">Calibration</span><span class="p">(</span><span class="s1">&#39;barriers_close&#39;</span><span class="p">,</span> <span class="s1">&#39;cm&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos">453</span></a>                                    <span class="p">[</span><span class="mf">2.83251612</span><span class="p">,</span> <span class="mf">8.41377796</span><span class="p">,</span> <span class="mf">8.14408400</span><span class="p">,</span> <span class="o">-</span><span class="mf">10.8669094</span><span class="p">,</span> <span class="mf">4.00818630</span><span class="p">],</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos">454</span></a>                                    <span class="p">[</span><span class="mf">0.00971215</span><span class="p">,</span> <span class="mf">0.19059196</span><span class="p">,</span> <span class="mf">0.94421041</span><span class="p">,</span> <span class="mf">1.52692244</span><span class="p">,</span> <span class="mf">0.78492412</span><span class="p">],</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos">455</span></a>                                    <span class="p">[</span><span class="o">-</span><span class="mf">0.39502418</span><span class="p">,</span> <span class="mf">0.17268411</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.01457292</span><span class="p">,</span> <span class="mf">0.00106258</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.3141e-05</span><span class="p">],</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos">456</span></a>                                    <span class="p">[</span><span class="mf">0.01786868</span><span class="p">,</span> <span class="mf">0.01221316</span><span class="p">,</span> <span class="mf">0.00278932</span><span class="p">,</span> <span class="mf">2.6067e-04</span><span class="p">,</span> <span class="mf">8.5808e-06</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[],</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos">457</span></a>                                    <span class="n">additional_data</span><span class="o">=</span><span class="p">{</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos">458</span></a>                                    <span class="s2">&quot;trough width (cm)&quot;</span><span class="p">:</span> <span class="mf">9.525</span><span class="p">,</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos">459</span></a>                                    <span class="s2">&quot;skimmer correction (cm^2)&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">})</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos">460</span></a>            <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;temperature&#39;</span><span class="p">:</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos">461</span></a>                <span class="n">calib</span> <span class="o">=</span> <span class="n">Calibration</span><span class="p">(</span><span class="s1">&#39;temperature&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.083</span><span class="p">,</span> <span class="mf">6.555</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos">462</span></a>                                    <span class="p">[</span><span class="mf">0.9521</span><span class="p">,</span> <span class="mf">0.14786</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[])</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos">463</span></a>            <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;speed_open&#39;</span><span class="p">:</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos">464</span></a>                <span class="n">calib</span> <span class="o">=</span> <span class="n">Calibration</span><span class="p">(</span><span class="s1">&#39;speed_open&#39;</span><span class="p">,</span> <span class="s1">&#39;cm/min&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">9.85</span><span class="p">],</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos">465</span></a>                                    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.1015</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[])</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos">466</span></a>            <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;speed_close&#39;</span><span class="p">:</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos">467</span></a>                <span class="n">calib</span> <span class="o">=</span> <span class="n">Calibration</span><span class="p">(</span><span class="s1">&#39;speed_close&#39;</span><span class="p">,</span> <span class="s1">&#39;cm/min&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">6.57</span><span class="p">],</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos">468</span></a>                                    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.1523</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[])</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos">469</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos">470</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Valid names are &quot;balance&quot;, &quot;barriers_open&quot;, &#39;</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos">471</span></a>                                 <span class="s1">&#39;&quot;barriers_close&quot;, &quot;temperature&quot;, &quot;speed_open&quot;&#39;</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos">472</span></a>                                 <span class="s1">&#39;, or &quot;speed_close&quot;.&#39;</span><span class="p">)</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos">473</span></a>        <span class="k">return</span> <span class="n">calib</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos">474</span></a>
</span><span id="L-475"><a href="#L-475"><span class="linenos">475</span></a>    <span class="k">def</span> <span class="nf">read_cal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos">476</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;This routine reads in a calibration file. If it is the standard</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos">477</span></a><span class="sd">        html file it uses `calibration.cal_from_html()` operation to convert</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos">478</span></a><span class="sd">        it to a calibration.</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos">479</span></a>
</span><span id="L-480"><a href="#L-480"><span class="linenos">480</span></a><span class="sd">        Parameters</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos">481</span></a><span class="sd">        ----------</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos">482</span></a><span class="sd">        name: str</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos">483</span></a><span class="sd">            either the basename (current options: &#39;balance&#39;, &#39;barriers_open&#39;,</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos">484</span></a><span class="sd">             &#39;barriers_close&#39;, &#39;speed_open&#39;, &#39;speed_close&#39; or</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos">485</span></a><span class="sd">            &#39;temperature&#39;) or a string representation of the path to the</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos">486</span></a><span class="sd">            calibration file to be read. If one of the basenames is used</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos">487</span></a><span class="sd">            this code will look for the most recent calibration of that type</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos">488</span></a><span class="sd">            in the directory &#39;~\.Trough\calibrations&#39;.</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos">489</span></a>
</span><span id="L-490"><a href="#L-490"><span class="linenos">490</span></a><span class="sd">        Returns</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos">491</span></a><span class="sd">        -------</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos">492</span></a><span class="sd">        Calibration</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos">493</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos">494</span></a>        <span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos">495</span></a>        <span class="n">temppath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos">496</span></a>        <span class="n">path_parent</span> <span class="o">=</span> <span class="n">temppath</span><span class="o">.</span><span class="n">parent</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos">497</span></a>        <span class="n">path_suffixes</span> <span class="o">=</span> <span class="n">temppath</span><span class="o">.</span><span class="n">suffixes</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos">498</span></a>        <span class="n">fullpath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">()</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos">499</span></a>        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">path_parent</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;.&#39;</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">path_suffixes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos">500</span></a>            <span class="n">basepath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;~/.Trough/calibrations&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">expanduser</span><span class="p">()</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos">501</span></a>            <span class="n">filelist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">basepath</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">name</span><span class="o">+</span><span class="s1">&#39;_*.trh.cal.html&#39;</span><span class="p">))</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos">502</span></a>            <span class="n">filelist</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos">503</span></a>            <span class="n">fullpath</span> <span class="o">=</span> <span class="n">filelist</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos">504</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos">505</span></a>            <span class="n">fullpath</span> <span class="o">=</span> <span class="n">temppath</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos">506</span></a>        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fullpath</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos">507</span></a>        <span class="n">tempdoc</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos">508</span></a>        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos">509</span></a>        <span class="k">return</span> <span class="n">Calibration</span><span class="o">.</span><span class="n">cal_from_html</span><span class="p">(</span><span class="n">tempdoc</span><span class="p">)</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos">510</span></a>
</span><span id="L-511"><a href="#L-511"><span class="linenos">511</span></a>    <span class="k">def</span> <span class="nf">write_cal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dirpath</span><span class="p">,</span> <span class="n">cal</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos">512</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos">513</span></a><span class="sd">        Writes a calibration file with the base filename `cal.name + int(</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos">514</span></a><span class="sd">        cal.timestamp)` into the directory specified. Currently only produces</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos">515</span></a><span class="sd">        an html file that is also human-readable. Other file formats may be</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos">516</span></a><span class="sd">        available in the future through the use of key word arguments.</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos">517</span></a>
</span><span id="L-518"><a href="#L-518"><span class="linenos">518</span></a><span class="sd">        Parameters</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos">519</span></a><span class="sd">        ----------</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos">520</span></a><span class="sd">        dirpath:</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos">521</span></a><span class="sd">            pathlike object or string</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos">522</span></a>
</span><span id="L-523"><a href="#L-523"><span class="linenos">523</span></a><span class="sd">        cal: Calibration</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos">524</span></a><span class="sd">            a calibration object containing the information about the</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos">525</span></a><span class="sd">            calibration to write to the file.</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos">526</span></a>
</span><span id="L-527"><a href="#L-527"><span class="linenos">527</span></a><span class="sd">        kwargs:</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos">528</span></a><span class="sd">            optional key word arguments for future adaptability</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos">529</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos">530</span></a>        <span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos">531</span></a>        <span class="n">fileext</span> <span class="o">=</span> <span class="s1">&#39;.trh.cal.html&#39;</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos">532</span></a>        <span class="n">filename</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">cal</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">cal</span><span class="o">.</span><span class="n">timestamp</span><span class="p">))</span><span class="o">+</span><span class="n">fileext</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos">533</span></a>        <span class="n">fullpath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">dirpath</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos">534</span></a>        <span class="n">svhtml</span> <span class="o">=</span> <span class="s1">&#39;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;body&gt;&#39;</span> <span class="o">+</span> <span class="n">cal</span><span class="o">.</span><span class="n">cal_to_html</span><span class="p">()</span> <span class="o">+</span> \
</span><span id="L-535"><a href="#L-535"><span class="linenos">535</span></a>                 <span class="s1">&#39;&lt;/body&gt;&lt;/html&gt;&#39;</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos">536</span></a>        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fullpath</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos">537</span></a>        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">svhtml</span><span class="p">)</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos">538</span></a>        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos">539</span></a>        <span class="k">pass</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos">540</span></a>
</span><span id="L-541"><a href="#L-541"><span class="linenos">541</span></a>    <span class="k">def</span> <span class="nf">poly_fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_x</span><span class="p">,</span> <span class="n">data_y</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">yerr</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos">542</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Does a polynomial fit of the specified order using the x and y</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos">543</span></a><span class="sd">        values provided.</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos">544</span></a>
</span><span id="L-545"><a href="#L-545"><span class="linenos">545</span></a><span class="sd">        Parameters</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos">546</span></a><span class="sd">        ----------</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos">547</span></a><span class="sd">        data_x: list</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos">548</span></a><span class="sd">            of numerical x values.</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos">549</span></a>
</span><span id="L-550"><a href="#L-550"><span class="linenos">550</span></a><span class="sd">        data_y: list</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos">551</span></a><span class="sd">            of numerical y values.</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos">552</span></a>
</span><span id="L-553"><a href="#L-553"><span class="linenos">553</span></a><span class="sd">        order: int</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos">554</span></a><span class="sd">            the order of the polynomical used for fitting.</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos">555</span></a>
</span><span id="L-556"><a href="#L-556"><span class="linenos">556</span></a><span class="sd">        yerr: float or iterable of float</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos">557</span></a><span class="sd">            absolute error(s) in the y-value. Used to weight the fit. If no</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos">558</span></a><span class="sd">            values are provided the assumption is equal weighting.</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos">559</span></a>
</span><span id="L-560"><a href="#L-560"><span class="linenos">560</span></a><span class="sd">        Returns</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos">561</span></a><span class="sd">        -------</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos">562</span></a><span class="sd">        param: list</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos">563</span></a><span class="sd">            of fitted parameters.</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos">564</span></a>
</span><span id="L-565"><a href="#L-565"><span class="linenos">565</span></a><span class="sd">        param_stdev: list</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos">566</span></a><span class="sd">            of estimated standard deviation in the parameters.</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos">567</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos">568</span></a>        <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos">569</span></a>        <span class="kn">import</span> <span class="nn">lmfit</span> <span class="k">as</span> <span class="nn">lmfit</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos">570</span></a>        <span class="kn">from</span> <span class="nn">round_using_error.round_using_error</span> <span class="kn">import</span> <span class="n">numbers_rndwitherr</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos">571</span></a>
</span><span id="L-572"><a href="#L-572"><span class="linenos">572</span></a>        <span class="c1"># Define the fit model, initial guesses, and constraints</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos">573</span></a>        <span class="n">fitmod</span> <span class="o">=</span> <span class="n">lmfit</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">PolynomialModel</span><span class="p">(</span><span class="n">degree</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos">574</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos">575</span></a>            <span class="n">fitmod</span><span class="o">.</span><span class="n">set_param_hint</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">),</span> <span class="n">vary</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos">576</span></a>
</span><span id="L-577"><a href="#L-577"><span class="linenos">577</span></a>        <span class="c1"># Set the weighting if errors provided</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos">578</span></a>        <span class="n">weighting</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos">579</span></a>        <span class="k">if</span> <span class="n">yerr</span><span class="p">:</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos">580</span></a>            <span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Iterable</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos">581</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">yerr</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">):</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos">582</span></a>                <span class="n">weighting</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">yerr</span><span class="p">)</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos">583</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos">584</span></a>                <span class="n">weighting</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data_y</span><span class="p">)</span><span class="o">*</span><span class="mi">0</span> <span class="o">+</span> <span class="mi">1</span><span class="o">/</span><span class="n">yerr</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos">585</span></a>
</span><span id="L-586"><a href="#L-586"><span class="linenos">586</span></a>        <span class="c1"># Do fit</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos">587</span></a>        <span class="n">fit</span> <span class="o">=</span> <span class="n">fitmod</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data_y</span><span class="p">),</span> <span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data_x</span><span class="p">),</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos">588</span></a>                         <span class="n">weights</span><span class="o">=</span><span class="n">weighting</span><span class="p">,</span> <span class="n">scale_covar</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos">589</span></a>                         <span class="n">nan_policy</span><span class="o">=</span><span class="s2">&quot;omit&quot;</span><span class="p">)</span>
</span><span id="L-590"><a href="#L-590"><span class="linenos">590</span></a>        <span class="n">param</span> <span class="o">=</span> <span class="p">(</span><span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos">591</span></a>        <span class="n">param_stdev</span> <span class="o">=</span> <span class="p">(</span><span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos">592</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">fit</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos">593</span></a>            <span class="n">pwr</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">:])</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos">594</span></a>            <span class="k">if</span> <span class="n">pwr</span> <span class="o">&lt;=</span> <span class="n">order</span><span class="p">:</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos">595</span></a>                <span class="n">rounded</span> <span class="o">=</span> <span class="n">numbers_rndwitherr</span><span class="p">(</span><span class="n">fit</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos">596</span></a>                                             <span class="n">fit</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos">597</span></a>                <span class="n">param</span><span class="p">[</span><span class="n">pwr</span><span class="p">]</span> <span class="o">=</span> <span class="n">rounded</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos">598</span></a>                <span class="n">param_stdev</span><span class="p">[</span><span class="n">pwr</span><span class="p">]</span> <span class="o">=</span> <span class="n">rounded</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos">599</span></a>        <span class="k">return</span> <span class="n">param</span><span class="p">,</span> <span class="n">param_stdev</span>
</span></pre></div>


            </section>
                <section id="Calibration">
                            <input id="Calibration-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Calibration</span>:

                <label class="view-source-button" for="Calibration-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Calibration"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Calibration-10"><a href="#Calibration-10"><span class="linenos"> 10</span></a><span class="k">class</span> <span class="nc">Calibration</span><span class="p">:</span>
</span><span id="Calibration-11"><a href="#Calibration-11"><span class="linenos"> 11</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">units</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">param_stdev</span><span class="p">,</span>
</span><span id="Calibration-12"><a href="#Calibration-12"><span class="linenos"> 12</span></a>                 <span class="n">param_inv</span><span class="p">,</span> <span class="n">param_inv_stdev</span><span class="p">,</span>
</span><span id="Calibration-13"><a href="#Calibration-13"><span class="linenos"> 13</span></a>                 <span class="n">cal_data_x</span><span class="p">,</span> <span class="n">cal_data_y</span><span class="p">,</span> <span class="n">fit_type</span><span class="o">=</span><span class="s2">&quot;polynomial&quot;</span><span class="p">,</span>
</span><span id="Calibration-14"><a href="#Calibration-14"><span class="linenos"> 14</span></a>                 <span class="n">fit_eqn_str</span><span class="o">=</span><span class="s2">&quot;y = C0 + C1*x + C2*x*x + C3*x*x*x + ...&quot;</span><span class="p">,</span>
</span><span id="Calibration-15"><a href="#Calibration-15"><span class="linenos"> 15</span></a>                 <span class="n">fit_ceof_lbls</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;C0&quot;</span><span class="p">,</span> <span class="s2">&quot;C1&quot;</span><span class="p">,</span> <span class="s2">&quot;C2&quot;</span><span class="p">,</span> <span class="s2">&quot;C3&quot;</span><span class="p">,</span> <span class="s2">&quot;C4&quot;</span><span class="p">,</span> <span class="s2">&quot;C5&quot;</span><span class="p">,</span> <span class="s2">&quot;C6&quot;</span><span class="p">,</span>
</span><span id="Calibration-16"><a href="#Calibration-16"><span class="linenos"> 16</span></a>                                  <span class="s2">&quot;C7&quot;</span><span class="p">],</span> <span class="n">additional_data</span> <span class="o">=</span> <span class="p">{}):</span>
</span><span id="Calibration-17"><a href="#Calibration-17"><span class="linenos"> 17</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Calibration-18"><a href="#Calibration-18"><span class="linenos"> 18</span></a><span class="sd">        Defines a calibration of type `name`.</span>
</span><span id="Calibration-19"><a href="#Calibration-19"><span class="linenos"> 19</span></a><span class="sd">        Parameters</span>
</span><span id="Calibration-20"><a href="#Calibration-20"><span class="linenos"> 20</span></a><span class="sd">        ----------</span>
</span><span id="Calibration-21"><a href="#Calibration-21"><span class="linenos"> 21</span></a><span class="sd">        name: str</span>
</span><span id="Calibration-22"><a href="#Calibration-22"><span class="linenos"> 22</span></a><span class="sd">            calibration name.</span>
</span><span id="Calibration-23"><a href="#Calibration-23"><span class="linenos"> 23</span></a>
</span><span id="Calibration-24"><a href="#Calibration-24"><span class="linenos"> 24</span></a><span class="sd">        units: str</span>
</span><span id="Calibration-25"><a href="#Calibration-25"><span class="linenos"> 25</span></a><span class="sd">            string representation of the units the calibration yields.</span>
</span><span id="Calibration-26"><a href="#Calibration-26"><span class="linenos"> 26</span></a>
</span><span id="Calibration-27"><a href="#Calibration-27"><span class="linenos"> 27</span></a><span class="sd">        timestamp: float</span>
</span><span id="Calibration-28"><a href="#Calibration-28"><span class="linenos"> 28</span></a><span class="sd">            Unix floating point timestamp.</span>
</span><span id="Calibration-29"><a href="#Calibration-29"><span class="linenos"> 29</span></a>
</span><span id="Calibration-30"><a href="#Calibration-30"><span class="linenos"> 30</span></a><span class="sd">        param:list</span>
</span><span id="Calibration-31"><a href="#Calibration-31"><span class="linenos"> 31</span></a><span class="sd">            list of the numerical parameters for the fit yielding the</span>
</span><span id="Calibration-32"><a href="#Calibration-32"><span class="linenos"> 32</span></a><span class="sd">            calibration.</span>
</span><span id="Calibration-33"><a href="#Calibration-33"><span class="linenos"> 33</span></a>
</span><span id="Calibration-34"><a href="#Calibration-34"><span class="linenos"> 34</span></a><span class="sd">        param_stdev: list</span>
</span><span id="Calibration-35"><a href="#Calibration-35"><span class="linenos"> 35</span></a><span class="sd">            list of the numerical values for the estimated standard</span>
</span><span id="Calibration-36"><a href="#Calibration-36"><span class="linenos"> 36</span></a><span class="sd">            deviation of the parameters from the fit.</span>
</span><span id="Calibration-37"><a href="#Calibration-37"><span class="linenos"> 37</span></a><span class="sd">        param_inv: list</span>
</span><span id="Calibration-38"><a href="#Calibration-38"><span class="linenos"> 38</span></a><span class="sd">            list of the numerical values for the fit (or equation) yielding the</span>
</span><span id="Calibration-39"><a href="#Calibration-39"><span class="linenos"> 39</span></a><span class="sd">            inverse of the calibration (return to the raw value).</span>
</span><span id="Calibration-40"><a href="#Calibration-40"><span class="linenos"> 40</span></a><span class="sd">        param_inv_stdev: list</span>
</span><span id="Calibration-41"><a href="#Calibration-41"><span class="linenos"> 41</span></a><span class="sd">            list of the numerical values for the estimated standard deviation of</span>
</span><span id="Calibration-42"><a href="#Calibration-42"><span class="linenos"> 42</span></a><span class="sd">            the parameters for the inversion.</span>
</span><span id="Calibration-43"><a href="#Calibration-43"><span class="linenos"> 43</span></a><span class="sd">        cal_data_x: list</span>
</span><span id="Calibration-44"><a href="#Calibration-44"><span class="linenos"> 44</span></a><span class="sd">            x-data used for the calibration fit.</span>
</span><span id="Calibration-45"><a href="#Calibration-45"><span class="linenos"> 45</span></a>
</span><span id="Calibration-46"><a href="#Calibration-46"><span class="linenos"> 46</span></a><span class="sd">        cal_data_y: list</span>
</span><span id="Calibration-47"><a href="#Calibration-47"><span class="linenos"> 47</span></a><span class="sd">            y-data used for the calibration fit.</span>
</span><span id="Calibration-48"><a href="#Calibration-48"><span class="linenos"> 48</span></a>
</span><span id="Calibration-49"><a href="#Calibration-49"><span class="linenos"> 49</span></a><span class="sd">        fit_type: str</span>
</span><span id="Calibration-50"><a href="#Calibration-50"><span class="linenos"> 50</span></a><span class="sd">            string name for the fit type. Defaults to &quot;polynomial&quot;</span>
</span><span id="Calibration-51"><a href="#Calibration-51"><span class="linenos"> 51</span></a>
</span><span id="Calibration-52"><a href="#Calibration-52"><span class="linenos"> 52</span></a><span class="sd">        fit_eqn_str: str</span>
</span><span id="Calibration-53"><a href="#Calibration-53"><span class="linenos"> 53</span></a><span class="sd">            string representation of the fit equation. Defaults to</span>
</span><span id="Calibration-54"><a href="#Calibration-54"><span class="linenos"> 54</span></a><span class="sd">            &quot;y = C0 + C1*x + C2*x*x + C3*x*x*x + ...&quot;</span>
</span><span id="Calibration-55"><a href="#Calibration-55"><span class="linenos"> 55</span></a>
</span><span id="Calibration-56"><a href="#Calibration-56"><span class="linenos"> 56</span></a><span class="sd">        fit_ceof_lbls: list</span>
</span><span id="Calibration-57"><a href="#Calibration-57"><span class="linenos"> 57</span></a><span class="sd">            list of string labels for the coefficients, which should</span>
</span><span id="Calibration-58"><a href="#Calibration-58"><span class="linenos"> 58</span></a><span class="sd">            correlate to symbols in the fit_eqn_str. Defaults to [&quot;C0&quot;, &quot;C1&quot;,</span>
</span><span id="Calibration-59"><a href="#Calibration-59"><span class="linenos"> 59</span></a><span class="sd">            ...]. Automatically, truncated to the actual number of</span>
</span><span id="Calibration-60"><a href="#Calibration-60"><span class="linenos"> 60</span></a><span class="sd">            coefficients determined by the order of the polynomial.</span>
</span><span id="Calibration-61"><a href="#Calibration-61"><span class="linenos"> 61</span></a>
</span><span id="Calibration-62"><a href="#Calibration-62"><span class="linenos"> 62</span></a><span class="sd">        additional_data:dict</span>
</span><span id="Calibration-63"><a href="#Calibration-63"><span class="linenos"> 63</span></a><span class="sd">            a dictionary of key:value pairs where the keys are a short</span>
</span><span id="Calibration-64"><a href="#Calibration-64"><span class="linenos"> 64</span></a><span class="sd">            descriptive string. They can contain any additional data</span>
</span><span id="Calibration-65"><a href="#Calibration-65"><span class="linenos"> 65</span></a><span class="sd">            necessary for doing calculations on the data.</span>
</span><span id="Calibration-66"><a href="#Calibration-66"><span class="linenos"> 66</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Calibration-67"><a href="#Calibration-67"><span class="linenos"> 67</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="Calibration-68"><a href="#Calibration-68"><span class="linenos"> 68</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="n">units</span>
</span><span id="Calibration-69"><a href="#Calibration-69"><span class="linenos"> 69</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="n">timestamp</span>
</span><span id="Calibration-70"><a href="#Calibration-70"><span class="linenos"> 70</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">param</span> <span class="o">=</span> <span class="n">param</span>
</span><span id="Calibration-71"><a href="#Calibration-71"><span class="linenos"> 71</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">param_stdev</span> <span class="o">=</span> <span class="n">param_stdev</span>
</span><span id="Calibration-72"><a href="#Calibration-72"><span class="linenos"> 72</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">param_inv</span> <span class="o">=</span> <span class="n">param_inv</span>
</span><span id="Calibration-73"><a href="#Calibration-73"><span class="linenos"> 73</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">param_inv_stdev</span>  <span class="o">=</span> <span class="n">param_inv_stdev</span>
</span><span id="Calibration-74"><a href="#Calibration-74"><span class="linenos"> 74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cal_data_x</span> <span class="o">=</span> <span class="n">cal_data_x</span>
</span><span id="Calibration-75"><a href="#Calibration-75"><span class="linenos"> 75</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cal_data_y</span> <span class="o">=</span> <span class="n">cal_data_y</span>
</span><span id="Calibration-76"><a href="#Calibration-76"><span class="linenos"> 76</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fit_type</span> <span class="o">=</span> <span class="n">fit_type</span>
</span><span id="Calibration-77"><a href="#Calibration-77"><span class="linenos"> 77</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fit_eqn_str</span> <span class="o">=</span> <span class="n">fit_eqn_str</span>
</span><span id="Calibration-78"><a href="#Calibration-78"><span class="linenos"> 78</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fit_coef_lbls</span> <span class="o">=</span> <span class="n">fit_ceof_lbls</span>
</span><span id="Calibration-79"><a href="#Calibration-79"><span class="linenos"> 79</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_type</span> <span class="o">==</span> <span class="s2">&quot;polynomial&quot;</span> <span class="ow">and</span>\
</span><span id="Calibration-80"><a href="#Calibration-80"><span class="linenos"> 80</span></a>                <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fit_coef_lbls</span><span class="p">):</span>
</span><span id="Calibration-81"><a href="#Calibration-81"><span class="linenos"> 81</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fit_coef_lbls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_coef_lbls</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">)]</span>
</span><span id="Calibration-82"><a href="#Calibration-82"><span class="linenos"> 82</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">additional_data</span> <span class="o">=</span> <span class="n">additional_data</span>
</span><span id="Calibration-83"><a href="#Calibration-83"><span class="linenos"> 83</span></a>
</span><span id="Calibration-84"><a href="#Calibration-84"><span class="linenos"> 84</span></a>    <span class="nd">@classmethod</span>
</span><span id="Calibration-85"><a href="#Calibration-85"><span class="linenos"> 85</span></a>    <span class="k">def</span> <span class="nf">cal_from_html</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">html</span><span class="p">):</span>
</span><span id="Calibration-86"><a href="#Calibration-86"><span class="linenos"> 86</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;This takes in an html str, parses it and returns a new</span>
</span><span id="Calibration-87"><a href="#Calibration-87"><span class="linenos"> 87</span></a><span class="sd">        calibration.</span>
</span><span id="Calibration-88"><a href="#Calibration-88"><span class="linenos"> 88</span></a>
</span><span id="Calibration-89"><a href="#Calibration-89"><span class="linenos"> 89</span></a><span class="sd">        Parameters</span>
</span><span id="Calibration-90"><a href="#Calibration-90"><span class="linenos"> 90</span></a><span class="sd">        ----------</span>
</span><span id="Calibration-91"><a href="#Calibration-91"><span class="linenos"> 91</span></a><span class="sd">        html: str</span>
</span><span id="Calibration-92"><a href="#Calibration-92"><span class="linenos"> 92</span></a><span class="sd">            The html to be parsed to create the calibration object</span>
</span><span id="Calibration-93"><a href="#Calibration-93"><span class="linenos"> 93</span></a>
</span><span id="Calibration-94"><a href="#Calibration-94"><span class="linenos"> 94</span></a><span class="sd">        Returns</span>
</span><span id="Calibration-95"><a href="#Calibration-95"><span class="linenos"> 95</span></a><span class="sd">        -------</span>
</span><span id="Calibration-96"><a href="#Calibration-96"><span class="linenos"> 96</span></a><span class="sd">        calibration: calibration</span>
</span><span id="Calibration-97"><a href="#Calibration-97"><span class="linenos"> 97</span></a><span class="sd">            a calibration object.</span>
</span><span id="Calibration-98"><a href="#Calibration-98"><span class="linenos"> 98</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Calibration-99"><a href="#Calibration-99"><span class="linenos"> 99</span></a>        <span class="kn">from</span> <span class="nn">AdvancedHTMLParser</span> <span class="kn">import</span> <span class="n">AdvancedHTMLParser</span> <span class="k">as</span> <span class="n">Parser</span>
</span><span id="Calibration-100"><a href="#Calibration-100"><span class="linenos">100</span></a>
</span><span id="Calibration-101"><a href="#Calibration-101"><span class="linenos">101</span></a>        <span class="n">document</span> <span class="o">=</span> <span class="n">Parser</span><span class="p">()</span>
</span><span id="Calibration-102"><a href="#Calibration-102"><span class="linenos">102</span></a>        <span class="n">document</span><span class="o">.</span><span class="n">parseStr</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</span><span id="Calibration-103"><a href="#Calibration-103"><span class="linenos">103</span></a>        <span class="n">name</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</span><span id="Calibration-104"><a href="#Calibration-104"><span class="linenos">104</span></a>        <span class="n">units</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;units&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</span><span id="Calibration-105"><a href="#Calibration-105"><span class="linenos">105</span></a>        <span class="n">fit_type</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;fit_type&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</span><span id="Calibration-106"><a href="#Calibration-106"><span class="linenos">106</span></a>        <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;timestamp&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</span><span id="Calibration-107"><a href="#Calibration-107"><span class="linenos">107</span></a>        <span class="n">fit_eqn_str</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;fit_eqn_str&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</span><span id="Calibration-108"><a href="#Calibration-108"><span class="linenos">108</span></a>        <span class="n">coef_lbl_el</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;coef_labels&#39;</span><span class="p">)</span>
</span><span id="Calibration-109"><a href="#Calibration-109"><span class="linenos">109</span></a>        <span class="n">coef_lbls</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Calibration-110"><a href="#Calibration-110"><span class="linenos">110</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">coef_lbl_el</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
</span><span id="Calibration-111"><a href="#Calibration-111"><span class="linenos">111</span></a>            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="Calibration-112"><a href="#Calibration-112"><span class="linenos">112</span></a>                <span class="n">coef_lbls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</span><span id="Calibration-113"><a href="#Calibration-113"><span class="linenos">113</span></a>        <span class="n">coef_el</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;coefficients&#39;</span><span class="p">)</span>
</span><span id="Calibration-114"><a href="#Calibration-114"><span class="linenos">114</span></a>        <span class="n">coef_val</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Calibration-115"><a href="#Calibration-115"><span class="linenos">115</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">coef_el</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
</span><span id="Calibration-116"><a href="#Calibration-116"><span class="linenos">116</span></a>            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="Calibration-117"><a href="#Calibration-117"><span class="linenos">117</span></a>                <span class="n">coef_val</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</span><span id="Calibration-118"><a href="#Calibration-118"><span class="linenos">118</span></a>        <span class="n">stdev_el</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;stdev&#39;</span><span class="p">)</span>
</span><span id="Calibration-119"><a href="#Calibration-119"><span class="linenos">119</span></a>        <span class="n">coef_stdev</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Calibration-120"><a href="#Calibration-120"><span class="linenos">120</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">stdev_el</span><span class="p">:</span>
</span><span id="Calibration-121"><a href="#Calibration-121"><span class="linenos">121</span></a>            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="Calibration-122"><a href="#Calibration-122"><span class="linenos">122</span></a>                <span class="n">coef_stdev</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</span><span id="Calibration-123"><a href="#Calibration-123"><span class="linenos">123</span></a>        <span class="n">inv_coef_el</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;inv_coefficients&#39;</span><span class="p">)</span>
</span><span id="Calibration-124"><a href="#Calibration-124"><span class="linenos">124</span></a>        <span class="n">inv_coef_val</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Calibration-125"><a href="#Calibration-125"><span class="linenos">125</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">inv_coef_el</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
</span><span id="Calibration-126"><a href="#Calibration-126"><span class="linenos">126</span></a>            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="Calibration-127"><a href="#Calibration-127"><span class="linenos">127</span></a>                <span class="n">inv_coef_val</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</span><span id="Calibration-128"><a href="#Calibration-128"><span class="linenos">128</span></a>        <span class="n">inv_stdev_el</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;inv_stdev&#39;</span><span class="p">)</span>
</span><span id="Calibration-129"><a href="#Calibration-129"><span class="linenos">129</span></a>        <span class="n">inv_coef_stdev</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Calibration-130"><a href="#Calibration-130"><span class="linenos">130</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">inv_stdev_el</span><span class="p">:</span>
</span><span id="Calibration-131"><a href="#Calibration-131"><span class="linenos">131</span></a>            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="Calibration-132"><a href="#Calibration-132"><span class="linenos">132</span></a>                <span class="n">inv_coef_stdev</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</span><span id="Calibration-133"><a href="#Calibration-133"><span class="linenos">133</span></a>        <span class="n">cal_el</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;calibration_data&#39;</span><span class="p">)</span>
</span><span id="Calibration-134"><a href="#Calibration-134"><span class="linenos">134</span></a>        <span class="n">cal_x</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Calibration-135"><a href="#Calibration-135"><span class="linenos">135</span></a>        <span class="n">cal_y</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Calibration-136"><a href="#Calibration-136"><span class="linenos">136</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">cal_el</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;cal_data_x&#39;</span><span class="p">):</span>
</span><span id="Calibration-137"><a href="#Calibration-137"><span class="linenos">137</span></a>            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="Calibration-138"><a href="#Calibration-138"><span class="linenos">138</span></a>                <span class="n">cal_x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</span><span id="Calibration-139"><a href="#Calibration-139"><span class="linenos">139</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">cal_el</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;cal_data_y&#39;</span><span class="p">):</span>
</span><span id="Calibration-140"><a href="#Calibration-140"><span class="linenos">140</span></a>            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="Calibration-141"><a href="#Calibration-141"><span class="linenos">141</span></a>                <span class="n">cal_y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</span><span id="Calibration-142"><a href="#Calibration-142"><span class="linenos">142</span></a>        <span class="n">cal_el</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;additional_data&#39;</span><span class="p">)</span>
</span><span id="Calibration-143"><a href="#Calibration-143"><span class="linenos">143</span></a>        <span class="n">add_data</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Calibration-144"><a href="#Calibration-144"><span class="linenos">144</span></a>        <span class="k">if</span> <span class="n">cal_el</span><span class="p">:</span>
</span><span id="Calibration-145"><a href="#Calibration-145"><span class="linenos">145</span></a>            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">cal_el</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;additional_data_keys&#39;</span><span class="p">),</span>
</span><span id="Calibration-146"><a href="#Calibration-146"><span class="linenos">146</span></a>                <span class="n">cal_el</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;additional_data_values&#39;</span><span class="p">)):</span>
</span><span id="Calibration-147"><a href="#Calibration-147"><span class="linenos">147</span></a>                <span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="Calibration-148"><a href="#Calibration-148"><span class="linenos">148</span></a>                <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Calibration-149"><a href="#Calibration-149"><span class="linenos">149</span></a>                <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="Calibration-150"><a href="#Calibration-150"><span class="linenos">150</span></a>                    <span class="n">key</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</span><span id="Calibration-151"><a href="#Calibration-151"><span class="linenos">151</span></a>                <span class="k">if</span> <span class="n">j</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="Calibration-152"><a href="#Calibration-152"><span class="linenos">152</span></a>                    <span class="n">value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</span><span id="Calibration-153"><a href="#Calibration-153"><span class="linenos">153</span></a>                <span class="n">add_data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Calibration-154"><a href="#Calibration-154"><span class="linenos">154</span></a>        <span class="k">return</span> <span class="n">Calibration</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">units</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">coef_val</span><span class="p">,</span> <span class="n">coef_stdev</span><span class="p">,</span>
</span><span id="Calibration-155"><a href="#Calibration-155"><span class="linenos">155</span></a>                           <span class="n">inv_coef_val</span><span class="p">,</span> <span class="n">inv_coef_stdev</span><span class="p">,</span>
</span><span id="Calibration-156"><a href="#Calibration-156"><span class="linenos">156</span></a>                 <span class="n">cal_x</span><span class="p">,</span> <span class="n">cal_y</span><span class="p">,</span> <span class="n">fit_type</span><span class="o">=</span><span class="n">fit_type</span><span class="p">,</span> <span class="n">fit_eqn_str</span><span class="o">=</span><span class="n">fit_eqn_str</span><span class="p">,</span>
</span><span id="Calibration-157"><a href="#Calibration-157"><span class="linenos">157</span></a>                           <span class="n">fit_ceof_lbls</span><span class="o">=</span><span class="n">coef_lbls</span><span class="p">,</span> <span class="n">additional_data</span><span class="o">=</span><span class="n">add_data</span><span class="p">)</span>
</span><span id="Calibration-158"><a href="#Calibration-158"><span class="linenos">158</span></a>
</span><span id="Calibration-159"><a href="#Calibration-159"><span class="linenos">159</span></a>    <span class="k">def</span> <span class="nf">cal_to_html</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Calibration-160"><a href="#Calibration-160"><span class="linenos">160</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;This routine creates an html str that would be human-readable in a</span>
</span><span id="Calibration-161"><a href="#Calibration-161"><span class="linenos">161</span></a><span class="sd">        browser detailing the calibration. This can be written to a file to</span>
</span><span id="Calibration-162"><a href="#Calibration-162"><span class="linenos">162</span></a><span class="sd">        store the calibration.</span>
</span><span id="Calibration-163"><a href="#Calibration-163"><span class="linenos">163</span></a>
</span><span id="Calibration-164"><a href="#Calibration-164"><span class="linenos">164</span></a><span class="sd">        Returns</span>
</span><span id="Calibration-165"><a href="#Calibration-165"><span class="linenos">165</span></a><span class="sd">        -------</span>
</span><span id="Calibration-166"><a href="#Calibration-166"><span class="linenos">166</span></a><span class="sd">        calib_div: str</span>
</span><span id="Calibration-167"><a href="#Calibration-167"><span class="linenos">167</span></a><span class="sd">            string containing the html detailing the calibration.</span>
</span><span id="Calibration-168"><a href="#Calibration-168"><span class="linenos">168</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Calibration-169"><a href="#Calibration-169"><span class="linenos">169</span></a>        <span class="kn">from</span> <span class="nn">AdvancedHTMLParser</span> <span class="kn">import</span> <span class="n">AdvancedTag</span> <span class="k">as</span> <span class="n">Domel</span>
</span><span id="Calibration-170"><a href="#Calibration-170"><span class="linenos">170</span></a>        <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
</span><span id="Calibration-171"><a href="#Calibration-171"><span class="linenos">171</span></a>        <span class="n">calib_div</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">)</span>
</span><span id="Calibration-172"><a href="#Calibration-172"><span class="linenos">172</span></a>        <span class="n">calib_title</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;h3&#39;</span><span class="p">)</span>
</span><span id="Calibration-173"><a href="#Calibration-173"><span class="linenos">173</span></a>        <span class="n">calib_title</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;Calibration of &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
</span><span id="Calibration-174"><a href="#Calibration-174"><span class="linenos">174</span></a>        <span class="n">calib_div</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">calib_title</span><span class="p">)</span>
</span><span id="Calibration-175"><a href="#Calibration-175"><span class="linenos">175</span></a>
</span><span id="Calibration-176"><a href="#Calibration-176"><span class="linenos">176</span></a>        <span class="n">calib_info</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">)</span>
</span><span id="Calibration-177"><a href="#Calibration-177"><span class="linenos">177</span></a>        <span class="n">calib_info</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;calib_info&#39;</span><span class="p">)</span>
</span><span id="Calibration-178"><a href="#Calibration-178"><span class="linenos">178</span></a>        <span class="n">calib_info</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;calib_info&#39;</span><span class="p">)</span>
</span><span id="Calibration-179"><a href="#Calibration-179"><span class="linenos">179</span></a>        <span class="n">calib_info</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;border&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
</span><span id="Calibration-180"><a href="#Calibration-180"><span class="linenos">180</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration-181"><a href="#Calibration-181"><span class="linenos">181</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;&lt;th&gt;Calibration of&lt;/th&gt;&lt;th&gt;Units returned&lt;/th&gt;&#39;</span>
</span><span id="Calibration-182"><a href="#Calibration-182"><span class="linenos">182</span></a>                           <span class="s1">&#39;&lt;th&gt;Fit function&lt;/th&gt;&lt;th&gt;Time&lt;/th&gt;&#39;</span>
</span><span id="Calibration-183"><a href="#Calibration-183"><span class="linenos">183</span></a>                           <span class="s1">&#39;&lt;th&gt;Timestamp&lt;/th&gt;&#39;</span><span class="p">)</span>
</span><span id="Calibration-184"><a href="#Calibration-184"><span class="linenos">184</span></a>        <span class="n">calib_info</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="Calibration-185"><a href="#Calibration-185"><span class="linenos">185</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration-186"><a href="#Calibration-186"><span class="linenos">186</span></a>        <span class="n">isotime</span> <span class="o">=</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">))</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
</span><span id="Calibration-187"><a href="#Calibration-187"><span class="linenos">187</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;&lt;td id = &quot;name&quot;&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration-188"><a href="#Calibration-188"><span class="linenos">188</span></a>                           <span class="s1">&#39;&lt;td id = &quot;units&quot;&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration-189"><a href="#Calibration-189"><span class="linenos">189</span></a>                           <span class="s1">&#39;&lt;td id = &quot;fit_type&quot;&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fit_type</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration-190"><a href="#Calibration-190"><span class="linenos">190</span></a>                           <span class="s1">&#39;&lt;td id = &quot;iso_time&quot;&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">isotime</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration-191"><a href="#Calibration-191"><span class="linenos">191</span></a>                           <span class="s1">&#39;&lt;td id = &quot;timestamp&quot;&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span><span class="p">)</span>
</span><span id="Calibration-192"><a href="#Calibration-192"><span class="linenos">192</span></a>        <span class="n">calib_info</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="Calibration-193"><a href="#Calibration-193"><span class="linenos">193</span></a>        <span class="n">calib_div</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">calib_info</span><span class="p">)</span>
</span><span id="Calibration-194"><a href="#Calibration-194"><span class="linenos">194</span></a>
</span><span id="Calibration-195"><a href="#Calibration-195"><span class="linenos">195</span></a>        <span class="n">p</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;p&#39;</span><span class="p">)</span>
</span><span id="Calibration-196"><a href="#Calibration-196"><span class="linenos">196</span></a>        <span class="n">p</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;fit_eqn_str&#39;</span><span class="p">)</span>
</span><span id="Calibration-197"><a href="#Calibration-197"><span class="linenos">197</span></a>        <span class="n">p</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;Fit Equation: &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_eqn_str</span><span class="p">)</span>
</span><span id="Calibration-198"><a href="#Calibration-198"><span class="linenos">198</span></a>        <span class="n">calib_div</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</span><span id="Calibration-199"><a href="#Calibration-199"><span class="linenos">199</span></a>
</span><span id="Calibration-200"><a href="#Calibration-200"><span class="linenos">200</span></a>        <span class="n">parameters</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">)</span>
</span><span id="Calibration-201"><a href="#Calibration-201"><span class="linenos">201</span></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;parameters&#39;</span><span class="p">)</span>
</span><span id="Calibration-202"><a href="#Calibration-202"><span class="linenos">202</span></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;parameters&#39;</span><span class="p">)</span>
</span><span id="Calibration-203"><a href="#Calibration-203"><span class="linenos">203</span></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;border&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
</span><span id="Calibration-204"><a href="#Calibration-204"><span class="linenos">204</span></a>        <span class="n">caption</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;caption&#39;</span><span class="p">)</span>
</span><span id="Calibration-205"><a href="#Calibration-205"><span class="linenos">205</span></a>        <span class="n">caption</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;Parameters&#39;</span><span class="p">)</span>
</span><span id="Calibration-206"><a href="#Calibration-206"><span class="linenos">206</span></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">caption</span><span class="p">)</span>
</span><span id="Calibration-207"><a href="#Calibration-207"><span class="linenos">207</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration-208"><a href="#Calibration-208"><span class="linenos">208</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;coef_labels&#39;</span><span class="p">)</span>
</span><span id="Calibration-209"><a href="#Calibration-209"><span class="linenos">209</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;Labels&lt;/th&gt;&#39;</span>
</span><span id="Calibration-210"><a href="#Calibration-210"><span class="linenos">210</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_coef_lbls</span><span class="p">:</span>
</span><span id="Calibration-211"><a href="#Calibration-211"><span class="linenos">211</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration-212"><a href="#Calibration-212"><span class="linenos">212</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="Calibration-213"><a href="#Calibration-213"><span class="linenos">213</span></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="Calibration-214"><a href="#Calibration-214"><span class="linenos">214</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration-215"><a href="#Calibration-215"><span class="linenos">215</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;coefficients&#39;</span><span class="p">)</span>
</span><span id="Calibration-216"><a href="#Calibration-216"><span class="linenos">216</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;Coefficients&lt;/th&gt;&#39;</span>
</span><span id="Calibration-217"><a href="#Calibration-217"><span class="linenos">217</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">:</span>
</span><span id="Calibration-218"><a href="#Calibration-218"><span class="linenos">218</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration-219"><a href="#Calibration-219"><span class="linenos">219</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="Calibration-220"><a href="#Calibration-220"><span class="linenos">220</span></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="Calibration-221"><a href="#Calibration-221"><span class="linenos">221</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration-222"><a href="#Calibration-222"><span class="linenos">222</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;stdev&#39;</span><span class="p">)</span>
</span><span id="Calibration-223"><a href="#Calibration-223"><span class="linenos">223</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;Standard Deviation&lt;/th&gt;&#39;</span>
</span><span id="Calibration-224"><a href="#Calibration-224"><span class="linenos">224</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_stdev</span><span class="p">:</span>
</span><span id="Calibration-225"><a href="#Calibration-225"><span class="linenos">225</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration-226"><a href="#Calibration-226"><span class="linenos">226</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="Calibration-227"><a href="#Calibration-227"><span class="linenos">227</span></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="Calibration-228"><a href="#Calibration-228"><span class="linenos">228</span></a>        <span class="n">calib_div</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
</span><span id="Calibration-229"><a href="#Calibration-229"><span class="linenos">229</span></a>
</span><span id="Calibration-230"><a href="#Calibration-230"><span class="linenos">230</span></a>        <span class="n">inverse</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">)</span>
</span><span id="Calibration-231"><a href="#Calibration-231"><span class="linenos">231</span></a>        <span class="n">inverse</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;inverse&#39;</span><span class="p">)</span>
</span><span id="Calibration-232"><a href="#Calibration-232"><span class="linenos">232</span></a>        <span class="n">inverse</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;inverse&#39;</span><span class="p">)</span>
</span><span id="Calibration-233"><a href="#Calibration-233"><span class="linenos">233</span></a>        <span class="n">inverse</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;border&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
</span><span id="Calibration-234"><a href="#Calibration-234"><span class="linenos">234</span></a>        <span class="n">caption</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;caption&#39;</span><span class="p">)</span>
</span><span id="Calibration-235"><a href="#Calibration-235"><span class="linenos">235</span></a>        <span class="n">caption</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;Inverse Parameters&#39;</span><span class="p">)</span>
</span><span id="Calibration-236"><a href="#Calibration-236"><span class="linenos">236</span></a>        <span class="n">inverse</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">caption</span><span class="p">)</span>
</span><span id="Calibration-237"><a href="#Calibration-237"><span class="linenos">237</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration-238"><a href="#Calibration-238"><span class="linenos">238</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;coef_labels&#39;</span><span class="p">)</span>
</span><span id="Calibration-239"><a href="#Calibration-239"><span class="linenos">239</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;Labels&lt;/th&gt;&#39;</span>
</span><span id="Calibration-240"><a href="#Calibration-240"><span class="linenos">240</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_coef_lbls</span><span class="p">:</span>
</span><span id="Calibration-241"><a href="#Calibration-241"><span class="linenos">241</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration-242"><a href="#Calibration-242"><span class="linenos">242</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="Calibration-243"><a href="#Calibration-243"><span class="linenos">243</span></a>        <span class="n">inverse</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="Calibration-244"><a href="#Calibration-244"><span class="linenos">244</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration-245"><a href="#Calibration-245"><span class="linenos">245</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;inv_coefficients&#39;</span><span class="p">)</span>
</span><span id="Calibration-246"><a href="#Calibration-246"><span class="linenos">246</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;Coefficients&lt;/th&gt;&#39;</span>
</span><span id="Calibration-247"><a href="#Calibration-247"><span class="linenos">247</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_inv</span><span class="p">:</span>
</span><span id="Calibration-248"><a href="#Calibration-248"><span class="linenos">248</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration-249"><a href="#Calibration-249"><span class="linenos">249</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="Calibration-250"><a href="#Calibration-250"><span class="linenos">250</span></a>        <span class="n">inverse</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="Calibration-251"><a href="#Calibration-251"><span class="linenos">251</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration-252"><a href="#Calibration-252"><span class="linenos">252</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;inv_stdev&#39;</span><span class="p">)</span>
</span><span id="Calibration-253"><a href="#Calibration-253"><span class="linenos">253</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;Standard Deviation&lt;/th&gt;&#39;</span>
</span><span id="Calibration-254"><a href="#Calibration-254"><span class="linenos">254</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_inv_stdev</span><span class="p">:</span>
</span><span id="Calibration-255"><a href="#Calibration-255"><span class="linenos">255</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration-256"><a href="#Calibration-256"><span class="linenos">256</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="Calibration-257"><a href="#Calibration-257"><span class="linenos">257</span></a>        <span class="n">inverse</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="Calibration-258"><a href="#Calibration-258"><span class="linenos">258</span></a>        <span class="n">calib_div</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">inverse</span><span class="p">)</span>
</span><span id="Calibration-259"><a href="#Calibration-259"><span class="linenos">259</span></a>
</span><span id="Calibration-260"><a href="#Calibration-260"><span class="linenos">260</span></a>        <span class="n">fit_data</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">)</span>
</span><span id="Calibration-261"><a href="#Calibration-261"><span class="linenos">261</span></a>        <span class="n">fit_data</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;calibration_data&#39;</span><span class="p">)</span>
</span><span id="Calibration-262"><a href="#Calibration-262"><span class="linenos">262</span></a>        <span class="n">fit_data</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;calibration_data&#39;</span><span class="p">)</span>
</span><span id="Calibration-263"><a href="#Calibration-263"><span class="linenos">263</span></a>        <span class="n">fit_data</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;border&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
</span><span id="Calibration-264"><a href="#Calibration-264"><span class="linenos">264</span></a>        <span class="n">caption</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;caption&#39;</span><span class="p">)</span>
</span><span id="Calibration-265"><a href="#Calibration-265"><span class="linenos">265</span></a>        <span class="n">caption</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;Calibration Data&#39;</span><span class="p">)</span>
</span><span id="Calibration-266"><a href="#Calibration-266"><span class="linenos">266</span></a>        <span class="n">fit_data</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">caption</span><span class="p">)</span>
</span><span id="Calibration-267"><a href="#Calibration-267"><span class="linenos">267</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration-268"><a href="#Calibration-268"><span class="linenos">268</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;cal_data_x&#39;</span><span class="p">)</span>
</span><span id="Calibration-269"><a href="#Calibration-269"><span class="linenos">269</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;X Calibration Data&lt;/th&gt;&#39;</span>
</span><span id="Calibration-270"><a href="#Calibration-270"><span class="linenos">270</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cal_data_x</span><span class="p">:</span>
</span><span id="Calibration-271"><a href="#Calibration-271"><span class="linenos">271</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration-272"><a href="#Calibration-272"><span class="linenos">272</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="Calibration-273"><a href="#Calibration-273"><span class="linenos">273</span></a>        <span class="n">fit_data</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="Calibration-274"><a href="#Calibration-274"><span class="linenos">274</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration-275"><a href="#Calibration-275"><span class="linenos">275</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;cal_data_y&#39;</span><span class="p">)</span>
</span><span id="Calibration-276"><a href="#Calibration-276"><span class="linenos">276</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;Y Calibration Data&lt;/th&gt;&#39;</span>
</span><span id="Calibration-277"><a href="#Calibration-277"><span class="linenos">277</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cal_data_y</span><span class="p">:</span>
</span><span id="Calibration-278"><a href="#Calibration-278"><span class="linenos">278</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration-279"><a href="#Calibration-279"><span class="linenos">279</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="Calibration-280"><a href="#Calibration-280"><span class="linenos">280</span></a>        <span class="n">fit_data</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="Calibration-281"><a href="#Calibration-281"><span class="linenos">281</span></a>        <span class="n">calib_div</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">fit_data</span><span class="p">)</span>
</span><span id="Calibration-282"><a href="#Calibration-282"><span class="linenos">282</span></a>
</span><span id="Calibration-283"><a href="#Calibration-283"><span class="linenos">283</span></a>        <span class="n">add_data</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">)</span>
</span><span id="Calibration-284"><a href="#Calibration-284"><span class="linenos">284</span></a>        <span class="n">add_data</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span><span class="s1">&#39;additonal_data&#39;</span><span class="p">)</span>
</span><span id="Calibration-285"><a href="#Calibration-285"><span class="linenos">285</span></a>        <span class="n">add_data</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="s1">&#39;additional_data&#39;</span><span class="p">)</span>
</span><span id="Calibration-286"><a href="#Calibration-286"><span class="linenos">286</span></a>        <span class="n">add_data</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;border&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
</span><span id="Calibration-287"><a href="#Calibration-287"><span class="linenos">287</span></a>        <span class="n">caption</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;caption&#39;</span><span class="p">)</span>
</span><span id="Calibration-288"><a href="#Calibration-288"><span class="linenos">288</span></a>        <span class="n">caption</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;Additional Data&#39;</span><span class="p">)</span>
</span><span id="Calibration-289"><a href="#Calibration-289"><span class="linenos">289</span></a>        <span class="n">add_data</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">caption</span><span class="p">)</span>
</span><span id="Calibration-290"><a href="#Calibration-290"><span class="linenos">290</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration-291"><a href="#Calibration-291"><span class="linenos">291</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="s1">&#39;additional_data_keys&#39;</span><span class="p">)</span>
</span><span id="Calibration-292"><a href="#Calibration-292"><span class="linenos">292</span></a>        <span class="n">tr2</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration-293"><a href="#Calibration-293"><span class="linenos">293</span></a>        <span class="n">tr2</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;additional_data_values&#39;</span><span class="p">)</span>
</span><span id="Calibration-294"><a href="#Calibration-294"><span class="linenos">294</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="Calibration-295"><a href="#Calibration-295"><span class="linenos">295</span></a>        <span class="n">innerstr2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="Calibration-296"><a href="#Calibration-296"><span class="linenos">296</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">additional_data</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="Calibration-297"><a href="#Calibration-297"><span class="linenos">297</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration-298"><a href="#Calibration-298"><span class="linenos">298</span></a>            <span class="n">innerstr2</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">additional_data</span><span class="p">[</span><span class="n">k</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration-299"><a href="#Calibration-299"><span class="linenos">299</span></a>        <span class="k">if</span> <span class="n">innerstr</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="Calibration-300"><a href="#Calibration-300"><span class="linenos">300</span></a>            <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="Calibration-301"><a href="#Calibration-301"><span class="linenos">301</span></a>            <span class="n">tr2</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr2</span><span class="p">)</span>
</span><span id="Calibration-302"><a href="#Calibration-302"><span class="linenos">302</span></a>            <span class="n">add_data</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="Calibration-303"><a href="#Calibration-303"><span class="linenos">303</span></a>            <span class="n">add_data</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr2</span><span class="p">)</span>
</span><span id="Calibration-304"><a href="#Calibration-304"><span class="linenos">304</span></a>            <span class="n">calib_div</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">add_data</span><span class="p">)</span>
</span><span id="Calibration-305"><a href="#Calibration-305"><span class="linenos">305</span></a>        <span class="k">return</span> <span class="n">calib_div</span><span class="o">.</span><span class="n">asHTML</span><span class="p">()</span>
</span><span id="Calibration-306"><a href="#Calibration-306"><span class="linenos">306</span></a>
</span><span id="Calibration-307"><a href="#Calibration-307"><span class="linenos">307</span></a>    <span class="k">def</span> <span class="nf">_cal_apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">stdev</span><span class="p">,</span> <span class="n">inverse</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Calibration-308"><a href="#Calibration-308"><span class="linenos">308</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply the calibration to some data.</span>
</span><span id="Calibration-309"><a href="#Calibration-309"><span class="linenos">309</span></a>
</span><span id="Calibration-310"><a href="#Calibration-310"><span class="linenos">310</span></a><span class="sd">        Parameters</span>
</span><span id="Calibration-311"><a href="#Calibration-311"><span class="linenos">311</span></a><span class="sd">        ----------</span>
</span><span id="Calibration-312"><a href="#Calibration-312"><span class="linenos">312</span></a><span class="sd">        data: object</span>
</span><span id="Calibration-313"><a href="#Calibration-313"><span class="linenos">313</span></a><span class="sd">            either a float or iterable of floats</span>
</span><span id="Calibration-314"><a href="#Calibration-314"><span class="linenos">314</span></a>
</span><span id="Calibration-315"><a href="#Calibration-315"><span class="linenos">315</span></a><span class="sd">        stdev: object</span>
</span><span id="Calibration-316"><a href="#Calibration-316"><span class="linenos">316</span></a><span class="sd">            either a float or iterable of floats containing the uncertainty</span>
</span><span id="Calibration-317"><a href="#Calibration-317"><span class="linenos">317</span></a><span class="sd">            in the data</span>
</span><span id="Calibration-318"><a href="#Calibration-318"><span class="linenos">318</span></a>
</span><span id="Calibration-319"><a href="#Calibration-319"><span class="linenos">319</span></a><span class="sd">        inverse: keyword (default = False). Controls whether applies forward</span>
</span><span id="Calibration-320"><a href="#Calibration-320"><span class="linenos">320</span></a><span class="sd">        (raw -&gt; calibration in units, False) or reverse (value in units -&gt;</span>
</span><span id="Calibration-321"><a href="#Calibration-321"><span class="linenos">321</span></a><span class="sd">        raw, True) calibrations.</span>
</span><span id="Calibration-322"><a href="#Calibration-322"><span class="linenos">322</span></a>
</span><span id="Calibration-323"><a href="#Calibration-323"><span class="linenos">323</span></a><span class="sd">        Returns</span>
</span><span id="Calibration-324"><a href="#Calibration-324"><span class="linenos">324</span></a><span class="sd">        -------</span>
</span><span id="Calibration-325"><a href="#Calibration-325"><span class="linenos">325</span></a><span class="sd">        object</span>
</span><span id="Calibration-326"><a href="#Calibration-326"><span class="linenos">326</span></a><span class="sd">            the data after applying the calibration: a float or iterable of</span>
</span><span id="Calibration-327"><a href="#Calibration-327"><span class="linenos">327</span></a><span class="sd">            floats depending on what was passed to the operation.</span>
</span><span id="Calibration-328"><a href="#Calibration-328"><span class="linenos">328</span></a>
</span><span id="Calibration-329"><a href="#Calibration-329"><span class="linenos">329</span></a><span class="sd">        object</span>
</span><span id="Calibration-330"><a href="#Calibration-330"><span class="linenos">330</span></a><span class="sd">            the standard deviation of the data after applying the</span>
</span><span id="Calibration-331"><a href="#Calibration-331"><span class="linenos">331</span></a><span class="sd">            calibration: a float or iterable of floats depending on what was</span>
</span><span id="Calibration-332"><a href="#Calibration-332"><span class="linenos">332</span></a><span class="sd">            passed to the operation.</span>
</span><span id="Calibration-333"><a href="#Calibration-333"><span class="linenos">333</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Calibration-334"><a href="#Calibration-334"><span class="linenos">334</span></a>        <span class="n">param</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Calibration-335"><a href="#Calibration-335"><span class="linenos">335</span></a>        <span class="n">param_stdev</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Calibration-336"><a href="#Calibration-336"><span class="linenos">336</span></a>        <span class="k">if</span> <span class="n">inverse</span><span class="p">:</span>
</span><span id="Calibration-337"><a href="#Calibration-337"><span class="linenos">337</span></a>            <span class="n">param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_inv</span>
</span><span id="Calibration-338"><a href="#Calibration-338"><span class="linenos">338</span></a>            <span class="n">param_stdev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_inv_stdev</span>
</span><span id="Calibration-339"><a href="#Calibration-339"><span class="linenos">339</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Calibration-340"><a href="#Calibration-340"><span class="linenos">340</span></a>            <span class="n">param</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param</span>
</span><span id="Calibration-341"><a href="#Calibration-341"><span class="linenos">341</span></a>            <span class="n">param_stdev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_stdev</span>
</span><span id="Calibration-342"><a href="#Calibration-342"><span class="linenos">342</span></a>        <span class="n">cal_data</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Calibration-343"><a href="#Calibration-343"><span class="linenos">343</span></a>        <span class="n">cal_stdev</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Calibration-344"><a href="#Calibration-344"><span class="linenos">344</span></a>        <span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Iterable</span>
</span><span id="Calibration-345"><a href="#Calibration-345"><span class="linenos">345</span></a>        <span class="kn">from</span> <span class="nn">round_using_error.round_using_error</span> <span class="kn">import</span> <span class="n">numbers_rndwitherr</span>
</span><span id="Calibration-346"><a href="#Calibration-346"><span class="linenos">346</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">):</span>
</span><span id="Calibration-347"><a href="#Calibration-347"><span class="linenos">347</span></a>            <span class="n">cal_data</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Calibration-348"><a href="#Calibration-348"><span class="linenos">348</span></a>            <span class="n">cal_stdev</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Calibration-349"><a href="#Calibration-349"><span class="linenos">349</span></a>            <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span id="Calibration-350"><a href="#Calibration-350"><span class="linenos">350</span></a>            <span class="n">npdata</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span id="Calibration-351"><a href="#Calibration-351"><span class="linenos">351</span></a>            <span class="n">npstdev</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">stdev</span><span class="p">)</span>
</span><span id="Calibration-352"><a href="#Calibration-352"><span class="linenos">352</span></a>            <span class="c1"># calculate the new calibrated values and errors</span>
</span><span id="Calibration-353"><a href="#Calibration-353"><span class="linenos">353</span></a>            <span class="n">npcal_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</span><span id="Calibration-354"><a href="#Calibration-354"><span class="linenos">354</span></a>            <span class="n">npcal_stdev</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</span><span id="Calibration-355"><a href="#Calibration-355"><span class="linenos">355</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_type</span> <span class="o">==</span> <span class="s1">&#39;polynomial&#39;</span><span class="p">:</span>
</span><span id="Calibration-356"><a href="#Calibration-356"><span class="linenos">356</span></a>                <span class="n">coef_n</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Calibration-357"><a href="#Calibration-357"><span class="linenos">357</span></a>                <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">param_stdev</span><span class="p">):</span>
</span><span id="Calibration-358"><a href="#Calibration-358"><span class="linenos">358</span></a>                    <span class="n">npcal_data</span> <span class="o">+=</span> <span class="n">j</span><span class="o">*</span><span class="n">npdata</span><span class="o">**</span><span class="n">coef_n</span>
</span><span id="Calibration-359"><a href="#Calibration-359"><span class="linenos">359</span></a>                    <span class="k">if</span> <span class="n">coef_n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Calibration-360"><a href="#Calibration-360"><span class="linenos">360</span></a>                        <span class="n">npcal_stdev</span> <span class="o">+=</span> <span class="mi">0</span>
</span><span id="Calibration-361"><a href="#Calibration-361"><span class="linenos">361</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="Calibration-362"><a href="#Calibration-362"><span class="linenos">362</span></a>                        <span class="n">npcal_stdev</span> <span class="o">+=</span> <span class="p">(</span><span class="n">coef_n</span><span class="o">*</span><span class="n">j</span><span class="o">*</span><span class="n">npdata</span><span class="o">**</span><span class="p">(</span><span class="n">coef_n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">npstdev</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> \
</span><span id="Calibration-363"><a href="#Calibration-363"><span class="linenos">363</span></a>                                 <span class="p">(</span><span class="n">npdata</span><span class="o">**</span><span class="n">coef_n</span><span class="o">*</span><span class="n">k</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
</span><span id="Calibration-364"><a href="#Calibration-364"><span class="linenos">364</span></a>                    <span class="n">coef_n</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="Calibration-365"><a href="#Calibration-365"><span class="linenos">365</span></a>                <span class="n">npcal_stdev</span> <span class="o">=</span> <span class="n">npcal_stdev</span><span class="o">**</span><span class="mf">0.5</span>
</span><span id="Calibration-366"><a href="#Calibration-366"><span class="linenos">366</span></a>                <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">npcal_data</span><span class="p">,</span> <span class="n">npcal_stdev</span><span class="p">):</span>
</span><span id="Calibration-367"><a href="#Calibration-367"><span class="linenos">367</span></a>                    <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="n">numbers_rndwitherr</span><span class="p">(</span><span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
</span><span id="Calibration-368"><a href="#Calibration-368"><span class="linenos">368</span></a>                    <span class="n">cal_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
</span><span id="Calibration-369"><a href="#Calibration-369"><span class="linenos">369</span></a>                    <span class="n">cal_stdev</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</span><span id="Calibration-370"><a href="#Calibration-370"><span class="linenos">370</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Calibration-371"><a href="#Calibration-371"><span class="linenos">371</span></a>                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Only polynomial calibration &#39;</span>
</span><span id="Calibration-372"><a href="#Calibration-372"><span class="linenos">372</span></a>                                          <span class="s1">&#39;implemented.&#39;</span><span class="p">)</span>
</span><span id="Calibration-373"><a href="#Calibration-373"><span class="linenos">373</span></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
</span><span id="Calibration-374"><a href="#Calibration-374"><span class="linenos">374</span></a>            <span class="c1"># calculate the new calibrated value and error.</span>
</span><span id="Calibration-375"><a href="#Calibration-375"><span class="linenos">375</span></a>            <span class="c1"># each polynomial term contributes x^2*n*u(x)^2 +</span>
</span><span id="Calibration-376"><a href="#Calibration-376"><span class="linenos">376</span></a>            <span class="c1"># n^2*Cn^2*x^(2n-2)*u(Cn)^2 to the square of the uncertainty.</span>
</span><span id="Calibration-377"><a href="#Calibration-377"><span class="linenos">377</span></a>            <span class="n">cal_data</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Calibration-378"><a href="#Calibration-378"><span class="linenos">378</span></a>            <span class="n">cal_stdev</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Calibration-379"><a href="#Calibration-379"><span class="linenos">379</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_type</span> <span class="o">==</span> <span class="s1">&#39;polynomial&#39;</span><span class="p">:</span>
</span><span id="Calibration-380"><a href="#Calibration-380"><span class="linenos">380</span></a>                <span class="n">coef_n</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Calibration-381"><a href="#Calibration-381"><span class="linenos">381</span></a>                <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">param_stdev</span><span class="p">):</span>
</span><span id="Calibration-382"><a href="#Calibration-382"><span class="linenos">382</span></a>                    <span class="n">cal_data</span> <span class="o">+=</span> <span class="n">j</span><span class="o">*</span><span class="n">data</span><span class="o">**</span><span class="n">coef_n</span>
</span><span id="Calibration-383"><a href="#Calibration-383"><span class="linenos">383</span></a>                    <span class="k">if</span> <span class="n">coef_n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Calibration-384"><a href="#Calibration-384"><span class="linenos">384</span></a>                        <span class="n">cal_stdev</span> <span class="o">+=</span> <span class="mi">0</span>
</span><span id="Calibration-385"><a href="#Calibration-385"><span class="linenos">385</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="Calibration-386"><a href="#Calibration-386"><span class="linenos">386</span></a>                        <span class="n">cal_stdev</span> <span class="o">+=</span> <span class="p">(</span><span class="n">coef_n</span><span class="o">*</span><span class="n">j</span><span class="o">*</span><span class="n">data</span><span class="o">**</span><span class="p">(</span><span class="n">coef_n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">stdev</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>\
</span><span id="Calibration-387"><a href="#Calibration-387"><span class="linenos">387</span></a>                                     <span class="o">+</span> <span class="p">(</span><span class="n">data</span><span class="o">**</span><span class="n">coef_n</span><span class="o">*</span><span class="n">k</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
</span><span id="Calibration-388"><a href="#Calibration-388"><span class="linenos">388</span></a>                    <span class="n">coef_n</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="Calibration-389"><a href="#Calibration-389"><span class="linenos">389</span></a>                <span class="n">cal_stdev</span> <span class="o">=</span> <span class="n">cal_stdev</span><span class="o">**</span><span class="mf">0.5</span>
</span><span id="Calibration-390"><a href="#Calibration-390"><span class="linenos">390</span></a>                <span class="n">cal_data</span><span class="p">,</span> <span class="n">cal_stdev</span> <span class="o">=</span> <span class="n">numbers_rndwitherr</span><span class="p">(</span><span class="n">cal_data</span><span class="p">,</span> <span class="n">cal_stdev</span><span class="p">)</span>
</span><span id="Calibration-391"><a href="#Calibration-391"><span class="linenos">391</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Calibration-392"><a href="#Calibration-392"><span class="linenos">392</span></a>                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Only polynomial calibration &#39;</span>
</span><span id="Calibration-393"><a href="#Calibration-393"><span class="linenos">393</span></a>                                          <span class="s1">&#39;implemented.&#39;</span><span class="p">)</span>
</span><span id="Calibration-394"><a href="#Calibration-394"><span class="linenos">394</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Calibration-395"><a href="#Calibration-395"><span class="linenos">395</span></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Data must be a float or an iterable of floats.&#39;</span><span class="p">)</span>
</span><span id="Calibration-396"><a href="#Calibration-396"><span class="linenos">396</span></a>        <span class="k">return</span> <span class="n">cal_data</span><span class="p">,</span> <span class="n">cal_stdev</span>
</span><span id="Calibration-397"><a href="#Calibration-397"><span class="linenos">397</span></a>
</span><span id="Calibration-398"><a href="#Calibration-398"><span class="linenos">398</span></a>    <span class="k">def</span> <span class="nf">cal_apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">stdev</span><span class="p">):</span>
</span><span id="Calibration-399"><a href="#Calibration-399"><span class="linenos">399</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cal_apply</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">stdev</span><span class="p">)</span>
</span><span id="Calibration-400"><a href="#Calibration-400"><span class="linenos">400</span></a>
</span><span id="Calibration-401"><a href="#Calibration-401"><span class="linenos">401</span></a>    <span class="k">def</span> <span class="nf">cal_inv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">stdev</span><span class="p">):</span>
</span><span id="Calibration-402"><a href="#Calibration-402"><span class="linenos">402</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cal_apply</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">stdev</span><span class="p">,</span> <span class="n">inverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


    

                            <div id="Calibration.__init__" class="classattr">
                                        <input id="Calibration.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Calibration</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">name</span>,</span><span class="param">	<span class="n">units</span>,</span><span class="param">	<span class="n">timestamp</span>,</span><span class="param">	<span class="n">param</span>,</span><span class="param">	<span class="n">param_stdev</span>,</span><span class="param">	<span class="n">param_inv</span>,</span><span class="param">	<span class="n">param_inv_stdev</span>,</span><span class="param">	<span class="n">cal_data_x</span>,</span><span class="param">	<span class="n">cal_data_y</span>,</span><span class="param">	<span class="n">fit_type</span><span class="o">=</span><span class="s1">&#39;polynomial&#39;</span>,</span><span class="param">	<span class="n">fit_eqn_str</span><span class="o">=</span><span class="s1">&#39;y = C0 + C1*x + C2*x*x + C3*x*x*x + ...&#39;</span>,</span><span class="param">	<span class="n">fit_ceof_lbls</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;C0&#39;</span><span class="p">,</span> <span class="s1">&#39;C1&#39;</span><span class="p">,</span> <span class="s1">&#39;C2&#39;</span><span class="p">,</span> <span class="s1">&#39;C3&#39;</span><span class="p">,</span> <span class="s1">&#39;C4&#39;</span><span class="p">,</span> <span class="s1">&#39;C5&#39;</span><span class="p">,</span> <span class="s1">&#39;C6&#39;</span><span class="p">,</span> <span class="s1">&#39;C7&#39;</span><span class="p">]</span>,</span><span class="param">	<span class="n">additional_data</span><span class="o">=</span><span class="p">{}</span></span>)</span>

                <label class="view-source-button" for="Calibration.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Calibration.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Calibration.__init__-11"><a href="#Calibration.__init__-11"><span class="linenos">11</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">units</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">param_stdev</span><span class="p">,</span>
</span><span id="Calibration.__init__-12"><a href="#Calibration.__init__-12"><span class="linenos">12</span></a>                 <span class="n">param_inv</span><span class="p">,</span> <span class="n">param_inv_stdev</span><span class="p">,</span>
</span><span id="Calibration.__init__-13"><a href="#Calibration.__init__-13"><span class="linenos">13</span></a>                 <span class="n">cal_data_x</span><span class="p">,</span> <span class="n">cal_data_y</span><span class="p">,</span> <span class="n">fit_type</span><span class="o">=</span><span class="s2">&quot;polynomial&quot;</span><span class="p">,</span>
</span><span id="Calibration.__init__-14"><a href="#Calibration.__init__-14"><span class="linenos">14</span></a>                 <span class="n">fit_eqn_str</span><span class="o">=</span><span class="s2">&quot;y = C0 + C1*x + C2*x*x + C3*x*x*x + ...&quot;</span><span class="p">,</span>
</span><span id="Calibration.__init__-15"><a href="#Calibration.__init__-15"><span class="linenos">15</span></a>                 <span class="n">fit_ceof_lbls</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;C0&quot;</span><span class="p">,</span> <span class="s2">&quot;C1&quot;</span><span class="p">,</span> <span class="s2">&quot;C2&quot;</span><span class="p">,</span> <span class="s2">&quot;C3&quot;</span><span class="p">,</span> <span class="s2">&quot;C4&quot;</span><span class="p">,</span> <span class="s2">&quot;C5&quot;</span><span class="p">,</span> <span class="s2">&quot;C6&quot;</span><span class="p">,</span>
</span><span id="Calibration.__init__-16"><a href="#Calibration.__init__-16"><span class="linenos">16</span></a>                                  <span class="s2">&quot;C7&quot;</span><span class="p">],</span> <span class="n">additional_data</span> <span class="o">=</span> <span class="p">{}):</span>
</span><span id="Calibration.__init__-17"><a href="#Calibration.__init__-17"><span class="linenos">17</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Calibration.__init__-18"><a href="#Calibration.__init__-18"><span class="linenos">18</span></a><span class="sd">        Defines a calibration of type `name`.</span>
</span><span id="Calibration.__init__-19"><a href="#Calibration.__init__-19"><span class="linenos">19</span></a><span class="sd">        Parameters</span>
</span><span id="Calibration.__init__-20"><a href="#Calibration.__init__-20"><span class="linenos">20</span></a><span class="sd">        ----------</span>
</span><span id="Calibration.__init__-21"><a href="#Calibration.__init__-21"><span class="linenos">21</span></a><span class="sd">        name: str</span>
</span><span id="Calibration.__init__-22"><a href="#Calibration.__init__-22"><span class="linenos">22</span></a><span class="sd">            calibration name.</span>
</span><span id="Calibration.__init__-23"><a href="#Calibration.__init__-23"><span class="linenos">23</span></a>
</span><span id="Calibration.__init__-24"><a href="#Calibration.__init__-24"><span class="linenos">24</span></a><span class="sd">        units: str</span>
</span><span id="Calibration.__init__-25"><a href="#Calibration.__init__-25"><span class="linenos">25</span></a><span class="sd">            string representation of the units the calibration yields.</span>
</span><span id="Calibration.__init__-26"><a href="#Calibration.__init__-26"><span class="linenos">26</span></a>
</span><span id="Calibration.__init__-27"><a href="#Calibration.__init__-27"><span class="linenos">27</span></a><span class="sd">        timestamp: float</span>
</span><span id="Calibration.__init__-28"><a href="#Calibration.__init__-28"><span class="linenos">28</span></a><span class="sd">            Unix floating point timestamp.</span>
</span><span id="Calibration.__init__-29"><a href="#Calibration.__init__-29"><span class="linenos">29</span></a>
</span><span id="Calibration.__init__-30"><a href="#Calibration.__init__-30"><span class="linenos">30</span></a><span class="sd">        param:list</span>
</span><span id="Calibration.__init__-31"><a href="#Calibration.__init__-31"><span class="linenos">31</span></a><span class="sd">            list of the numerical parameters for the fit yielding the</span>
</span><span id="Calibration.__init__-32"><a href="#Calibration.__init__-32"><span class="linenos">32</span></a><span class="sd">            calibration.</span>
</span><span id="Calibration.__init__-33"><a href="#Calibration.__init__-33"><span class="linenos">33</span></a>
</span><span id="Calibration.__init__-34"><a href="#Calibration.__init__-34"><span class="linenos">34</span></a><span class="sd">        param_stdev: list</span>
</span><span id="Calibration.__init__-35"><a href="#Calibration.__init__-35"><span class="linenos">35</span></a><span class="sd">            list of the numerical values for the estimated standard</span>
</span><span id="Calibration.__init__-36"><a href="#Calibration.__init__-36"><span class="linenos">36</span></a><span class="sd">            deviation of the parameters from the fit.</span>
</span><span id="Calibration.__init__-37"><a href="#Calibration.__init__-37"><span class="linenos">37</span></a><span class="sd">        param_inv: list</span>
</span><span id="Calibration.__init__-38"><a href="#Calibration.__init__-38"><span class="linenos">38</span></a><span class="sd">            list of the numerical values for the fit (or equation) yielding the</span>
</span><span id="Calibration.__init__-39"><a href="#Calibration.__init__-39"><span class="linenos">39</span></a><span class="sd">            inverse of the calibration (return to the raw value).</span>
</span><span id="Calibration.__init__-40"><a href="#Calibration.__init__-40"><span class="linenos">40</span></a><span class="sd">        param_inv_stdev: list</span>
</span><span id="Calibration.__init__-41"><a href="#Calibration.__init__-41"><span class="linenos">41</span></a><span class="sd">            list of the numerical values for the estimated standard deviation of</span>
</span><span id="Calibration.__init__-42"><a href="#Calibration.__init__-42"><span class="linenos">42</span></a><span class="sd">            the parameters for the inversion.</span>
</span><span id="Calibration.__init__-43"><a href="#Calibration.__init__-43"><span class="linenos">43</span></a><span class="sd">        cal_data_x: list</span>
</span><span id="Calibration.__init__-44"><a href="#Calibration.__init__-44"><span class="linenos">44</span></a><span class="sd">            x-data used for the calibration fit.</span>
</span><span id="Calibration.__init__-45"><a href="#Calibration.__init__-45"><span class="linenos">45</span></a>
</span><span id="Calibration.__init__-46"><a href="#Calibration.__init__-46"><span class="linenos">46</span></a><span class="sd">        cal_data_y: list</span>
</span><span id="Calibration.__init__-47"><a href="#Calibration.__init__-47"><span class="linenos">47</span></a><span class="sd">            y-data used for the calibration fit.</span>
</span><span id="Calibration.__init__-48"><a href="#Calibration.__init__-48"><span class="linenos">48</span></a>
</span><span id="Calibration.__init__-49"><a href="#Calibration.__init__-49"><span class="linenos">49</span></a><span class="sd">        fit_type: str</span>
</span><span id="Calibration.__init__-50"><a href="#Calibration.__init__-50"><span class="linenos">50</span></a><span class="sd">            string name for the fit type. Defaults to &quot;polynomial&quot;</span>
</span><span id="Calibration.__init__-51"><a href="#Calibration.__init__-51"><span class="linenos">51</span></a>
</span><span id="Calibration.__init__-52"><a href="#Calibration.__init__-52"><span class="linenos">52</span></a><span class="sd">        fit_eqn_str: str</span>
</span><span id="Calibration.__init__-53"><a href="#Calibration.__init__-53"><span class="linenos">53</span></a><span class="sd">            string representation of the fit equation. Defaults to</span>
</span><span id="Calibration.__init__-54"><a href="#Calibration.__init__-54"><span class="linenos">54</span></a><span class="sd">            &quot;y = C0 + C1*x + C2*x*x + C3*x*x*x + ...&quot;</span>
</span><span id="Calibration.__init__-55"><a href="#Calibration.__init__-55"><span class="linenos">55</span></a>
</span><span id="Calibration.__init__-56"><a href="#Calibration.__init__-56"><span class="linenos">56</span></a><span class="sd">        fit_ceof_lbls: list</span>
</span><span id="Calibration.__init__-57"><a href="#Calibration.__init__-57"><span class="linenos">57</span></a><span class="sd">            list of string labels for the coefficients, which should</span>
</span><span id="Calibration.__init__-58"><a href="#Calibration.__init__-58"><span class="linenos">58</span></a><span class="sd">            correlate to symbols in the fit_eqn_str. Defaults to [&quot;C0&quot;, &quot;C1&quot;,</span>
</span><span id="Calibration.__init__-59"><a href="#Calibration.__init__-59"><span class="linenos">59</span></a><span class="sd">            ...]. Automatically, truncated to the actual number of</span>
</span><span id="Calibration.__init__-60"><a href="#Calibration.__init__-60"><span class="linenos">60</span></a><span class="sd">            coefficients determined by the order of the polynomial.</span>
</span><span id="Calibration.__init__-61"><a href="#Calibration.__init__-61"><span class="linenos">61</span></a>
</span><span id="Calibration.__init__-62"><a href="#Calibration.__init__-62"><span class="linenos">62</span></a><span class="sd">        additional_data:dict</span>
</span><span id="Calibration.__init__-63"><a href="#Calibration.__init__-63"><span class="linenos">63</span></a><span class="sd">            a dictionary of key:value pairs where the keys are a short</span>
</span><span id="Calibration.__init__-64"><a href="#Calibration.__init__-64"><span class="linenos">64</span></a><span class="sd">            descriptive string. They can contain any additional data</span>
</span><span id="Calibration.__init__-65"><a href="#Calibration.__init__-65"><span class="linenos">65</span></a><span class="sd">            necessary for doing calculations on the data.</span>
</span><span id="Calibration.__init__-66"><a href="#Calibration.__init__-66"><span class="linenos">66</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Calibration.__init__-67"><a href="#Calibration.__init__-67"><span class="linenos">67</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span id="Calibration.__init__-68"><a href="#Calibration.__init__-68"><span class="linenos">68</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">units</span> <span class="o">=</span> <span class="n">units</span>
</span><span id="Calibration.__init__-69"><a href="#Calibration.__init__-69"><span class="linenos">69</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span> <span class="o">=</span> <span class="n">timestamp</span>
</span><span id="Calibration.__init__-70"><a href="#Calibration.__init__-70"><span class="linenos">70</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">param</span> <span class="o">=</span> <span class="n">param</span>
</span><span id="Calibration.__init__-71"><a href="#Calibration.__init__-71"><span class="linenos">71</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">param_stdev</span> <span class="o">=</span> <span class="n">param_stdev</span>
</span><span id="Calibration.__init__-72"><a href="#Calibration.__init__-72"><span class="linenos">72</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">param_inv</span> <span class="o">=</span> <span class="n">param_inv</span>
</span><span id="Calibration.__init__-73"><a href="#Calibration.__init__-73"><span class="linenos">73</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">param_inv_stdev</span>  <span class="o">=</span> <span class="n">param_inv_stdev</span>
</span><span id="Calibration.__init__-74"><a href="#Calibration.__init__-74"><span class="linenos">74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cal_data_x</span> <span class="o">=</span> <span class="n">cal_data_x</span>
</span><span id="Calibration.__init__-75"><a href="#Calibration.__init__-75"><span class="linenos">75</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">cal_data_y</span> <span class="o">=</span> <span class="n">cal_data_y</span>
</span><span id="Calibration.__init__-76"><a href="#Calibration.__init__-76"><span class="linenos">76</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fit_type</span> <span class="o">=</span> <span class="n">fit_type</span>
</span><span id="Calibration.__init__-77"><a href="#Calibration.__init__-77"><span class="linenos">77</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fit_eqn_str</span> <span class="o">=</span> <span class="n">fit_eqn_str</span>
</span><span id="Calibration.__init__-78"><a href="#Calibration.__init__-78"><span class="linenos">78</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fit_coef_lbls</span> <span class="o">=</span> <span class="n">fit_ceof_lbls</span>
</span><span id="Calibration.__init__-79"><a href="#Calibration.__init__-79"><span class="linenos">79</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_type</span> <span class="o">==</span> <span class="s2">&quot;polynomial&quot;</span> <span class="ow">and</span>\
</span><span id="Calibration.__init__-80"><a href="#Calibration.__init__-80"><span class="linenos">80</span></a>                <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fit_coef_lbls</span><span class="p">):</span>
</span><span id="Calibration.__init__-81"><a href="#Calibration.__init__-81"><span class="linenos">81</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fit_coef_lbls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_coef_lbls</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">)]</span>
</span><span id="Calibration.__init__-82"><a href="#Calibration.__init__-82"><span class="linenos">82</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">additional_data</span> <span class="o">=</span> <span class="n">additional_data</span>
</span></pre></div>


            <div class="docstring"><p>Defines a calibration of type <code>name</code>.</p>

<h2 id="parameters">Parameters</h2>

<p>name: str
    calibration name.</p>

<p>units: str
    string representation of the units the calibration yields.</p>

<p>timestamp: float
    Unix floating point timestamp.</p>

<p>param:list
    list of the numerical parameters for the fit yielding the
    calibration.</p>

<p>param_stdev: list
    list of the numerical values for the estimated standard
    deviation of the parameters from the fit.
param_inv: list
    list of the numerical values for the fit (or equation) yielding the
    inverse of the calibration (return to the raw value).
param_inv_stdev: list
    list of the numerical values for the estimated standard deviation of
    the parameters for the inversion.
cal_data_x: list
    x-data used for the calibration fit.</p>

<p>cal_data_y: list
    y-data used for the calibration fit.</p>

<p>fit_type: str
    string name for the fit type. Defaults to "polynomial"</p>

<p>fit_eqn_str: str
    string representation of the fit equation. Defaults to
    "y = C0 + C1<em>x + C2</em>x<em>x + C3</em>x<em>x</em>x + ..."</p>

<p>fit_ceof_lbls: list
    list of string labels for the coefficients, which should
    correlate to symbols in the fit_eqn_str. Defaults to ["C0", "C1",
    ...]. Automatically, truncated to the actual number of
    coefficients determined by the order of the polynomial.</p>

<p>additional_data:dict
    a dictionary of key:value pairs where the keys are a short
    descriptive string. They can contain any additional data
    necessary for doing calculations on the data.</p>
</div>


                            </div>
                            <div id="Calibration.cal_from_html" class="classattr">
                                        <input id="Calibration.cal_from_html-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@classmethod</div>

        <span class="def">def</span>
        <span class="name">cal_from_html</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span>, </span><span class="param"><span class="n">html</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Calibration.cal_from_html-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Calibration.cal_from_html"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Calibration.cal_from_html-84"><a href="#Calibration.cal_from_html-84"><span class="linenos"> 84</span></a>    <span class="nd">@classmethod</span>
</span><span id="Calibration.cal_from_html-85"><a href="#Calibration.cal_from_html-85"><span class="linenos"> 85</span></a>    <span class="k">def</span> <span class="nf">cal_from_html</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">html</span><span class="p">):</span>
</span><span id="Calibration.cal_from_html-86"><a href="#Calibration.cal_from_html-86"><span class="linenos"> 86</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;This takes in an html str, parses it and returns a new</span>
</span><span id="Calibration.cal_from_html-87"><a href="#Calibration.cal_from_html-87"><span class="linenos"> 87</span></a><span class="sd">        calibration.</span>
</span><span id="Calibration.cal_from_html-88"><a href="#Calibration.cal_from_html-88"><span class="linenos"> 88</span></a>
</span><span id="Calibration.cal_from_html-89"><a href="#Calibration.cal_from_html-89"><span class="linenos"> 89</span></a><span class="sd">        Parameters</span>
</span><span id="Calibration.cal_from_html-90"><a href="#Calibration.cal_from_html-90"><span class="linenos"> 90</span></a><span class="sd">        ----------</span>
</span><span id="Calibration.cal_from_html-91"><a href="#Calibration.cal_from_html-91"><span class="linenos"> 91</span></a><span class="sd">        html: str</span>
</span><span id="Calibration.cal_from_html-92"><a href="#Calibration.cal_from_html-92"><span class="linenos"> 92</span></a><span class="sd">            The html to be parsed to create the calibration object</span>
</span><span id="Calibration.cal_from_html-93"><a href="#Calibration.cal_from_html-93"><span class="linenos"> 93</span></a>
</span><span id="Calibration.cal_from_html-94"><a href="#Calibration.cal_from_html-94"><span class="linenos"> 94</span></a><span class="sd">        Returns</span>
</span><span id="Calibration.cal_from_html-95"><a href="#Calibration.cal_from_html-95"><span class="linenos"> 95</span></a><span class="sd">        -------</span>
</span><span id="Calibration.cal_from_html-96"><a href="#Calibration.cal_from_html-96"><span class="linenos"> 96</span></a><span class="sd">        calibration: calibration</span>
</span><span id="Calibration.cal_from_html-97"><a href="#Calibration.cal_from_html-97"><span class="linenos"> 97</span></a><span class="sd">            a calibration object.</span>
</span><span id="Calibration.cal_from_html-98"><a href="#Calibration.cal_from_html-98"><span class="linenos"> 98</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Calibration.cal_from_html-99"><a href="#Calibration.cal_from_html-99"><span class="linenos"> 99</span></a>        <span class="kn">from</span> <span class="nn">AdvancedHTMLParser</span> <span class="kn">import</span> <span class="n">AdvancedHTMLParser</span> <span class="k">as</span> <span class="n">Parser</span>
</span><span id="Calibration.cal_from_html-100"><a href="#Calibration.cal_from_html-100"><span class="linenos">100</span></a>
</span><span id="Calibration.cal_from_html-101"><a href="#Calibration.cal_from_html-101"><span class="linenos">101</span></a>        <span class="n">document</span> <span class="o">=</span> <span class="n">Parser</span><span class="p">()</span>
</span><span id="Calibration.cal_from_html-102"><a href="#Calibration.cal_from_html-102"><span class="linenos">102</span></a>        <span class="n">document</span><span class="o">.</span><span class="n">parseStr</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</span><span id="Calibration.cal_from_html-103"><a href="#Calibration.cal_from_html-103"><span class="linenos">103</span></a>        <span class="n">name</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</span><span id="Calibration.cal_from_html-104"><a href="#Calibration.cal_from_html-104"><span class="linenos">104</span></a>        <span class="n">units</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;units&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</span><span id="Calibration.cal_from_html-105"><a href="#Calibration.cal_from_html-105"><span class="linenos">105</span></a>        <span class="n">fit_type</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;fit_type&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</span><span id="Calibration.cal_from_html-106"><a href="#Calibration.cal_from_html-106"><span class="linenos">106</span></a>        <span class="n">timestamp</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;timestamp&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</span><span id="Calibration.cal_from_html-107"><a href="#Calibration.cal_from_html-107"><span class="linenos">107</span></a>        <span class="n">fit_eqn_str</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;fit_eqn_str&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</span><span id="Calibration.cal_from_html-108"><a href="#Calibration.cal_from_html-108"><span class="linenos">108</span></a>        <span class="n">coef_lbl_el</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;coef_labels&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_from_html-109"><a href="#Calibration.cal_from_html-109"><span class="linenos">109</span></a>        <span class="n">coef_lbls</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Calibration.cal_from_html-110"><a href="#Calibration.cal_from_html-110"><span class="linenos">110</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">coef_lbl_el</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
</span><span id="Calibration.cal_from_html-111"><a href="#Calibration.cal_from_html-111"><span class="linenos">111</span></a>            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="Calibration.cal_from_html-112"><a href="#Calibration.cal_from_html-112"><span class="linenos">112</span></a>                <span class="n">coef_lbls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</span><span id="Calibration.cal_from_html-113"><a href="#Calibration.cal_from_html-113"><span class="linenos">113</span></a>        <span class="n">coef_el</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;coefficients&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_from_html-114"><a href="#Calibration.cal_from_html-114"><span class="linenos">114</span></a>        <span class="n">coef_val</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Calibration.cal_from_html-115"><a href="#Calibration.cal_from_html-115"><span class="linenos">115</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">coef_el</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
</span><span id="Calibration.cal_from_html-116"><a href="#Calibration.cal_from_html-116"><span class="linenos">116</span></a>            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="Calibration.cal_from_html-117"><a href="#Calibration.cal_from_html-117"><span class="linenos">117</span></a>                <span class="n">coef_val</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</span><span id="Calibration.cal_from_html-118"><a href="#Calibration.cal_from_html-118"><span class="linenos">118</span></a>        <span class="n">stdev_el</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;stdev&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_from_html-119"><a href="#Calibration.cal_from_html-119"><span class="linenos">119</span></a>        <span class="n">coef_stdev</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Calibration.cal_from_html-120"><a href="#Calibration.cal_from_html-120"><span class="linenos">120</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">stdev_el</span><span class="p">:</span>
</span><span id="Calibration.cal_from_html-121"><a href="#Calibration.cal_from_html-121"><span class="linenos">121</span></a>            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="Calibration.cal_from_html-122"><a href="#Calibration.cal_from_html-122"><span class="linenos">122</span></a>                <span class="n">coef_stdev</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</span><span id="Calibration.cal_from_html-123"><a href="#Calibration.cal_from_html-123"><span class="linenos">123</span></a>        <span class="n">inv_coef_el</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;inv_coefficients&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_from_html-124"><a href="#Calibration.cal_from_html-124"><span class="linenos">124</span></a>        <span class="n">inv_coef_val</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Calibration.cal_from_html-125"><a href="#Calibration.cal_from_html-125"><span class="linenos">125</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">inv_coef_el</span><span class="o">.</span><span class="n">children</span><span class="p">:</span>
</span><span id="Calibration.cal_from_html-126"><a href="#Calibration.cal_from_html-126"><span class="linenos">126</span></a>            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="Calibration.cal_from_html-127"><a href="#Calibration.cal_from_html-127"><span class="linenos">127</span></a>                <span class="n">inv_coef_val</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</span><span id="Calibration.cal_from_html-128"><a href="#Calibration.cal_from_html-128"><span class="linenos">128</span></a>        <span class="n">inv_stdev_el</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;inv_stdev&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_from_html-129"><a href="#Calibration.cal_from_html-129"><span class="linenos">129</span></a>        <span class="n">inv_coef_stdev</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Calibration.cal_from_html-130"><a href="#Calibration.cal_from_html-130"><span class="linenos">130</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">inv_stdev_el</span><span class="p">:</span>
</span><span id="Calibration.cal_from_html-131"><a href="#Calibration.cal_from_html-131"><span class="linenos">131</span></a>            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="Calibration.cal_from_html-132"><a href="#Calibration.cal_from_html-132"><span class="linenos">132</span></a>                <span class="n">inv_coef_stdev</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</span><span id="Calibration.cal_from_html-133"><a href="#Calibration.cal_from_html-133"><span class="linenos">133</span></a>        <span class="n">cal_el</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;calibration_data&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_from_html-134"><a href="#Calibration.cal_from_html-134"><span class="linenos">134</span></a>        <span class="n">cal_x</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Calibration.cal_from_html-135"><a href="#Calibration.cal_from_html-135"><span class="linenos">135</span></a>        <span class="n">cal_y</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Calibration.cal_from_html-136"><a href="#Calibration.cal_from_html-136"><span class="linenos">136</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">cal_el</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;cal_data_x&#39;</span><span class="p">):</span>
</span><span id="Calibration.cal_from_html-137"><a href="#Calibration.cal_from_html-137"><span class="linenos">137</span></a>            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="Calibration.cal_from_html-138"><a href="#Calibration.cal_from_html-138"><span class="linenos">138</span></a>                <span class="n">cal_x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</span><span id="Calibration.cal_from_html-139"><a href="#Calibration.cal_from_html-139"><span class="linenos">139</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">cal_el</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;cal_data_y&#39;</span><span class="p">):</span>
</span><span id="Calibration.cal_from_html-140"><a href="#Calibration.cal_from_html-140"><span class="linenos">140</span></a>            <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="Calibration.cal_from_html-141"><a href="#Calibration.cal_from_html-141"><span class="linenos">141</span></a>                <span class="n">cal_y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</span><span id="Calibration.cal_from_html-142"><a href="#Calibration.cal_from_html-142"><span class="linenos">142</span></a>        <span class="n">cal_el</span> <span class="o">=</span> <span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;additional_data&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_from_html-143"><a href="#Calibration.cal_from_html-143"><span class="linenos">143</span></a>        <span class="n">add_data</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Calibration.cal_from_html-144"><a href="#Calibration.cal_from_html-144"><span class="linenos">144</span></a>        <span class="k">if</span> <span class="n">cal_el</span><span class="p">:</span>
</span><span id="Calibration.cal_from_html-145"><a href="#Calibration.cal_from_html-145"><span class="linenos">145</span></a>            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">cal_el</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;additional_data_keys&#39;</span><span class="p">),</span>
</span><span id="Calibration.cal_from_html-146"><a href="#Calibration.cal_from_html-146"><span class="linenos">146</span></a>                <span class="n">cal_el</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;additional_data_values&#39;</span><span class="p">)):</span>
</span><span id="Calibration.cal_from_html-147"><a href="#Calibration.cal_from_html-147"><span class="linenos">147</span></a>                <span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="Calibration.cal_from_html-148"><a href="#Calibration.cal_from_html-148"><span class="linenos">148</span></a>                <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Calibration.cal_from_html-149"><a href="#Calibration.cal_from_html-149"><span class="linenos">149</span></a>                <span class="k">if</span> <span class="n">k</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="Calibration.cal_from_html-150"><a href="#Calibration.cal_from_html-150"><span class="linenos">150</span></a>                    <span class="n">key</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</span><span id="Calibration.cal_from_html-151"><a href="#Calibration.cal_from_html-151"><span class="linenos">151</span></a>                <span class="k">if</span> <span class="n">j</span><span class="o">.</span><span class="n">tagName</span> <span class="o">==</span> <span class="s1">&#39;td&#39;</span><span class="p">:</span>
</span><span id="Calibration.cal_from_html-152"><a href="#Calibration.cal_from_html-152"><span class="linenos">152</span></a>                    <span class="n">value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">j</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</span><span id="Calibration.cal_from_html-153"><a href="#Calibration.cal_from_html-153"><span class="linenos">153</span></a>                <span class="n">add_data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="Calibration.cal_from_html-154"><a href="#Calibration.cal_from_html-154"><span class="linenos">154</span></a>        <span class="k">return</span> <span class="n">Calibration</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">units</span><span class="p">,</span> <span class="n">timestamp</span><span class="p">,</span> <span class="n">coef_val</span><span class="p">,</span> <span class="n">coef_stdev</span><span class="p">,</span>
</span><span id="Calibration.cal_from_html-155"><a href="#Calibration.cal_from_html-155"><span class="linenos">155</span></a>                           <span class="n">inv_coef_val</span><span class="p">,</span> <span class="n">inv_coef_stdev</span><span class="p">,</span>
</span><span id="Calibration.cal_from_html-156"><a href="#Calibration.cal_from_html-156"><span class="linenos">156</span></a>                 <span class="n">cal_x</span><span class="p">,</span> <span class="n">cal_y</span><span class="p">,</span> <span class="n">fit_type</span><span class="o">=</span><span class="n">fit_type</span><span class="p">,</span> <span class="n">fit_eqn_str</span><span class="o">=</span><span class="n">fit_eqn_str</span><span class="p">,</span>
</span><span id="Calibration.cal_from_html-157"><a href="#Calibration.cal_from_html-157"><span class="linenos">157</span></a>                           <span class="n">fit_ceof_lbls</span><span class="o">=</span><span class="n">coef_lbls</span><span class="p">,</span> <span class="n">additional_data</span><span class="o">=</span><span class="n">add_data</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>This takes in an html str, parses it and returns a new
calibration.</p>

<h2 id="parameters">Parameters</h2>

<p>html: str
    The html to be parsed to create the calibration object</p>

<h2 id="returns">Returns</h2>

<p>calibration: calibration
    a calibration object.</p>
</div>


                            </div>
                            <div id="Calibration.cal_to_html" class="classattr">
                                        <input id="Calibration.cal_to_html-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">cal_to_html</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Calibration.cal_to_html-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Calibration.cal_to_html"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Calibration.cal_to_html-159"><a href="#Calibration.cal_to_html-159"><span class="linenos">159</span></a>    <span class="k">def</span> <span class="nf">cal_to_html</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Calibration.cal_to_html-160"><a href="#Calibration.cal_to_html-160"><span class="linenos">160</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;This routine creates an html str that would be human-readable in a</span>
</span><span id="Calibration.cal_to_html-161"><a href="#Calibration.cal_to_html-161"><span class="linenos">161</span></a><span class="sd">        browser detailing the calibration. This can be written to a file to</span>
</span><span id="Calibration.cal_to_html-162"><a href="#Calibration.cal_to_html-162"><span class="linenos">162</span></a><span class="sd">        store the calibration.</span>
</span><span id="Calibration.cal_to_html-163"><a href="#Calibration.cal_to_html-163"><span class="linenos">163</span></a>
</span><span id="Calibration.cal_to_html-164"><a href="#Calibration.cal_to_html-164"><span class="linenos">164</span></a><span class="sd">        Returns</span>
</span><span id="Calibration.cal_to_html-165"><a href="#Calibration.cal_to_html-165"><span class="linenos">165</span></a><span class="sd">        -------</span>
</span><span id="Calibration.cal_to_html-166"><a href="#Calibration.cal_to_html-166"><span class="linenos">166</span></a><span class="sd">        calib_div: str</span>
</span><span id="Calibration.cal_to_html-167"><a href="#Calibration.cal_to_html-167"><span class="linenos">167</span></a><span class="sd">            string containing the html detailing the calibration.</span>
</span><span id="Calibration.cal_to_html-168"><a href="#Calibration.cal_to_html-168"><span class="linenos">168</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Calibration.cal_to_html-169"><a href="#Calibration.cal_to_html-169"><span class="linenos">169</span></a>        <span class="kn">from</span> <span class="nn">AdvancedHTMLParser</span> <span class="kn">import</span> <span class="n">AdvancedTag</span> <span class="k">as</span> <span class="n">Domel</span>
</span><span id="Calibration.cal_to_html-170"><a href="#Calibration.cal_to_html-170"><span class="linenos">170</span></a>        <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
</span><span id="Calibration.cal_to_html-171"><a href="#Calibration.cal_to_html-171"><span class="linenos">171</span></a>        <span class="n">calib_div</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-172"><a href="#Calibration.cal_to_html-172"><span class="linenos">172</span></a>        <span class="n">calib_title</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;h3&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-173"><a href="#Calibration.cal_to_html-173"><span class="linenos">173</span></a>        <span class="n">calib_title</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;Calibration of &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
</span><span id="Calibration.cal_to_html-174"><a href="#Calibration.cal_to_html-174"><span class="linenos">174</span></a>        <span class="n">calib_div</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">calib_title</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-175"><a href="#Calibration.cal_to_html-175"><span class="linenos">175</span></a>
</span><span id="Calibration.cal_to_html-176"><a href="#Calibration.cal_to_html-176"><span class="linenos">176</span></a>        <span class="n">calib_info</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-177"><a href="#Calibration.cal_to_html-177"><span class="linenos">177</span></a>        <span class="n">calib_info</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;calib_info&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-178"><a href="#Calibration.cal_to_html-178"><span class="linenos">178</span></a>        <span class="n">calib_info</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;calib_info&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-179"><a href="#Calibration.cal_to_html-179"><span class="linenos">179</span></a>        <span class="n">calib_info</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;border&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-180"><a href="#Calibration.cal_to_html-180"><span class="linenos">180</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-181"><a href="#Calibration.cal_to_html-181"><span class="linenos">181</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;&lt;th&gt;Calibration of&lt;/th&gt;&lt;th&gt;Units returned&lt;/th&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-182"><a href="#Calibration.cal_to_html-182"><span class="linenos">182</span></a>                           <span class="s1">&#39;&lt;th&gt;Fit function&lt;/th&gt;&lt;th&gt;Time&lt;/th&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-183"><a href="#Calibration.cal_to_html-183"><span class="linenos">183</span></a>                           <span class="s1">&#39;&lt;th&gt;Timestamp&lt;/th&gt;&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-184"><a href="#Calibration.cal_to_html-184"><span class="linenos">184</span></a>        <span class="n">calib_info</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-185"><a href="#Calibration.cal_to_html-185"><span class="linenos">185</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-186"><a href="#Calibration.cal_to_html-186"><span class="linenos">186</span></a>        <span class="n">isotime</span> <span class="o">=</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">))</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
</span><span id="Calibration.cal_to_html-187"><a href="#Calibration.cal_to_html-187"><span class="linenos">187</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;&lt;td id = &quot;name&quot;&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-188"><a href="#Calibration.cal_to_html-188"><span class="linenos">188</span></a>                           <span class="s1">&#39;&lt;td id = &quot;units&quot;&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">units</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-189"><a href="#Calibration.cal_to_html-189"><span class="linenos">189</span></a>                           <span class="s1">&#39;&lt;td id = &quot;fit_type&quot;&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fit_type</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-190"><a href="#Calibration.cal_to_html-190"><span class="linenos">190</span></a>                           <span class="s1">&#39;&lt;td id = &quot;iso_time&quot;&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">isotime</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-191"><a href="#Calibration.cal_to_html-191"><span class="linenos">191</span></a>                           <span class="s1">&#39;&lt;td id = &quot;timestamp&quot;&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timestamp</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-192"><a href="#Calibration.cal_to_html-192"><span class="linenos">192</span></a>        <span class="n">calib_info</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-193"><a href="#Calibration.cal_to_html-193"><span class="linenos">193</span></a>        <span class="n">calib_div</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">calib_info</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-194"><a href="#Calibration.cal_to_html-194"><span class="linenos">194</span></a>
</span><span id="Calibration.cal_to_html-195"><a href="#Calibration.cal_to_html-195"><span class="linenos">195</span></a>        <span class="n">p</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;p&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-196"><a href="#Calibration.cal_to_html-196"><span class="linenos">196</span></a>        <span class="n">p</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;fit_eqn_str&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-197"><a href="#Calibration.cal_to_html-197"><span class="linenos">197</span></a>        <span class="n">p</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;Fit Equation: &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_eqn_str</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-198"><a href="#Calibration.cal_to_html-198"><span class="linenos">198</span></a>        <span class="n">calib_div</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-199"><a href="#Calibration.cal_to_html-199"><span class="linenos">199</span></a>
</span><span id="Calibration.cal_to_html-200"><a href="#Calibration.cal_to_html-200"><span class="linenos">200</span></a>        <span class="n">parameters</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-201"><a href="#Calibration.cal_to_html-201"><span class="linenos">201</span></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;parameters&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-202"><a href="#Calibration.cal_to_html-202"><span class="linenos">202</span></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;parameters&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-203"><a href="#Calibration.cal_to_html-203"><span class="linenos">203</span></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;border&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-204"><a href="#Calibration.cal_to_html-204"><span class="linenos">204</span></a>        <span class="n">caption</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;caption&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-205"><a href="#Calibration.cal_to_html-205"><span class="linenos">205</span></a>        <span class="n">caption</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;Parameters&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-206"><a href="#Calibration.cal_to_html-206"><span class="linenos">206</span></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">caption</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-207"><a href="#Calibration.cal_to_html-207"><span class="linenos">207</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-208"><a href="#Calibration.cal_to_html-208"><span class="linenos">208</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;coef_labels&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-209"><a href="#Calibration.cal_to_html-209"><span class="linenos">209</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;Labels&lt;/th&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-210"><a href="#Calibration.cal_to_html-210"><span class="linenos">210</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_coef_lbls</span><span class="p">:</span>
</span><span id="Calibration.cal_to_html-211"><a href="#Calibration.cal_to_html-211"><span class="linenos">211</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-212"><a href="#Calibration.cal_to_html-212"><span class="linenos">212</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-213"><a href="#Calibration.cal_to_html-213"><span class="linenos">213</span></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-214"><a href="#Calibration.cal_to_html-214"><span class="linenos">214</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-215"><a href="#Calibration.cal_to_html-215"><span class="linenos">215</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;coefficients&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-216"><a href="#Calibration.cal_to_html-216"><span class="linenos">216</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;Coefficients&lt;/th&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-217"><a href="#Calibration.cal_to_html-217"><span class="linenos">217</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">param</span><span class="p">:</span>
</span><span id="Calibration.cal_to_html-218"><a href="#Calibration.cal_to_html-218"><span class="linenos">218</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-219"><a href="#Calibration.cal_to_html-219"><span class="linenos">219</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-220"><a href="#Calibration.cal_to_html-220"><span class="linenos">220</span></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-221"><a href="#Calibration.cal_to_html-221"><span class="linenos">221</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-222"><a href="#Calibration.cal_to_html-222"><span class="linenos">222</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;stdev&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-223"><a href="#Calibration.cal_to_html-223"><span class="linenos">223</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;Standard Deviation&lt;/th&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-224"><a href="#Calibration.cal_to_html-224"><span class="linenos">224</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_stdev</span><span class="p">:</span>
</span><span id="Calibration.cal_to_html-225"><a href="#Calibration.cal_to_html-225"><span class="linenos">225</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-226"><a href="#Calibration.cal_to_html-226"><span class="linenos">226</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-227"><a href="#Calibration.cal_to_html-227"><span class="linenos">227</span></a>        <span class="n">parameters</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-228"><a href="#Calibration.cal_to_html-228"><span class="linenos">228</span></a>        <span class="n">calib_div</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-229"><a href="#Calibration.cal_to_html-229"><span class="linenos">229</span></a>
</span><span id="Calibration.cal_to_html-230"><a href="#Calibration.cal_to_html-230"><span class="linenos">230</span></a>        <span class="n">inverse</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-231"><a href="#Calibration.cal_to_html-231"><span class="linenos">231</span></a>        <span class="n">inverse</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;inverse&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-232"><a href="#Calibration.cal_to_html-232"><span class="linenos">232</span></a>        <span class="n">inverse</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;inverse&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-233"><a href="#Calibration.cal_to_html-233"><span class="linenos">233</span></a>        <span class="n">inverse</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;border&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-234"><a href="#Calibration.cal_to_html-234"><span class="linenos">234</span></a>        <span class="n">caption</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;caption&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-235"><a href="#Calibration.cal_to_html-235"><span class="linenos">235</span></a>        <span class="n">caption</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;Inverse Parameters&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-236"><a href="#Calibration.cal_to_html-236"><span class="linenos">236</span></a>        <span class="n">inverse</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">caption</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-237"><a href="#Calibration.cal_to_html-237"><span class="linenos">237</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-238"><a href="#Calibration.cal_to_html-238"><span class="linenos">238</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;coef_labels&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-239"><a href="#Calibration.cal_to_html-239"><span class="linenos">239</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;Labels&lt;/th&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-240"><a href="#Calibration.cal_to_html-240"><span class="linenos">240</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_coef_lbls</span><span class="p">:</span>
</span><span id="Calibration.cal_to_html-241"><a href="#Calibration.cal_to_html-241"><span class="linenos">241</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-242"><a href="#Calibration.cal_to_html-242"><span class="linenos">242</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-243"><a href="#Calibration.cal_to_html-243"><span class="linenos">243</span></a>        <span class="n">inverse</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-244"><a href="#Calibration.cal_to_html-244"><span class="linenos">244</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-245"><a href="#Calibration.cal_to_html-245"><span class="linenos">245</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;inv_coefficients&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-246"><a href="#Calibration.cal_to_html-246"><span class="linenos">246</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;Coefficients&lt;/th&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-247"><a href="#Calibration.cal_to_html-247"><span class="linenos">247</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_inv</span><span class="p">:</span>
</span><span id="Calibration.cal_to_html-248"><a href="#Calibration.cal_to_html-248"><span class="linenos">248</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-249"><a href="#Calibration.cal_to_html-249"><span class="linenos">249</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-250"><a href="#Calibration.cal_to_html-250"><span class="linenos">250</span></a>        <span class="n">inverse</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-251"><a href="#Calibration.cal_to_html-251"><span class="linenos">251</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-252"><a href="#Calibration.cal_to_html-252"><span class="linenos">252</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;inv_stdev&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-253"><a href="#Calibration.cal_to_html-253"><span class="linenos">253</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;Standard Deviation&lt;/th&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-254"><a href="#Calibration.cal_to_html-254"><span class="linenos">254</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_inv_stdev</span><span class="p">:</span>
</span><span id="Calibration.cal_to_html-255"><a href="#Calibration.cal_to_html-255"><span class="linenos">255</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-256"><a href="#Calibration.cal_to_html-256"><span class="linenos">256</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-257"><a href="#Calibration.cal_to_html-257"><span class="linenos">257</span></a>        <span class="n">inverse</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-258"><a href="#Calibration.cal_to_html-258"><span class="linenos">258</span></a>        <span class="n">calib_div</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">inverse</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-259"><a href="#Calibration.cal_to_html-259"><span class="linenos">259</span></a>
</span><span id="Calibration.cal_to_html-260"><a href="#Calibration.cal_to_html-260"><span class="linenos">260</span></a>        <span class="n">fit_data</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-261"><a href="#Calibration.cal_to_html-261"><span class="linenos">261</span></a>        <span class="n">fit_data</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;calibration_data&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-262"><a href="#Calibration.cal_to_html-262"><span class="linenos">262</span></a>        <span class="n">fit_data</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;calibration_data&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-263"><a href="#Calibration.cal_to_html-263"><span class="linenos">263</span></a>        <span class="n">fit_data</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;border&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-264"><a href="#Calibration.cal_to_html-264"><span class="linenos">264</span></a>        <span class="n">caption</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;caption&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-265"><a href="#Calibration.cal_to_html-265"><span class="linenos">265</span></a>        <span class="n">caption</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;Calibration Data&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-266"><a href="#Calibration.cal_to_html-266"><span class="linenos">266</span></a>        <span class="n">fit_data</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">caption</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-267"><a href="#Calibration.cal_to_html-267"><span class="linenos">267</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-268"><a href="#Calibration.cal_to_html-268"><span class="linenos">268</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;cal_data_x&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-269"><a href="#Calibration.cal_to_html-269"><span class="linenos">269</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;X Calibration Data&lt;/th&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-270"><a href="#Calibration.cal_to_html-270"><span class="linenos">270</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cal_data_x</span><span class="p">:</span>
</span><span id="Calibration.cal_to_html-271"><a href="#Calibration.cal_to_html-271"><span class="linenos">271</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-272"><a href="#Calibration.cal_to_html-272"><span class="linenos">272</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-273"><a href="#Calibration.cal_to_html-273"><span class="linenos">273</span></a>        <span class="n">fit_data</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-274"><a href="#Calibration.cal_to_html-274"><span class="linenos">274</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-275"><a href="#Calibration.cal_to_html-275"><span class="linenos">275</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;cal_data_y&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-276"><a href="#Calibration.cal_to_html-276"><span class="linenos">276</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s1">&#39;&lt;th&gt;Y Calibration Data&lt;/th&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-277"><a href="#Calibration.cal_to_html-277"><span class="linenos">277</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">cal_data_y</span><span class="p">:</span>
</span><span id="Calibration.cal_to_html-278"><a href="#Calibration.cal_to_html-278"><span class="linenos">278</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-279"><a href="#Calibration.cal_to_html-279"><span class="linenos">279</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-280"><a href="#Calibration.cal_to_html-280"><span class="linenos">280</span></a>        <span class="n">fit_data</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-281"><a href="#Calibration.cal_to_html-281"><span class="linenos">281</span></a>        <span class="n">calib_div</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">fit_data</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-282"><a href="#Calibration.cal_to_html-282"><span class="linenos">282</span></a>
</span><span id="Calibration.cal_to_html-283"><a href="#Calibration.cal_to_html-283"><span class="linenos">283</span></a>        <span class="n">add_data</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;table&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-284"><a href="#Calibration.cal_to_html-284"><span class="linenos">284</span></a>        <span class="n">add_data</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span><span class="s1">&#39;additonal_data&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-285"><a href="#Calibration.cal_to_html-285"><span class="linenos">285</span></a>        <span class="n">add_data</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="s1">&#39;additional_data&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-286"><a href="#Calibration.cal_to_html-286"><span class="linenos">286</span></a>        <span class="n">add_data</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;border&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-287"><a href="#Calibration.cal_to_html-287"><span class="linenos">287</span></a>        <span class="n">caption</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;caption&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-288"><a href="#Calibration.cal_to_html-288"><span class="linenos">288</span></a>        <span class="n">caption</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="s1">&#39;Additional Data&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-289"><a href="#Calibration.cal_to_html-289"><span class="linenos">289</span></a>        <span class="n">add_data</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">caption</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-290"><a href="#Calibration.cal_to_html-290"><span class="linenos">290</span></a>        <span class="n">tr</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-291"><a href="#Calibration.cal_to_html-291"><span class="linenos">291</span></a>        <span class="n">tr</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span><span class="s1">&#39;additional_data_keys&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-292"><a href="#Calibration.cal_to_html-292"><span class="linenos">292</span></a>        <span class="n">tr2</span> <span class="o">=</span> <span class="n">Domel</span><span class="p">(</span><span class="s1">&#39;tr&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-293"><a href="#Calibration.cal_to_html-293"><span class="linenos">293</span></a>        <span class="n">tr2</span><span class="o">.</span><span class="n">setAttribute</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;additional_data_values&#39;</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-294"><a href="#Calibration.cal_to_html-294"><span class="linenos">294</span></a>        <span class="n">innerstr</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="Calibration.cal_to_html-295"><a href="#Calibration.cal_to_html-295"><span class="linenos">295</span></a>        <span class="n">innerstr2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span id="Calibration.cal_to_html-296"><a href="#Calibration.cal_to_html-296"><span class="linenos">296</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">additional_data</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="Calibration.cal_to_html-297"><a href="#Calibration.cal_to_html-297"><span class="linenos">297</span></a>            <span class="n">innerstr</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-298"><a href="#Calibration.cal_to_html-298"><span class="linenos">298</span></a>            <span class="n">innerstr2</span> <span class="o">+=</span> <span class="s1">&#39;&lt;td&gt;&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">additional_data</span><span class="p">[</span><span class="n">k</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;&lt;/td&gt;&#39;</span>
</span><span id="Calibration.cal_to_html-299"><a href="#Calibration.cal_to_html-299"><span class="linenos">299</span></a>        <span class="k">if</span> <span class="n">innerstr</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="Calibration.cal_to_html-300"><a href="#Calibration.cal_to_html-300"><span class="linenos">300</span></a>            <span class="n">tr</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-301"><a href="#Calibration.cal_to_html-301"><span class="linenos">301</span></a>            <span class="n">tr2</span><span class="o">.</span><span class="n">appendInnerHTML</span><span class="p">(</span><span class="n">innerstr2</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-302"><a href="#Calibration.cal_to_html-302"><span class="linenos">302</span></a>            <span class="n">add_data</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-303"><a href="#Calibration.cal_to_html-303"><span class="linenos">303</span></a>            <span class="n">add_data</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">tr2</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-304"><a href="#Calibration.cal_to_html-304"><span class="linenos">304</span></a>            <span class="n">calib_div</span><span class="o">.</span><span class="n">appendChild</span><span class="p">(</span><span class="n">add_data</span><span class="p">)</span>
</span><span id="Calibration.cal_to_html-305"><a href="#Calibration.cal_to_html-305"><span class="linenos">305</span></a>        <span class="k">return</span> <span class="n">calib_div</span><span class="o">.</span><span class="n">asHTML</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>This routine creates an html str that would be human-readable in a
browser detailing the calibration. This can be written to a file to
store the calibration.</p>

<h2 id="returns">Returns</h2>

<p>calib_div: str
    string containing the html detailing the calibration.</p>
</div>


                            </div>
                            <div id="Calibration.cal_apply" class="classattr">
                                        <input id="Calibration.cal_apply-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">cal_apply</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">data</span>, </span><span class="param"><span class="n">stdev</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Calibration.cal_apply-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Calibration.cal_apply"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Calibration.cal_apply-398"><a href="#Calibration.cal_apply-398"><span class="linenos">398</span></a>    <span class="k">def</span> <span class="nf">cal_apply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">stdev</span><span class="p">):</span>
</span><span id="Calibration.cal_apply-399"><a href="#Calibration.cal_apply-399"><span class="linenos">399</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cal_apply</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">stdev</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Calibration.cal_inv" class="classattr">
                                        <input id="Calibration.cal_inv-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">cal_inv</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">data</span>, </span><span class="param"><span class="n">stdev</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Calibration.cal_inv-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Calibration.cal_inv"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Calibration.cal_inv-401"><a href="#Calibration.cal_inv-401"><span class="linenos">401</span></a>    <span class="k">def</span> <span class="nf">cal_inv</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">stdev</span><span class="p">):</span>
</span><span id="Calibration.cal_inv-402"><a href="#Calibration.cal_inv-402"><span class="linenos">402</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cal_apply</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">stdev</span><span class="p">,</span> <span class="n">inverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="Calibrations">
                            <input id="Calibrations-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Calibrations</span>:

                <label class="view-source-button" for="Calibrations-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Calibrations"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Calibrations-404"><a href="#Calibrations-404"><span class="linenos">404</span></a><span class="k">class</span> <span class="nc">Calibrations</span><span class="p">:</span>
</span><span id="Calibrations-405"><a href="#Calibrations-405"><span class="linenos">405</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Calibrations-406"><a href="#Calibrations-406"><span class="linenos">406</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_cal</span><span class="p">(</span><span class="s1">&#39;balance&#39;</span><span class="p">)</span>
</span><span id="Calibrations-407"><a href="#Calibrations-407"><span class="linenos">407</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">barriers_open</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_cal</span><span class="p">(</span><span class="s1">&#39;barriers_open&#39;</span><span class="p">)</span>
</span><span id="Calibrations-408"><a href="#Calibrations-408"><span class="linenos">408</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">barriers_close</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_cal</span><span class="p">(</span><span class="s1">&#39;barriers_close&#39;</span><span class="p">)</span>
</span><span id="Calibrations-409"><a href="#Calibrations-409"><span class="linenos">409</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_cal</span><span class="p">(</span><span class="s1">&#39;temperature&#39;</span><span class="p">)</span>
</span><span id="Calibrations-410"><a href="#Calibrations-410"><span class="linenos">410</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">speed_open</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_cal</span><span class="p">(</span><span class="s1">&#39;speed_open&#39;</span><span class="p">)</span>
</span><span id="Calibrations-411"><a href="#Calibrations-411"><span class="linenos">411</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">speed_close</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_cal</span><span class="p">(</span><span class="s1">&#39;speed_close&#39;</span><span class="p">)</span>
</span><span id="Calibrations-412"><a href="#Calibrations-412"><span class="linenos">412</span></a>
</span><span id="Calibrations-413"><a href="#Calibrations-413"><span class="linenos">413</span></a>    <span class="k">def</span> <span class="nf">_create_cal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="Calibrations-414"><a href="#Calibrations-414"><span class="linenos">414</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Utility function to that returns the latest calibration of type</span>
</span><span id="Calibrations-415"><a href="#Calibrations-415"><span class="linenos">415</span></a><span class="sd">        name or a default calibration if no actual calibration is found.</span>
</span><span id="Calibrations-416"><a href="#Calibrations-416"><span class="linenos">416</span></a>
</span><span id="Calibrations-417"><a href="#Calibrations-417"><span class="linenos">417</span></a><span class="sd">        Parameters</span>
</span><span id="Calibrations-418"><a href="#Calibrations-418"><span class="linenos">418</span></a><span class="sd">        ----------</span>
</span><span id="Calibrations-419"><a href="#Calibrations-419"><span class="linenos">419</span></a><span class="sd">        name: str</span>
</span><span id="Calibrations-420"><a href="#Calibrations-420"><span class="linenos">420</span></a><span class="sd">            string name for the calibration type (current options: &#39;balance&#39;,</span>
</span><span id="Calibrations-421"><a href="#Calibrations-421"><span class="linenos">421</span></a><span class="sd">            &#39;barriers_open&#39;, &#39;barriers_close&#39;, &#39;speed_open&#39;,</span>
</span><span id="Calibrations-422"><a href="#Calibrations-422"><span class="linenos">422</span></a><span class="sd">            &#39;speed_close&#39; or &#39;temperature&#39;).</span>
</span><span id="Calibrations-423"><a href="#Calibrations-423"><span class="linenos">423</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Calibrations-424"><a href="#Calibrations-424"><span class="linenos">424</span></a>        <span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</span><span id="Calibrations-425"><a href="#Calibrations-425"><span class="linenos">425</span></a>        <span class="n">basepath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;~/.Trough/calibrations&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">expanduser</span><span class="p">()</span>
</span><span id="Calibrations-426"><a href="#Calibrations-426"><span class="linenos">426</span></a>        <span class="n">fullpath</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span id="Calibrations-427"><a href="#Calibrations-427"><span class="linenos">427</span></a>        <span class="n">calib</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Calibrations-428"><a href="#Calibrations-428"><span class="linenos">428</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">basepath</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
</span><span id="Calibrations-429"><a href="#Calibrations-429"><span class="linenos">429</span></a>            <span class="n">basepath</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Calibrations-430"><a href="#Calibrations-430"><span class="linenos">430</span></a>        <span class="n">filelist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">basepath</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;_*.trh.cal.html&#39;</span><span class="p">))</span>
</span><span id="Calibrations-431"><a href="#Calibrations-431"><span class="linenos">431</span></a>        <span class="n">filelist</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
</span><span id="Calibrations-432"><a href="#Calibrations-432"><span class="linenos">432</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">filelist</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Calibrations-433"><a href="#Calibrations-433"><span class="linenos">433</span></a>            <span class="n">fullpath</span> <span class="o">=</span> <span class="n">filelist</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Calibrations-434"><a href="#Calibrations-434"><span class="linenos">434</span></a>            <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fullpath</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span><span id="Calibrations-435"><a href="#Calibrations-435"><span class="linenos">435</span></a>            <span class="n">temphtml</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="Calibrations-436"><a href="#Calibrations-436"><span class="linenos">436</span></a>            <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Calibrations-437"><a href="#Calibrations-437"><span class="linenos">437</span></a>            <span class="n">calib</span> <span class="o">=</span> <span class="n">Calibration</span><span class="o">.</span><span class="n">cal_from_html</span><span class="p">(</span><span class="n">temphtml</span><span class="p">)</span>
</span><span id="Calibrations-438"><a href="#Calibrations-438"><span class="linenos">438</span></a>        <span class="k">if</span> <span class="n">fullpath</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
</span><span id="Calibrations-439"><a href="#Calibrations-439"><span class="linenos">439</span></a>            <span class="c1"># we have no calibration so will use a default.</span>
</span><span id="Calibrations-440"><a href="#Calibrations-440"><span class="linenos">440</span></a>            <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;balance&#39;</span><span class="p">:</span>
</span><span id="Calibrations-441"><a href="#Calibrations-441"><span class="linenos">441</span></a>                <span class="n">calib</span> <span class="o">=</span> <span class="n">Calibration</span><span class="p">(</span><span class="s1">&#39;balance&#39;</span><span class="p">,</span> <span class="s1">&#39;mg&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.875</span><span class="p">,</span>
</span><span id="Calibrations-442"><a href="#Calibrations-442"><span class="linenos">442</span></a>                                   <span class="mf">12.5</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.08</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],[],</span> <span class="p">[])</span>
</span><span id="Calibrations-443"><a href="#Calibrations-443"><span class="linenos">443</span></a>            <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;barriers_open&#39;</span><span class="p">:</span>
</span><span id="Calibrations-444"><a href="#Calibrations-444"><span class="linenos">444</span></a>                <span class="n">calib</span> <span class="o">=</span> <span class="n">Calibration</span><span class="p">(</span><span class="s1">&#39;barriers_open&#39;</span><span class="p">,</span> <span class="s1">&#39;cm&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="Calibrations-445"><a href="#Calibrations-445"><span class="linenos">445</span></a>                                    <span class="p">[</span><span class="mf">2.82464693</span><span class="p">,</span> <span class="mf">6.69130383</span><span class="p">,</span> <span class="mf">15.2853999</span><span class="p">,</span> <span class="o">-</span><span class="mf">21.1208151</span><span class="p">,</span> <span class="mf">8.88980052</span><span class="p">],</span>
</span><span id="Calibrations-446"><a href="#Calibrations-446"><span class="linenos">446</span></a>                                    <span class="p">[</span><span class="mf">0.00924811</span><span class="p">,</span> <span class="mf">0.14164452</span><span class="p">,</span> <span class="mf">0.62535698</span><span class="p">,</span> <span class="mf">0.96585892</span><span class="p">,</span> <span class="mf">0.47972807</span><span class="p">],</span>
</span><span id="Calibrations-447"><a href="#Calibrations-447"><span class="linenos">447</span></a>                                    <span class="p">[</span><span class="o">-</span><span class="mf">0.55434678</span><span class="p">,</span> <span class="mf">0.28071635</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.03813755</span><span class="p">,</span> <span class="mf">0.00318368</span><span class="p">,</span> <span class="o">-</span><span class="mf">9.0986e-05</span><span class="p">],</span>
</span><span id="Calibrations-448"><a href="#Calibrations-448"><span class="linenos">448</span></a>                                    <span class="p">[</span><span class="mf">0.01263813</span><span class="p">,</span> <span class="mf">0.00817224</span><span class="p">,</span> <span class="mf">0.00180902</span><span class="p">,</span> <span class="mf">1.6526e-04</span><span class="p">,</span> <span class="mf">5.3290e-06</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[],</span>
</span><span id="Calibrations-449"><a href="#Calibrations-449"><span class="linenos">449</span></a>                                    <span class="n">additional_data</span><span class="o">=</span><span class="p">{</span>
</span><span id="Calibrations-450"><a href="#Calibrations-450"><span class="linenos">450</span></a>                                    <span class="s2">&quot;trough width (cm)&quot;</span><span class="p">:</span><span class="mf">9.525</span><span class="p">,</span>
</span><span id="Calibrations-451"><a href="#Calibrations-451"><span class="linenos">451</span></a>                                    <span class="s2">&quot;skimmer correction (cm^2)&quot;</span><span class="p">:</span><span class="o">-</span><span class="mf">0.5</span><span class="p">})</span>
</span><span id="Calibrations-452"><a href="#Calibrations-452"><span class="linenos">452</span></a>            <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;barriers_close&#39;</span><span class="p">:</span>
</span><span id="Calibrations-453"><a href="#Calibrations-453"><span class="linenos">453</span></a>                <span class="n">calib</span> <span class="o">=</span> <span class="n">Calibration</span><span class="p">(</span><span class="s1">&#39;barriers_close&#39;</span><span class="p">,</span> <span class="s1">&#39;cm&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
</span><span id="Calibrations-454"><a href="#Calibrations-454"><span class="linenos">454</span></a>                                    <span class="p">[</span><span class="mf">2.83251612</span><span class="p">,</span> <span class="mf">8.41377796</span><span class="p">,</span> <span class="mf">8.14408400</span><span class="p">,</span> <span class="o">-</span><span class="mf">10.8669094</span><span class="p">,</span> <span class="mf">4.00818630</span><span class="p">],</span>
</span><span id="Calibrations-455"><a href="#Calibrations-455"><span class="linenos">455</span></a>                                    <span class="p">[</span><span class="mf">0.00971215</span><span class="p">,</span> <span class="mf">0.19059196</span><span class="p">,</span> <span class="mf">0.94421041</span><span class="p">,</span> <span class="mf">1.52692244</span><span class="p">,</span> <span class="mf">0.78492412</span><span class="p">],</span>
</span><span id="Calibrations-456"><a href="#Calibrations-456"><span class="linenos">456</span></a>                                    <span class="p">[</span><span class="o">-</span><span class="mf">0.39502418</span><span class="p">,</span> <span class="mf">0.17268411</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.01457292</span><span class="p">,</span> <span class="mf">0.00106258</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.3141e-05</span><span class="p">],</span>
</span><span id="Calibrations-457"><a href="#Calibrations-457"><span class="linenos">457</span></a>                                    <span class="p">[</span><span class="mf">0.01786868</span><span class="p">,</span> <span class="mf">0.01221316</span><span class="p">,</span> <span class="mf">0.00278932</span><span class="p">,</span> <span class="mf">2.6067e-04</span><span class="p">,</span> <span class="mf">8.5808e-06</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[],</span>
</span><span id="Calibrations-458"><a href="#Calibrations-458"><span class="linenos">458</span></a>                                    <span class="n">additional_data</span><span class="o">=</span><span class="p">{</span>
</span><span id="Calibrations-459"><a href="#Calibrations-459"><span class="linenos">459</span></a>                                    <span class="s2">&quot;trough width (cm)&quot;</span><span class="p">:</span> <span class="mf">9.525</span><span class="p">,</span>
</span><span id="Calibrations-460"><a href="#Calibrations-460"><span class="linenos">460</span></a>                                    <span class="s2">&quot;skimmer correction (cm^2)&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">})</span>
</span><span id="Calibrations-461"><a href="#Calibrations-461"><span class="linenos">461</span></a>            <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;temperature&#39;</span><span class="p">:</span>
</span><span id="Calibrations-462"><a href="#Calibrations-462"><span class="linenos">462</span></a>                <span class="n">calib</span> <span class="o">=</span> <span class="n">Calibration</span><span class="p">(</span><span class="s1">&#39;temperature&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.083</span><span class="p">,</span> <span class="mf">6.555</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
</span><span id="Calibrations-463"><a href="#Calibrations-463"><span class="linenos">463</span></a>                                    <span class="p">[</span><span class="mf">0.9521</span><span class="p">,</span> <span class="mf">0.14786</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[])</span>
</span><span id="Calibrations-464"><a href="#Calibrations-464"><span class="linenos">464</span></a>            <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;speed_open&#39;</span><span class="p">:</span>
</span><span id="Calibrations-465"><a href="#Calibrations-465"><span class="linenos">465</span></a>                <span class="n">calib</span> <span class="o">=</span> <span class="n">Calibration</span><span class="p">(</span><span class="s1">&#39;speed_open&#39;</span><span class="p">,</span> <span class="s1">&#39;cm/min&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">9.85</span><span class="p">],</span>
</span><span id="Calibrations-466"><a href="#Calibrations-466"><span class="linenos">466</span></a>                                    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.1015</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[])</span>
</span><span id="Calibrations-467"><a href="#Calibrations-467"><span class="linenos">467</span></a>            <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;speed_close&#39;</span><span class="p">:</span>
</span><span id="Calibrations-468"><a href="#Calibrations-468"><span class="linenos">468</span></a>                <span class="n">calib</span> <span class="o">=</span> <span class="n">Calibration</span><span class="p">(</span><span class="s1">&#39;speed_close&#39;</span><span class="p">,</span> <span class="s1">&#39;cm/min&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">6.57</span><span class="p">],</span>
</span><span id="Calibrations-469"><a href="#Calibrations-469"><span class="linenos">469</span></a>                                    <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.1523</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[],</span> <span class="p">[])</span>
</span><span id="Calibrations-470"><a href="#Calibrations-470"><span class="linenos">470</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Calibrations-471"><a href="#Calibrations-471"><span class="linenos">471</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Valid names are &quot;balance&quot;, &quot;barriers_open&quot;, &#39;</span>
</span><span id="Calibrations-472"><a href="#Calibrations-472"><span class="linenos">472</span></a>                                 <span class="s1">&#39;&quot;barriers_close&quot;, &quot;temperature&quot;, &quot;speed_open&quot;&#39;</span>
</span><span id="Calibrations-473"><a href="#Calibrations-473"><span class="linenos">473</span></a>                                 <span class="s1">&#39;, or &quot;speed_close&quot;.&#39;</span><span class="p">)</span>
</span><span id="Calibrations-474"><a href="#Calibrations-474"><span class="linenos">474</span></a>        <span class="k">return</span> <span class="n">calib</span>
</span><span id="Calibrations-475"><a href="#Calibrations-475"><span class="linenos">475</span></a>
</span><span id="Calibrations-476"><a href="#Calibrations-476"><span class="linenos">476</span></a>    <span class="k">def</span> <span class="nf">read_cal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="Calibrations-477"><a href="#Calibrations-477"><span class="linenos">477</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;This routine reads in a calibration file. If it is the standard</span>
</span><span id="Calibrations-478"><a href="#Calibrations-478"><span class="linenos">478</span></a><span class="sd">        html file it uses `calibration.cal_from_html()` operation to convert</span>
</span><span id="Calibrations-479"><a href="#Calibrations-479"><span class="linenos">479</span></a><span class="sd">        it to a calibration.</span>
</span><span id="Calibrations-480"><a href="#Calibrations-480"><span class="linenos">480</span></a>
</span><span id="Calibrations-481"><a href="#Calibrations-481"><span class="linenos">481</span></a><span class="sd">        Parameters</span>
</span><span id="Calibrations-482"><a href="#Calibrations-482"><span class="linenos">482</span></a><span class="sd">        ----------</span>
</span><span id="Calibrations-483"><a href="#Calibrations-483"><span class="linenos">483</span></a><span class="sd">        name: str</span>
</span><span id="Calibrations-484"><a href="#Calibrations-484"><span class="linenos">484</span></a><span class="sd">            either the basename (current options: &#39;balance&#39;, &#39;barriers_open&#39;,</span>
</span><span id="Calibrations-485"><a href="#Calibrations-485"><span class="linenos">485</span></a><span class="sd">             &#39;barriers_close&#39;, &#39;speed_open&#39;, &#39;speed_close&#39; or</span>
</span><span id="Calibrations-486"><a href="#Calibrations-486"><span class="linenos">486</span></a><span class="sd">            &#39;temperature&#39;) or a string representation of the path to the</span>
</span><span id="Calibrations-487"><a href="#Calibrations-487"><span class="linenos">487</span></a><span class="sd">            calibration file to be read. If one of the basenames is used</span>
</span><span id="Calibrations-488"><a href="#Calibrations-488"><span class="linenos">488</span></a><span class="sd">            this code will look for the most recent calibration of that type</span>
</span><span id="Calibrations-489"><a href="#Calibrations-489"><span class="linenos">489</span></a><span class="sd">            in the directory &#39;~\.Trough\calibrations&#39;.</span>
</span><span id="Calibrations-490"><a href="#Calibrations-490"><span class="linenos">490</span></a>
</span><span id="Calibrations-491"><a href="#Calibrations-491"><span class="linenos">491</span></a><span class="sd">        Returns</span>
</span><span id="Calibrations-492"><a href="#Calibrations-492"><span class="linenos">492</span></a><span class="sd">        -------</span>
</span><span id="Calibrations-493"><a href="#Calibrations-493"><span class="linenos">493</span></a><span class="sd">        Calibration</span>
</span><span id="Calibrations-494"><a href="#Calibrations-494"><span class="linenos">494</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Calibrations-495"><a href="#Calibrations-495"><span class="linenos">495</span></a>        <span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</span><span id="Calibrations-496"><a href="#Calibrations-496"><span class="linenos">496</span></a>        <span class="n">temppath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Calibrations-497"><a href="#Calibrations-497"><span class="linenos">497</span></a>        <span class="n">path_parent</span> <span class="o">=</span> <span class="n">temppath</span><span class="o">.</span><span class="n">parent</span>
</span><span id="Calibrations-498"><a href="#Calibrations-498"><span class="linenos">498</span></a>        <span class="n">path_suffixes</span> <span class="o">=</span> <span class="n">temppath</span><span class="o">.</span><span class="n">suffixes</span>
</span><span id="Calibrations-499"><a href="#Calibrations-499"><span class="linenos">499</span></a>        <span class="n">fullpath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">()</span>
</span><span id="Calibrations-500"><a href="#Calibrations-500"><span class="linenos">500</span></a>        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">path_parent</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;.&#39;</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">path_suffixes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Calibrations-501"><a href="#Calibrations-501"><span class="linenos">501</span></a>            <span class="n">basepath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;~/.Trough/calibrations&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">expanduser</span><span class="p">()</span>
</span><span id="Calibrations-502"><a href="#Calibrations-502"><span class="linenos">502</span></a>            <span class="n">filelist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">basepath</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">name</span><span class="o">+</span><span class="s1">&#39;_*.trh.cal.html&#39;</span><span class="p">))</span>
</span><span id="Calibrations-503"><a href="#Calibrations-503"><span class="linenos">503</span></a>            <span class="n">filelist</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
</span><span id="Calibrations-504"><a href="#Calibrations-504"><span class="linenos">504</span></a>            <span class="n">fullpath</span> <span class="o">=</span> <span class="n">filelist</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Calibrations-505"><a href="#Calibrations-505"><span class="linenos">505</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Calibrations-506"><a href="#Calibrations-506"><span class="linenos">506</span></a>            <span class="n">fullpath</span> <span class="o">=</span> <span class="n">temppath</span>
</span><span id="Calibrations-507"><a href="#Calibrations-507"><span class="linenos">507</span></a>        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fullpath</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span><span id="Calibrations-508"><a href="#Calibrations-508"><span class="linenos">508</span></a>        <span class="n">tempdoc</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="Calibrations-509"><a href="#Calibrations-509"><span class="linenos">509</span></a>        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Calibrations-510"><a href="#Calibrations-510"><span class="linenos">510</span></a>        <span class="k">return</span> <span class="n">Calibration</span><span class="o">.</span><span class="n">cal_from_html</span><span class="p">(</span><span class="n">tempdoc</span><span class="p">)</span>
</span><span id="Calibrations-511"><a href="#Calibrations-511"><span class="linenos">511</span></a>
</span><span id="Calibrations-512"><a href="#Calibrations-512"><span class="linenos">512</span></a>    <span class="k">def</span> <span class="nf">write_cal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dirpath</span><span class="p">,</span> <span class="n">cal</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="Calibrations-513"><a href="#Calibrations-513"><span class="linenos">513</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Calibrations-514"><a href="#Calibrations-514"><span class="linenos">514</span></a><span class="sd">        Writes a calibration file with the base filename `cal.name + int(</span>
</span><span id="Calibrations-515"><a href="#Calibrations-515"><span class="linenos">515</span></a><span class="sd">        cal.timestamp)` into the directory specified. Currently only produces</span>
</span><span id="Calibrations-516"><a href="#Calibrations-516"><span class="linenos">516</span></a><span class="sd">        an html file that is also human-readable. Other file formats may be</span>
</span><span id="Calibrations-517"><a href="#Calibrations-517"><span class="linenos">517</span></a><span class="sd">        available in the future through the use of key word arguments.</span>
</span><span id="Calibrations-518"><a href="#Calibrations-518"><span class="linenos">518</span></a>
</span><span id="Calibrations-519"><a href="#Calibrations-519"><span class="linenos">519</span></a><span class="sd">        Parameters</span>
</span><span id="Calibrations-520"><a href="#Calibrations-520"><span class="linenos">520</span></a><span class="sd">        ----------</span>
</span><span id="Calibrations-521"><a href="#Calibrations-521"><span class="linenos">521</span></a><span class="sd">        dirpath:</span>
</span><span id="Calibrations-522"><a href="#Calibrations-522"><span class="linenos">522</span></a><span class="sd">            pathlike object or string</span>
</span><span id="Calibrations-523"><a href="#Calibrations-523"><span class="linenos">523</span></a>
</span><span id="Calibrations-524"><a href="#Calibrations-524"><span class="linenos">524</span></a><span class="sd">        cal: Calibration</span>
</span><span id="Calibrations-525"><a href="#Calibrations-525"><span class="linenos">525</span></a><span class="sd">            a calibration object containing the information about the</span>
</span><span id="Calibrations-526"><a href="#Calibrations-526"><span class="linenos">526</span></a><span class="sd">            calibration to write to the file.</span>
</span><span id="Calibrations-527"><a href="#Calibrations-527"><span class="linenos">527</span></a>
</span><span id="Calibrations-528"><a href="#Calibrations-528"><span class="linenos">528</span></a><span class="sd">        kwargs:</span>
</span><span id="Calibrations-529"><a href="#Calibrations-529"><span class="linenos">529</span></a><span class="sd">            optional key word arguments for future adaptability</span>
</span><span id="Calibrations-530"><a href="#Calibrations-530"><span class="linenos">530</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Calibrations-531"><a href="#Calibrations-531"><span class="linenos">531</span></a>        <span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</span><span id="Calibrations-532"><a href="#Calibrations-532"><span class="linenos">532</span></a>        <span class="n">fileext</span> <span class="o">=</span> <span class="s1">&#39;.trh.cal.html&#39;</span>
</span><span id="Calibrations-533"><a href="#Calibrations-533"><span class="linenos">533</span></a>        <span class="n">filename</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">cal</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">cal</span><span class="o">.</span><span class="n">timestamp</span><span class="p">))</span><span class="o">+</span><span class="n">fileext</span>
</span><span id="Calibrations-534"><a href="#Calibrations-534"><span class="linenos">534</span></a>        <span class="n">fullpath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">dirpath</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
</span><span id="Calibrations-535"><a href="#Calibrations-535"><span class="linenos">535</span></a>        <span class="n">svhtml</span> <span class="o">=</span> <span class="s1">&#39;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;body&gt;&#39;</span> <span class="o">+</span> <span class="n">cal</span><span class="o">.</span><span class="n">cal_to_html</span><span class="p">()</span> <span class="o">+</span> \
</span><span id="Calibrations-536"><a href="#Calibrations-536"><span class="linenos">536</span></a>                 <span class="s1">&#39;&lt;/body&gt;&lt;/html&gt;&#39;</span>
</span><span id="Calibrations-537"><a href="#Calibrations-537"><span class="linenos">537</span></a>        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fullpath</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
</span><span id="Calibrations-538"><a href="#Calibrations-538"><span class="linenos">538</span></a>        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">svhtml</span><span class="p">)</span>
</span><span id="Calibrations-539"><a href="#Calibrations-539"><span class="linenos">539</span></a>        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Calibrations-540"><a href="#Calibrations-540"><span class="linenos">540</span></a>        <span class="k">pass</span>
</span><span id="Calibrations-541"><a href="#Calibrations-541"><span class="linenos">541</span></a>
</span><span id="Calibrations-542"><a href="#Calibrations-542"><span class="linenos">542</span></a>    <span class="k">def</span> <span class="nf">poly_fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_x</span><span class="p">,</span> <span class="n">data_y</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">yerr</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="Calibrations-543"><a href="#Calibrations-543"><span class="linenos">543</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Does a polynomial fit of the specified order using the x and y</span>
</span><span id="Calibrations-544"><a href="#Calibrations-544"><span class="linenos">544</span></a><span class="sd">        values provided.</span>
</span><span id="Calibrations-545"><a href="#Calibrations-545"><span class="linenos">545</span></a>
</span><span id="Calibrations-546"><a href="#Calibrations-546"><span class="linenos">546</span></a><span class="sd">        Parameters</span>
</span><span id="Calibrations-547"><a href="#Calibrations-547"><span class="linenos">547</span></a><span class="sd">        ----------</span>
</span><span id="Calibrations-548"><a href="#Calibrations-548"><span class="linenos">548</span></a><span class="sd">        data_x: list</span>
</span><span id="Calibrations-549"><a href="#Calibrations-549"><span class="linenos">549</span></a><span class="sd">            of numerical x values.</span>
</span><span id="Calibrations-550"><a href="#Calibrations-550"><span class="linenos">550</span></a>
</span><span id="Calibrations-551"><a href="#Calibrations-551"><span class="linenos">551</span></a><span class="sd">        data_y: list</span>
</span><span id="Calibrations-552"><a href="#Calibrations-552"><span class="linenos">552</span></a><span class="sd">            of numerical y values.</span>
</span><span id="Calibrations-553"><a href="#Calibrations-553"><span class="linenos">553</span></a>
</span><span id="Calibrations-554"><a href="#Calibrations-554"><span class="linenos">554</span></a><span class="sd">        order: int</span>
</span><span id="Calibrations-555"><a href="#Calibrations-555"><span class="linenos">555</span></a><span class="sd">            the order of the polynomical used for fitting.</span>
</span><span id="Calibrations-556"><a href="#Calibrations-556"><span class="linenos">556</span></a>
</span><span id="Calibrations-557"><a href="#Calibrations-557"><span class="linenos">557</span></a><span class="sd">        yerr: float or iterable of float</span>
</span><span id="Calibrations-558"><a href="#Calibrations-558"><span class="linenos">558</span></a><span class="sd">            absolute error(s) in the y-value. Used to weight the fit. If no</span>
</span><span id="Calibrations-559"><a href="#Calibrations-559"><span class="linenos">559</span></a><span class="sd">            values are provided the assumption is equal weighting.</span>
</span><span id="Calibrations-560"><a href="#Calibrations-560"><span class="linenos">560</span></a>
</span><span id="Calibrations-561"><a href="#Calibrations-561"><span class="linenos">561</span></a><span class="sd">        Returns</span>
</span><span id="Calibrations-562"><a href="#Calibrations-562"><span class="linenos">562</span></a><span class="sd">        -------</span>
</span><span id="Calibrations-563"><a href="#Calibrations-563"><span class="linenos">563</span></a><span class="sd">        param: list</span>
</span><span id="Calibrations-564"><a href="#Calibrations-564"><span class="linenos">564</span></a><span class="sd">            of fitted parameters.</span>
</span><span id="Calibrations-565"><a href="#Calibrations-565"><span class="linenos">565</span></a>
</span><span id="Calibrations-566"><a href="#Calibrations-566"><span class="linenos">566</span></a><span class="sd">        param_stdev: list</span>
</span><span id="Calibrations-567"><a href="#Calibrations-567"><span class="linenos">567</span></a><span class="sd">            of estimated standard deviation in the parameters.</span>
</span><span id="Calibrations-568"><a href="#Calibrations-568"><span class="linenos">568</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Calibrations-569"><a href="#Calibrations-569"><span class="linenos">569</span></a>        <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span id="Calibrations-570"><a href="#Calibrations-570"><span class="linenos">570</span></a>        <span class="kn">import</span> <span class="nn">lmfit</span> <span class="k">as</span> <span class="nn">lmfit</span>
</span><span id="Calibrations-571"><a href="#Calibrations-571"><span class="linenos">571</span></a>        <span class="kn">from</span> <span class="nn">round_using_error.round_using_error</span> <span class="kn">import</span> <span class="n">numbers_rndwitherr</span>
</span><span id="Calibrations-572"><a href="#Calibrations-572"><span class="linenos">572</span></a>
</span><span id="Calibrations-573"><a href="#Calibrations-573"><span class="linenos">573</span></a>        <span class="c1"># Define the fit model, initial guesses, and constraints</span>
</span><span id="Calibrations-574"><a href="#Calibrations-574"><span class="linenos">574</span></a>        <span class="n">fitmod</span> <span class="o">=</span> <span class="n">lmfit</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">PolynomialModel</span><span class="p">(</span><span class="n">degree</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>
</span><span id="Calibrations-575"><a href="#Calibrations-575"><span class="linenos">575</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
</span><span id="Calibrations-576"><a href="#Calibrations-576"><span class="linenos">576</span></a>            <span class="n">fitmod</span><span class="o">.</span><span class="n">set_param_hint</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">),</span> <span class="n">vary</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
</span><span id="Calibrations-577"><a href="#Calibrations-577"><span class="linenos">577</span></a>
</span><span id="Calibrations-578"><a href="#Calibrations-578"><span class="linenos">578</span></a>        <span class="c1"># Set the weighting if errors provided</span>
</span><span id="Calibrations-579"><a href="#Calibrations-579"><span class="linenos">579</span></a>        <span class="n">weighting</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Calibrations-580"><a href="#Calibrations-580"><span class="linenos">580</span></a>        <span class="k">if</span> <span class="n">yerr</span><span class="p">:</span>
</span><span id="Calibrations-581"><a href="#Calibrations-581"><span class="linenos">581</span></a>            <span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Iterable</span>
</span><span id="Calibrations-582"><a href="#Calibrations-582"><span class="linenos">582</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">yerr</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">):</span>
</span><span id="Calibrations-583"><a href="#Calibrations-583"><span class="linenos">583</span></a>                <span class="n">weighting</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">yerr</span><span class="p">)</span>
</span><span id="Calibrations-584"><a href="#Calibrations-584"><span class="linenos">584</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Calibrations-585"><a href="#Calibrations-585"><span class="linenos">585</span></a>                <span class="n">weighting</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data_y</span><span class="p">)</span><span class="o">*</span><span class="mi">0</span> <span class="o">+</span> <span class="mi">1</span><span class="o">/</span><span class="n">yerr</span>
</span><span id="Calibrations-586"><a href="#Calibrations-586"><span class="linenos">586</span></a>
</span><span id="Calibrations-587"><a href="#Calibrations-587"><span class="linenos">587</span></a>        <span class="c1"># Do fit</span>
</span><span id="Calibrations-588"><a href="#Calibrations-588"><span class="linenos">588</span></a>        <span class="n">fit</span> <span class="o">=</span> <span class="n">fitmod</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data_y</span><span class="p">),</span> <span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data_x</span><span class="p">),</span>
</span><span id="Calibrations-589"><a href="#Calibrations-589"><span class="linenos">589</span></a>                         <span class="n">weights</span><span class="o">=</span><span class="n">weighting</span><span class="p">,</span> <span class="n">scale_covar</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="Calibrations-590"><a href="#Calibrations-590"><span class="linenos">590</span></a>                         <span class="n">nan_policy</span><span class="o">=</span><span class="s2">&quot;omit&quot;</span><span class="p">)</span>
</span><span id="Calibrations-591"><a href="#Calibrations-591"><span class="linenos">591</span></a>        <span class="n">param</span> <span class="o">=</span> <span class="p">(</span><span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span>
</span><span id="Calibrations-592"><a href="#Calibrations-592"><span class="linenos">592</span></a>        <span class="n">param_stdev</span> <span class="o">=</span> <span class="p">(</span><span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span>
</span><span id="Calibrations-593"><a href="#Calibrations-593"><span class="linenos">593</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">fit</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="Calibrations-594"><a href="#Calibrations-594"><span class="linenos">594</span></a>            <span class="n">pwr</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">:])</span>
</span><span id="Calibrations-595"><a href="#Calibrations-595"><span class="linenos">595</span></a>            <span class="k">if</span> <span class="n">pwr</span> <span class="o">&lt;=</span> <span class="n">order</span><span class="p">:</span>
</span><span id="Calibrations-596"><a href="#Calibrations-596"><span class="linenos">596</span></a>                <span class="n">rounded</span> <span class="o">=</span> <span class="n">numbers_rndwitherr</span><span class="p">(</span><span class="n">fit</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
</span><span id="Calibrations-597"><a href="#Calibrations-597"><span class="linenos">597</span></a>                                             <span class="n">fit</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
</span><span id="Calibrations-598"><a href="#Calibrations-598"><span class="linenos">598</span></a>                <span class="n">param</span><span class="p">[</span><span class="n">pwr</span><span class="p">]</span> <span class="o">=</span> <span class="n">rounded</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Calibrations-599"><a href="#Calibrations-599"><span class="linenos">599</span></a>                <span class="n">param_stdev</span><span class="p">[</span><span class="n">pwr</span><span class="p">]</span> <span class="o">=</span> <span class="n">rounded</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="Calibrations-600"><a href="#Calibrations-600"><span class="linenos">600</span></a>        <span class="k">return</span> <span class="n">param</span><span class="p">,</span> <span class="n">param_stdev</span>
</span></pre></div>


    

                            <div id="Calibrations.read_cal" class="classattr">
                                        <input id="Calibrations.read_cal-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">read_cal</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">name</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Calibrations.read_cal-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Calibrations.read_cal"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Calibrations.read_cal-476"><a href="#Calibrations.read_cal-476"><span class="linenos">476</span></a>    <span class="k">def</span> <span class="nf">read_cal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span id="Calibrations.read_cal-477"><a href="#Calibrations.read_cal-477"><span class="linenos">477</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;This routine reads in a calibration file. If it is the standard</span>
</span><span id="Calibrations.read_cal-478"><a href="#Calibrations.read_cal-478"><span class="linenos">478</span></a><span class="sd">        html file it uses `calibration.cal_from_html()` operation to convert</span>
</span><span id="Calibrations.read_cal-479"><a href="#Calibrations.read_cal-479"><span class="linenos">479</span></a><span class="sd">        it to a calibration.</span>
</span><span id="Calibrations.read_cal-480"><a href="#Calibrations.read_cal-480"><span class="linenos">480</span></a>
</span><span id="Calibrations.read_cal-481"><a href="#Calibrations.read_cal-481"><span class="linenos">481</span></a><span class="sd">        Parameters</span>
</span><span id="Calibrations.read_cal-482"><a href="#Calibrations.read_cal-482"><span class="linenos">482</span></a><span class="sd">        ----------</span>
</span><span id="Calibrations.read_cal-483"><a href="#Calibrations.read_cal-483"><span class="linenos">483</span></a><span class="sd">        name: str</span>
</span><span id="Calibrations.read_cal-484"><a href="#Calibrations.read_cal-484"><span class="linenos">484</span></a><span class="sd">            either the basename (current options: &#39;balance&#39;, &#39;barriers_open&#39;,</span>
</span><span id="Calibrations.read_cal-485"><a href="#Calibrations.read_cal-485"><span class="linenos">485</span></a><span class="sd">             &#39;barriers_close&#39;, &#39;speed_open&#39;, &#39;speed_close&#39; or</span>
</span><span id="Calibrations.read_cal-486"><a href="#Calibrations.read_cal-486"><span class="linenos">486</span></a><span class="sd">            &#39;temperature&#39;) or a string representation of the path to the</span>
</span><span id="Calibrations.read_cal-487"><a href="#Calibrations.read_cal-487"><span class="linenos">487</span></a><span class="sd">            calibration file to be read. If one of the basenames is used</span>
</span><span id="Calibrations.read_cal-488"><a href="#Calibrations.read_cal-488"><span class="linenos">488</span></a><span class="sd">            this code will look for the most recent calibration of that type</span>
</span><span id="Calibrations.read_cal-489"><a href="#Calibrations.read_cal-489"><span class="linenos">489</span></a><span class="sd">            in the directory &#39;~\.Trough\calibrations&#39;.</span>
</span><span id="Calibrations.read_cal-490"><a href="#Calibrations.read_cal-490"><span class="linenos">490</span></a>
</span><span id="Calibrations.read_cal-491"><a href="#Calibrations.read_cal-491"><span class="linenos">491</span></a><span class="sd">        Returns</span>
</span><span id="Calibrations.read_cal-492"><a href="#Calibrations.read_cal-492"><span class="linenos">492</span></a><span class="sd">        -------</span>
</span><span id="Calibrations.read_cal-493"><a href="#Calibrations.read_cal-493"><span class="linenos">493</span></a><span class="sd">        Calibration</span>
</span><span id="Calibrations.read_cal-494"><a href="#Calibrations.read_cal-494"><span class="linenos">494</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Calibrations.read_cal-495"><a href="#Calibrations.read_cal-495"><span class="linenos">495</span></a>        <span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</span><span id="Calibrations.read_cal-496"><a href="#Calibrations.read_cal-496"><span class="linenos">496</span></a>        <span class="n">temppath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Calibrations.read_cal-497"><a href="#Calibrations.read_cal-497"><span class="linenos">497</span></a>        <span class="n">path_parent</span> <span class="o">=</span> <span class="n">temppath</span><span class="o">.</span><span class="n">parent</span>
</span><span id="Calibrations.read_cal-498"><a href="#Calibrations.read_cal-498"><span class="linenos">498</span></a>        <span class="n">path_suffixes</span> <span class="o">=</span> <span class="n">temppath</span><span class="o">.</span><span class="n">suffixes</span>
</span><span id="Calibrations.read_cal-499"><a href="#Calibrations.read_cal-499"><span class="linenos">499</span></a>        <span class="n">fullpath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">()</span>
</span><span id="Calibrations.read_cal-500"><a href="#Calibrations.read_cal-500"><span class="linenos">500</span></a>        <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">path_parent</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;.&#39;</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">path_suffixes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Calibrations.read_cal-501"><a href="#Calibrations.read_cal-501"><span class="linenos">501</span></a>            <span class="n">basepath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="s1">&#39;~/.Trough/calibrations&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">expanduser</span><span class="p">()</span>
</span><span id="Calibrations.read_cal-502"><a href="#Calibrations.read_cal-502"><span class="linenos">502</span></a>            <span class="n">filelist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">basepath</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">name</span><span class="o">+</span><span class="s1">&#39;_*.trh.cal.html&#39;</span><span class="p">))</span>
</span><span id="Calibrations.read_cal-503"><a href="#Calibrations.read_cal-503"><span class="linenos">503</span></a>            <span class="n">filelist</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
</span><span id="Calibrations.read_cal-504"><a href="#Calibrations.read_cal-504"><span class="linenos">504</span></a>            <span class="n">fullpath</span> <span class="o">=</span> <span class="n">filelist</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">:][</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Calibrations.read_cal-505"><a href="#Calibrations.read_cal-505"><span class="linenos">505</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Calibrations.read_cal-506"><a href="#Calibrations.read_cal-506"><span class="linenos">506</span></a>            <span class="n">fullpath</span> <span class="o">=</span> <span class="n">temppath</span>
</span><span id="Calibrations.read_cal-507"><a href="#Calibrations.read_cal-507"><span class="linenos">507</span></a>        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fullpath</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
</span><span id="Calibrations.read_cal-508"><a href="#Calibrations.read_cal-508"><span class="linenos">508</span></a>        <span class="n">tempdoc</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="Calibrations.read_cal-509"><a href="#Calibrations.read_cal-509"><span class="linenos">509</span></a>        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Calibrations.read_cal-510"><a href="#Calibrations.read_cal-510"><span class="linenos">510</span></a>        <span class="k">return</span> <span class="n">Calibration</span><span class="o">.</span><span class="n">cal_from_html</span><span class="p">(</span><span class="n">tempdoc</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>This routine reads in a calibration file. If it is the standard
html file it uses <code>calibration.cal_from_html()</code> operation to convert
it to a calibration.</p>

<h2 id="parameters">Parameters</h2>

<p>name: str
    either the basename (current options: 'balance', 'barriers_open',
     'barriers_close', 'speed_open', 'speed_close' or
    'temperature') or a string representation of the path to the
    calibration file to be read. If one of the basenames is used
    this code will look for the most recent calibration of that type
    in the directory '~.Trough\calibrations'.</p>

<h2 id="returns">Returns</h2>

<p>Calibration</p>
</div>


                            </div>
                            <div id="Calibrations.write_cal" class="classattr">
                                        <input id="Calibrations.write_cal-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">write_cal</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">dirpath</span>, </span><span class="param"><span class="n">cal</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Calibrations.write_cal-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Calibrations.write_cal"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Calibrations.write_cal-512"><a href="#Calibrations.write_cal-512"><span class="linenos">512</span></a>    <span class="k">def</span> <span class="nf">write_cal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dirpath</span><span class="p">,</span> <span class="n">cal</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="Calibrations.write_cal-513"><a href="#Calibrations.write_cal-513"><span class="linenos">513</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Calibrations.write_cal-514"><a href="#Calibrations.write_cal-514"><span class="linenos">514</span></a><span class="sd">        Writes a calibration file with the base filename `cal.name + int(</span>
</span><span id="Calibrations.write_cal-515"><a href="#Calibrations.write_cal-515"><span class="linenos">515</span></a><span class="sd">        cal.timestamp)` into the directory specified. Currently only produces</span>
</span><span id="Calibrations.write_cal-516"><a href="#Calibrations.write_cal-516"><span class="linenos">516</span></a><span class="sd">        an html file that is also human-readable. Other file formats may be</span>
</span><span id="Calibrations.write_cal-517"><a href="#Calibrations.write_cal-517"><span class="linenos">517</span></a><span class="sd">        available in the future through the use of key word arguments.</span>
</span><span id="Calibrations.write_cal-518"><a href="#Calibrations.write_cal-518"><span class="linenos">518</span></a>
</span><span id="Calibrations.write_cal-519"><a href="#Calibrations.write_cal-519"><span class="linenos">519</span></a><span class="sd">        Parameters</span>
</span><span id="Calibrations.write_cal-520"><a href="#Calibrations.write_cal-520"><span class="linenos">520</span></a><span class="sd">        ----------</span>
</span><span id="Calibrations.write_cal-521"><a href="#Calibrations.write_cal-521"><span class="linenos">521</span></a><span class="sd">        dirpath:</span>
</span><span id="Calibrations.write_cal-522"><a href="#Calibrations.write_cal-522"><span class="linenos">522</span></a><span class="sd">            pathlike object or string</span>
</span><span id="Calibrations.write_cal-523"><a href="#Calibrations.write_cal-523"><span class="linenos">523</span></a>
</span><span id="Calibrations.write_cal-524"><a href="#Calibrations.write_cal-524"><span class="linenos">524</span></a><span class="sd">        cal: Calibration</span>
</span><span id="Calibrations.write_cal-525"><a href="#Calibrations.write_cal-525"><span class="linenos">525</span></a><span class="sd">            a calibration object containing the information about the</span>
</span><span id="Calibrations.write_cal-526"><a href="#Calibrations.write_cal-526"><span class="linenos">526</span></a><span class="sd">            calibration to write to the file.</span>
</span><span id="Calibrations.write_cal-527"><a href="#Calibrations.write_cal-527"><span class="linenos">527</span></a>
</span><span id="Calibrations.write_cal-528"><a href="#Calibrations.write_cal-528"><span class="linenos">528</span></a><span class="sd">        kwargs:</span>
</span><span id="Calibrations.write_cal-529"><a href="#Calibrations.write_cal-529"><span class="linenos">529</span></a><span class="sd">            optional key word arguments for future adaptability</span>
</span><span id="Calibrations.write_cal-530"><a href="#Calibrations.write_cal-530"><span class="linenos">530</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Calibrations.write_cal-531"><a href="#Calibrations.write_cal-531"><span class="linenos">531</span></a>        <span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</span><span id="Calibrations.write_cal-532"><a href="#Calibrations.write_cal-532"><span class="linenos">532</span></a>        <span class="n">fileext</span> <span class="o">=</span> <span class="s1">&#39;.trh.cal.html&#39;</span>
</span><span id="Calibrations.write_cal-533"><a href="#Calibrations.write_cal-533"><span class="linenos">533</span></a>        <span class="n">filename</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">cal</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">cal</span><span class="o">.</span><span class="n">timestamp</span><span class="p">))</span><span class="o">+</span><span class="n">fileext</span>
</span><span id="Calibrations.write_cal-534"><a href="#Calibrations.write_cal-534"><span class="linenos">534</span></a>        <span class="n">fullpath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">dirpath</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
</span><span id="Calibrations.write_cal-535"><a href="#Calibrations.write_cal-535"><span class="linenos">535</span></a>        <span class="n">svhtml</span> <span class="o">=</span> <span class="s1">&#39;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;body&gt;&#39;</span> <span class="o">+</span> <span class="n">cal</span><span class="o">.</span><span class="n">cal_to_html</span><span class="p">()</span> <span class="o">+</span> \
</span><span id="Calibrations.write_cal-536"><a href="#Calibrations.write_cal-536"><span class="linenos">536</span></a>                 <span class="s1">&#39;&lt;/body&gt;&lt;/html&gt;&#39;</span>
</span><span id="Calibrations.write_cal-537"><a href="#Calibrations.write_cal-537"><span class="linenos">537</span></a>        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">fullpath</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
</span><span id="Calibrations.write_cal-538"><a href="#Calibrations.write_cal-538"><span class="linenos">538</span></a>        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">svhtml</span><span class="p">)</span>
</span><span id="Calibrations.write_cal-539"><a href="#Calibrations.write_cal-539"><span class="linenos">539</span></a>        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Calibrations.write_cal-540"><a href="#Calibrations.write_cal-540"><span class="linenos">540</span></a>        <span class="k">pass</span>
</span></pre></div>


            <div class="docstring"><p>Writes a calibration file with the base filename <code>cal.name + int(
cal.timestamp)</code> into the directory specified. Currently only produces
an html file that is also human-readable. Other file formats may be
available in the future through the use of key word arguments.</p>

<h2 id="parameters">Parameters</h2>

<p>dirpath:
    pathlike object or string</p>

<p>cal: Calibration
    a calibration object containing the information about the
    calibration to write to the file.</p>

<p>kwargs:
    optional key word arguments for future adaptability</p>
</div>


                            </div>
                            <div id="Calibrations.poly_fit" class="classattr">
                                        <input id="Calibrations.poly_fit-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">poly_fit</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">data_x</span>, </span><span class="param"><span class="n">data_y</span>, </span><span class="param"><span class="n">order</span>, </span><span class="param"><span class="n">yerr</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Calibrations.poly_fit-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Calibrations.poly_fit"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Calibrations.poly_fit-542"><a href="#Calibrations.poly_fit-542"><span class="linenos">542</span></a>    <span class="k">def</span> <span class="nf">poly_fit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_x</span><span class="p">,</span> <span class="n">data_y</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">yerr</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="Calibrations.poly_fit-543"><a href="#Calibrations.poly_fit-543"><span class="linenos">543</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Does a polynomial fit of the specified order using the x and y</span>
</span><span id="Calibrations.poly_fit-544"><a href="#Calibrations.poly_fit-544"><span class="linenos">544</span></a><span class="sd">        values provided.</span>
</span><span id="Calibrations.poly_fit-545"><a href="#Calibrations.poly_fit-545"><span class="linenos">545</span></a>
</span><span id="Calibrations.poly_fit-546"><a href="#Calibrations.poly_fit-546"><span class="linenos">546</span></a><span class="sd">        Parameters</span>
</span><span id="Calibrations.poly_fit-547"><a href="#Calibrations.poly_fit-547"><span class="linenos">547</span></a><span class="sd">        ----------</span>
</span><span id="Calibrations.poly_fit-548"><a href="#Calibrations.poly_fit-548"><span class="linenos">548</span></a><span class="sd">        data_x: list</span>
</span><span id="Calibrations.poly_fit-549"><a href="#Calibrations.poly_fit-549"><span class="linenos">549</span></a><span class="sd">            of numerical x values.</span>
</span><span id="Calibrations.poly_fit-550"><a href="#Calibrations.poly_fit-550"><span class="linenos">550</span></a>
</span><span id="Calibrations.poly_fit-551"><a href="#Calibrations.poly_fit-551"><span class="linenos">551</span></a><span class="sd">        data_y: list</span>
</span><span id="Calibrations.poly_fit-552"><a href="#Calibrations.poly_fit-552"><span class="linenos">552</span></a><span class="sd">            of numerical y values.</span>
</span><span id="Calibrations.poly_fit-553"><a href="#Calibrations.poly_fit-553"><span class="linenos">553</span></a>
</span><span id="Calibrations.poly_fit-554"><a href="#Calibrations.poly_fit-554"><span class="linenos">554</span></a><span class="sd">        order: int</span>
</span><span id="Calibrations.poly_fit-555"><a href="#Calibrations.poly_fit-555"><span class="linenos">555</span></a><span class="sd">            the order of the polynomical used for fitting.</span>
</span><span id="Calibrations.poly_fit-556"><a href="#Calibrations.poly_fit-556"><span class="linenos">556</span></a>
</span><span id="Calibrations.poly_fit-557"><a href="#Calibrations.poly_fit-557"><span class="linenos">557</span></a><span class="sd">        yerr: float or iterable of float</span>
</span><span id="Calibrations.poly_fit-558"><a href="#Calibrations.poly_fit-558"><span class="linenos">558</span></a><span class="sd">            absolute error(s) in the y-value. Used to weight the fit. If no</span>
</span><span id="Calibrations.poly_fit-559"><a href="#Calibrations.poly_fit-559"><span class="linenos">559</span></a><span class="sd">            values are provided the assumption is equal weighting.</span>
</span><span id="Calibrations.poly_fit-560"><a href="#Calibrations.poly_fit-560"><span class="linenos">560</span></a>
</span><span id="Calibrations.poly_fit-561"><a href="#Calibrations.poly_fit-561"><span class="linenos">561</span></a><span class="sd">        Returns</span>
</span><span id="Calibrations.poly_fit-562"><a href="#Calibrations.poly_fit-562"><span class="linenos">562</span></a><span class="sd">        -------</span>
</span><span id="Calibrations.poly_fit-563"><a href="#Calibrations.poly_fit-563"><span class="linenos">563</span></a><span class="sd">        param: list</span>
</span><span id="Calibrations.poly_fit-564"><a href="#Calibrations.poly_fit-564"><span class="linenos">564</span></a><span class="sd">            of fitted parameters.</span>
</span><span id="Calibrations.poly_fit-565"><a href="#Calibrations.poly_fit-565"><span class="linenos">565</span></a>
</span><span id="Calibrations.poly_fit-566"><a href="#Calibrations.poly_fit-566"><span class="linenos">566</span></a><span class="sd">        param_stdev: list</span>
</span><span id="Calibrations.poly_fit-567"><a href="#Calibrations.poly_fit-567"><span class="linenos">567</span></a><span class="sd">            of estimated standard deviation in the parameters.</span>
</span><span id="Calibrations.poly_fit-568"><a href="#Calibrations.poly_fit-568"><span class="linenos">568</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Calibrations.poly_fit-569"><a href="#Calibrations.poly_fit-569"><span class="linenos">569</span></a>        <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span id="Calibrations.poly_fit-570"><a href="#Calibrations.poly_fit-570"><span class="linenos">570</span></a>        <span class="kn">import</span> <span class="nn">lmfit</span> <span class="k">as</span> <span class="nn">lmfit</span>
</span><span id="Calibrations.poly_fit-571"><a href="#Calibrations.poly_fit-571"><span class="linenos">571</span></a>        <span class="kn">from</span> <span class="nn">round_using_error.round_using_error</span> <span class="kn">import</span> <span class="n">numbers_rndwitherr</span>
</span><span id="Calibrations.poly_fit-572"><a href="#Calibrations.poly_fit-572"><span class="linenos">572</span></a>
</span><span id="Calibrations.poly_fit-573"><a href="#Calibrations.poly_fit-573"><span class="linenos">573</span></a>        <span class="c1"># Define the fit model, initial guesses, and constraints</span>
</span><span id="Calibrations.poly_fit-574"><a href="#Calibrations.poly_fit-574"><span class="linenos">574</span></a>        <span class="n">fitmod</span> <span class="o">=</span> <span class="n">lmfit</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">PolynomialModel</span><span class="p">(</span><span class="n">degree</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>
</span><span id="Calibrations.poly_fit-575"><a href="#Calibrations.poly_fit-575"><span class="linenos">575</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
</span><span id="Calibrations.poly_fit-576"><a href="#Calibrations.poly_fit-576"><span class="linenos">576</span></a>            <span class="n">fitmod</span><span class="o">.</span><span class="n">set_param_hint</span><span class="p">(</span><span class="s2">&quot;c&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">),</span> <span class="n">vary</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
</span><span id="Calibrations.poly_fit-577"><a href="#Calibrations.poly_fit-577"><span class="linenos">577</span></a>
</span><span id="Calibrations.poly_fit-578"><a href="#Calibrations.poly_fit-578"><span class="linenos">578</span></a>        <span class="c1"># Set the weighting if errors provided</span>
</span><span id="Calibrations.poly_fit-579"><a href="#Calibrations.poly_fit-579"><span class="linenos">579</span></a>        <span class="n">weighting</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="Calibrations.poly_fit-580"><a href="#Calibrations.poly_fit-580"><span class="linenos">580</span></a>        <span class="k">if</span> <span class="n">yerr</span><span class="p">:</span>
</span><span id="Calibrations.poly_fit-581"><a href="#Calibrations.poly_fit-581"><span class="linenos">581</span></a>            <span class="kn">from</span> <span class="nn">collections.abc</span> <span class="kn">import</span> <span class="n">Iterable</span>
</span><span id="Calibrations.poly_fit-582"><a href="#Calibrations.poly_fit-582"><span class="linenos">582</span></a>            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">yerr</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">):</span>
</span><span id="Calibrations.poly_fit-583"><a href="#Calibrations.poly_fit-583"><span class="linenos">583</span></a>                <span class="n">weighting</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">yerr</span><span class="p">)</span>
</span><span id="Calibrations.poly_fit-584"><a href="#Calibrations.poly_fit-584"><span class="linenos">584</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Calibrations.poly_fit-585"><a href="#Calibrations.poly_fit-585"><span class="linenos">585</span></a>                <span class="n">weighting</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data_y</span><span class="p">)</span><span class="o">*</span><span class="mi">0</span> <span class="o">+</span> <span class="mi">1</span><span class="o">/</span><span class="n">yerr</span>
</span><span id="Calibrations.poly_fit-586"><a href="#Calibrations.poly_fit-586"><span class="linenos">586</span></a>
</span><span id="Calibrations.poly_fit-587"><a href="#Calibrations.poly_fit-587"><span class="linenos">587</span></a>        <span class="c1"># Do fit</span>
</span><span id="Calibrations.poly_fit-588"><a href="#Calibrations.poly_fit-588"><span class="linenos">588</span></a>        <span class="n">fit</span> <span class="o">=</span> <span class="n">fitmod</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data_y</span><span class="p">),</span> <span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data_x</span><span class="p">),</span>
</span><span id="Calibrations.poly_fit-589"><a href="#Calibrations.poly_fit-589"><span class="linenos">589</span></a>                         <span class="n">weights</span><span class="o">=</span><span class="n">weighting</span><span class="p">,</span> <span class="n">scale_covar</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="Calibrations.poly_fit-590"><a href="#Calibrations.poly_fit-590"><span class="linenos">590</span></a>                         <span class="n">nan_policy</span><span class="o">=</span><span class="s2">&quot;omit&quot;</span><span class="p">)</span>
</span><span id="Calibrations.poly_fit-591"><a href="#Calibrations.poly_fit-591"><span class="linenos">591</span></a>        <span class="n">param</span> <span class="o">=</span> <span class="p">(</span><span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span>
</span><span id="Calibrations.poly_fit-592"><a href="#Calibrations.poly_fit-592"><span class="linenos">592</span></a>        <span class="n">param_stdev</span> <span class="o">=</span> <span class="p">(</span><span class="n">order</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span>
</span><span id="Calibrations.poly_fit-593"><a href="#Calibrations.poly_fit-593"><span class="linenos">593</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">fit</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="Calibrations.poly_fit-594"><a href="#Calibrations.poly_fit-594"><span class="linenos">594</span></a>            <span class="n">pwr</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">k</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">:])</span>
</span><span id="Calibrations.poly_fit-595"><a href="#Calibrations.poly_fit-595"><span class="linenos">595</span></a>            <span class="k">if</span> <span class="n">pwr</span> <span class="o">&lt;=</span> <span class="n">order</span><span class="p">:</span>
</span><span id="Calibrations.poly_fit-596"><a href="#Calibrations.poly_fit-596"><span class="linenos">596</span></a>                <span class="n">rounded</span> <span class="o">=</span> <span class="n">numbers_rndwitherr</span><span class="p">(</span><span class="n">fit</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
</span><span id="Calibrations.poly_fit-597"><a href="#Calibrations.poly_fit-597"><span class="linenos">597</span></a>                                             <span class="n">fit</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
</span><span id="Calibrations.poly_fit-598"><a href="#Calibrations.poly_fit-598"><span class="linenos">598</span></a>                <span class="n">param</span><span class="p">[</span><span class="n">pwr</span><span class="p">]</span> <span class="o">=</span> <span class="n">rounded</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Calibrations.poly_fit-599"><a href="#Calibrations.poly_fit-599"><span class="linenos">599</span></a>                <span class="n">param_stdev</span><span class="p">[</span><span class="n">pwr</span><span class="p">]</span> <span class="o">=</span> <span class="n">rounded</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="Calibrations.poly_fit-600"><a href="#Calibrations.poly_fit-600"><span class="linenos">600</span></a>        <span class="k">return</span> <span class="n">param</span><span class="p">,</span> <span class="n">param_stdev</span>
</span></pre></div>


            <div class="docstring"><p>Does a polynomial fit of the specified order using the x and y
values provided.</p>

<h2 id="parameters">Parameters</h2>

<p>data_x: list
    of numerical x values.</p>

<p>data_y: list
    of numerical y values.</p>

<p>order: int
    the order of the polynomical used for fitting.</p>

<p>yerr: float or iterable of float
    absolute error(s) in the y-value. Used to weight the fit. If no
    values are provided the assumption is equal weighting.</p>

<h2 id="returns">Returns</h2>

<p>param: list
    of fitted parameters.</p>

<p>param_stdev: list
    of estimated standard deviation in the parameters.</p>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>